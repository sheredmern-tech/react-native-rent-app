================================================
COLLECTING ALL FILES FROM: d:/REACT-NATIVE/src
Date: Thu, Nov 13, 2025  3:45:29 PM
================================================

Total files to collect: 56


====================================================
FILE: components/ComparisonButton.tsx
====================================================

import React, { useEffect, useRef } from 'react';
import {
  TouchableOpacity,
  View,
  Text,
  StyleSheet,
  Animated,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { useNavigation } from '@react-navigation/native';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { useComparison } from '../context/ComparisonContext';

export const ComparisonButton: React.FC = () => {
  const navigation = useNavigation<RootStackNavigationProp<'Home'>>();
  const { getComparisonCount } = useComparison();
  const count = getComparisonCount();

  const scaleAnim = useRef(new Animated.Value(0)).current;
  const fadeAnim = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    if (count > 0) {
      Animated.parallel([
        Animated.spring(scaleAnim, {
          toValue: 1,
          tension: 50,
          friction: 7,
          useNativeDriver: true,
        }),
        Animated.timing(fadeAnim, {
          toValue: 1,
          duration: 300,
          useNativeDriver: true,
        }),
      ]).start();
    } else {
      Animated.parallel([
        Animated.timing(scaleAnim, {
          toValue: 0,
          duration: 200,
          useNativeDriver: true,
        }),
        Animated.timing(fadeAnim, {
          toValue: 0,
          duration: 200,
          useNativeDriver: true,
        }),
      ]).start();
    }
  }, [count]);

  if (count === 0) {
    return null;
  }

  return (
    <Animated.View
      style={[
        styles.container,
        {
          transform: [{ scale: scaleAnim }],
          opacity: fadeAnim,
        },
      ]}
    >
      <TouchableOpacity
        style={styles.fab}
        onPress={() => navigation.navigate('Comparison')}
        activeOpacity={0.8}
      >
        <Ionicons name="git-compare-outline" size={28} color={Colors.card} />
        <View style={styles.badge}>
          <Text style={styles.badgeText}>{count}</Text>
        </View>
      </TouchableOpacity>
    </Animated.View>
  );
};

const styles = StyleSheet.create({
  container: {
    position: 'absolute',
    bottom: 80,
    right: 20,
    zIndex: 999,
  },
  fab: {
    width: 60,
    height: 60,
    borderRadius: 30,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 8,
  },
  badge: {
    position: 'absolute',
    top: -4,
    right: -4,
    width: 24,
    height: 24,
    borderRadius: 12,
    backgroundColor: '#FF3B30',
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 2,
    borderColor: Colors.card,
  },
  badgeText: {
    fontSize: 12,
    fontFamily: Fonts.bold,
    color: Colors.card,
  },
});


====================================================
FILE: components/ComparisonRow.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface ComparisonRowProps {
  label: string;
  values: (string | number | boolean)[];
  highlightBest?: boolean;
  highlightIndex?: number;
  isAlternate?: boolean;
}

export const ComparisonRow: React.FC<ComparisonRowProps> = ({
  label,
  values,
  highlightBest = false,
  highlightIndex,
  isAlternate = false,
}) => {
  const renderValue = (value: string | number | boolean, index: number) => {
    const isHighlighted = highlightBest && highlightIndex === index;

    if (typeof value === 'boolean') {
      return (
        <View
          style={[
            styles.valueContainer,
            isHighlighted && styles.highlightedContainer,
          ]}
        >
          <Ionicons
            name={value ? 'checkmark' : 'close'}
            size={24}
            color={value ? '#2E7D32' : '#C62828'}
          />
        </View>
      );
    }

    return (
      <View
        style={[
          styles.valueContainer,
          isHighlighted && styles.highlightedContainer,
        ]}
      >
        <Text
          style={[
            styles.valueText,
            isHighlighted && styles.highlightedText,
          ]}
        >
          {value}
        </Text>
      </View>
    );
  };

  return (
    <View style={[styles.row, isAlternate && styles.alternateRow]}>
      <View style={styles.labelContainer}>
        <Text style={styles.labelText}>{label}</Text>
      </View>
      {values.map((value, index) => (
        <View key={index} style={styles.valueColumn}>
          {renderValue(value, index)}
        </View>
      ))}
    </View>
  );
};

const styles = StyleSheet.create({
  row: {
    flexDirection: 'row',
    minHeight: 50,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
    backgroundColor: Colors.card,
  },
  alternateRow: {
    backgroundColor: '#F5F5F5',
  },
  labelContainer: {
    width: '40%',
    justifyContent: 'center',
    paddingLeft: 16,
    paddingRight: 8,
  },
  labelText: {
    fontSize: 14,
    fontFamily: Fonts.medium,
    color: Colors.text,
  },
  valueColumn: {
    width: '20%',
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 4,
  },
  valueContainer: {
    justifyContent: 'center',
    alignItems: 'center',
    paddingVertical: 8,
    paddingHorizontal: 8,
    borderRadius: 6,
  },
  highlightedContainer: {
    backgroundColor: '#E8F5E9',
  },
  valueText: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.text,
    textAlign: 'center',
  },
  highlightedText: {
    color: '#2E7D32',
    fontFamily: Fonts.semiBold,
  },
});


====================================================
FILE: components/ContactMethodButton.tsx
====================================================

import React, { useRef } from 'react';
import {
  TouchableOpacity,
  View,
  Text,
  StyleSheet,
  Animated,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface ContactMethodButtonProps {
  icon: keyof typeof Ionicons.glyphMap;
  label: string;
  subtitle: string;
  onPress: () => void;
  color: string;
}

export const ContactMethodButton: React.FC<ContactMethodButtonProps> = ({
  icon,
  label,
  subtitle,
  onPress,
  color,
}) => {
  const scaleAnim = useRef(new Animated.Value(1)).current;

  const handlePressIn = () => {
    Animated.spring(scaleAnim, {
      toValue: 0.98,
      useNativeDriver: true,
    }).start();
  };

  const handlePressOut = () => {
    Animated.spring(scaleAnim, {
      toValue: 1,
      useNativeDriver: true,
    }).start();
  };

  return (
    <Animated.View style={{ transform: [{ scale: scaleAnim }] }}>
      <TouchableOpacity
        style={styles.container}
        onPress={onPress}
        onPressIn={handlePressIn}
        onPressOut={handlePressOut}
        activeOpacity={1}
      >
        <View style={[styles.iconContainer, { backgroundColor: `${color}15` }]}>
          <Ionicons name={icon} size={24} color={color} />
        </View>
        <View style={styles.textContainer}>
          <Text style={styles.label}>{label}</Text>
          <Text style={styles.subtitle} numberOfLines={1}>{subtitle}</Text>
        </View>
        <Ionicons name="chevron-forward" size={20} color={Colors.text.secondary} />
      </TouchableOpacity>
    </Animated.View>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 12,
    paddingHorizontal: 16,
    backgroundColor: Colors.white,
    borderRadius: 12,
    borderWidth: 1,
    borderColor: Colors.border,
    marginBottom: 12,
    minHeight: 72,
  },
  iconContainer: {
    width: 48,
    height: 48,
    borderRadius: 24,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  textContainer: {
    flex: 1,
  },
  label: {
    fontSize: 16,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.text.primary,
    marginBottom: 4,
  },
  subtitle: {
    fontSize: 14,
    color: Colors.text.secondary,
  },
});


====================================================
FILE: components/ContactOwnerModal.tsx
====================================================

import React, { useState } from 'react';
import {
  Modal,
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  ScrollView,
  Pressable,
  Alert,
  KeyboardAvoidingView,
  Platform,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { Property, ContactFormData } from '../types';
import { Colors, Fonts } from '../constants';
import { ContactMethodButton } from './ContactMethodButton';

interface ContactOwnerModalProps {
  visible: boolean;
  property: Property;
  onClose: () => void;
}

export const ContactOwnerModal: React.FC<ContactOwnerModalProps> = ({
  visible,
  property,
  onClose,
}) => {
  const [formData, setFormData] = useState<ContactFormData>({
    name: '',
    email: '',
    phone: '',
    message: '',
  });

  const [errors, setErrors] = useState<Partial<ContactFormData>>({});

  const validateEmail = (email: string): boolean => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  };

  const validatePhone = (phone: string): boolean => {
    const phoneRegex = /^(\+62|62|0)[0-9]{9,12}$/;
    return phoneRegex.test(phone.replace(/[\s-]/g, ''));
  };

  const validateForm = (): boolean => {
    const newErrors: Partial<ContactFormData> = {};

    if (formData.name.trim().length < 3) {
      newErrors.name = 'Name must be at least 3 characters';
    }

    if (!validateEmail(formData.email)) {
      newErrors.email = 'Please enter a valid email address';
    }

    if (!validatePhone(formData.phone)) {
      newErrors.phone = 'Please enter a valid phone number (+62 or 08...)';
    }

    if (formData.message.trim().length < 10) {
      newErrors.message = 'Message must be at least 10 characters';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = () => {
    if (validateForm()) {
      console.log('Send message:', formData);
      Alert.alert(
        'Message Sent!',
        'The owner will contact you soon',
        [
          {
            text: 'OK',
            onPress: () => {
              setFormData({ name: '', email: '', phone: '', message: '' });
              setErrors({});
              onClose();
            },
          },
        ]
      );
    }
  };

  const handleWhatsApp = () => {
    console.log('Open WhatsApp:', property.owner.phone);
    Alert.alert('WhatsApp', `Opening WhatsApp to ${property.owner.phone}`);
  };

  const handleCall = () => {
    console.log('Call:', property.owner.phone);
    Alert.alert('Call', `Calling ${property.owner.phone}`);
  };

  const handleEmail = () => {
    console.log('Email:', property.owner.email);
    Alert.alert('Email', `Opening email to ${property.owner.email}`);
  };

  const getInitials = (name: string): string => {
    return name
      .split(' ')
      .map(word => word[0])
      .join('')
      .toUpperCase()
      .slice(0, 2);
  };

  const isFormValid =
    formData.name.trim().length >= 3 &&
    validateEmail(formData.email) &&
    validatePhone(formData.phone) &&
    formData.message.trim().length >= 10;

  return (
    <Modal
      visible={visible}
      transparent
      animationType="slide"
      onRequestClose={onClose}
    >
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : undefined}
        style={styles.container}
      >
        <Pressable style={styles.backdrop} onPress={onClose}>
          <Pressable style={styles.modalContent} onPress={(e) => e.stopPropagation()}>
            <SafeAreaView edges={['top']}>
              {/* Close Button */}
              <TouchableOpacity style={styles.closeButton} onPress={onClose}>
                <Ionicons name="close" size={28} color={Colors.text.primary} />
              </TouchableOpacity>

              <ScrollView
                showsVerticalScrollIndicator={false}
                keyboardShouldPersistTaps="handled"
                contentContainerStyle={styles.scrollContent}
              >
                {/* Owner Header */}
                <View style={styles.header}>
                  <View style={styles.avatarContainer}>
                    {property.owner.avatar ? (
                      <Text>Image</Text>
                    ) : (
                      <Text style={styles.avatarInitials}>
                        {getInitials(property.owner.name)}
                      </Text>
                    )}
                  </View>
                  <View style={styles.ownerInfo}>
                    <View style={styles.nameRow}>
                      <Text style={styles.ownerName}>{property.owner.name}</Text>
                      {property.owner.verified && (
                        <View style={styles.verifiedBadge}>
                          <Ionicons name="checkmark-circle" size={20} color="white" />
                        </View>
                      )}
                    </View>
                    <Text style={styles.responseTime}>
                      Usually responds {property.owner.responseTime.toLowerCase()}
                    </Text>
                  </View>
                </View>

                {/* Quick Actions */}
                <View style={styles.section}>
                  <Text style={styles.sectionTitle}>Quick Actions</Text>
                  <ContactMethodButton
                    icon="logo-whatsapp"
                    label="WhatsApp"
                    subtitle={property.owner.phone}
                    onPress={handleWhatsApp}
                    color="#25D366"
                  />
                  <ContactMethodButton
                    icon="call"
                    label="Call Owner"
                    subtitle={property.owner.phone}
                    onPress={handleCall}
                    color="#3B82F6"
                  />
                  <ContactMethodButton
                    icon="mail"
                    label="Send Email"
                    subtitle={property.owner.email}
                    onPress={handleEmail}
                    color="#F97316"
                  />
                </View>

                {/* Divider */}
                <View style={styles.divider}>
                  <View style={styles.dividerLine} />
                  <Text style={styles.dividerText}>Or send a message</Text>
                  <View style={styles.dividerLine} />
                </View>

                {/* Contact Form */}
                <View style={styles.form}>
                  <View style={styles.inputContainer}>
                    <TextInput
                      style={styles.input}
                      placeholder="Your name"
                      placeholderTextColor={Colors.text.disabled}
                      value={formData.name}
                      onChangeText={(text) => {
                        setFormData({...formData, name: text});
                        if (errors.name) setErrors({...errors, name: undefined});
                      }}
                    />
                    {errors.name && (
                      <Text style={styles.errorText}>{errors.name}</Text>
                    )}
                  </View>

                  <View style={styles.inputContainer}>
                    <TextInput
                      style={styles.input}
                      placeholder="Your email"
                      placeholderTextColor={Colors.text.disabled}
                      value={formData.email}
                      onChangeText={(text) => {
                        setFormData({...formData, email: text});
                        if (errors.email) setErrors({...errors, email: undefined});
                      }}
                      keyboardType="email-address"
                      autoCapitalize="none"
                    />
                    {errors.email && (
                      <Text style={styles.errorText}>{errors.email}</Text>
                    )}
                  </View>

                  <View style={styles.inputContainer}>
                    <TextInput
                      style={styles.input}
                      placeholder="Your phone"
                      placeholderTextColor={Colors.text.disabled}
                      value={formData.phone}
                      onChangeText={(text) => {
                        setFormData({...formData, phone: text});
                        if (errors.phone) setErrors({...errors, phone: undefined});
                      }}
                      keyboardType="phone-pad"
                    />
                    {errors.phone && (
                      <Text style={styles.errorText}>{errors.phone}</Text>
                    )}
                  </View>

                  <View style={styles.inputContainer}>
                    <TextInput
                      style={[styles.input, styles.messageInput]}
                      placeholder="I'm interested in this property..."
                      placeholderTextColor={Colors.text.disabled}
                      value={formData.message}
                      onChangeText={(text) => {
                        setFormData({...formData, message: text});
                        if (errors.message) setErrors({...errors, message: undefined});
                      }}
                      multiline
                      numberOfLines={4}
                      textAlignVertical="top"
                    />
                    {errors.message && (
                      <Text style={styles.errorText}>{errors.message}</Text>
                    )}
                  </View>

                  <TouchableOpacity
                    style={[styles.submitButton, !isFormValid && styles.submitButtonDisabled]}
                    onPress={handleSubmit}
                    disabled={!isFormValid}
                    activeOpacity={0.8}
                  >
                    <Text style={styles.submitButtonText}>Send Message</Text>
                  </TouchableOpacity>
                </View>
              </ScrollView>
            </SafeAreaView>
          </Pressable>
        </Pressable>
      </KeyboardAvoidingView>
    </Modal>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  backdrop: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'flex-end',
  },
  modalContent: {
    backgroundColor: Colors.white,
    borderTopLeftRadius: 24,
    borderTopRightRadius: 24,
    maxHeight: '85%',
    paddingBottom: 20,
  },
  closeButton: {
    position: 'absolute',
    top: 16,
    right: 16,
    zIndex: 10,
    width: 40,
    height: 40,
    justifyContent: 'center',
    alignItems: 'center',
  },
  scrollContent: {
    paddingHorizontal: 24,
    paddingTop: 24,
    paddingBottom: 40,
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 24,
  },
  avatarContainer: {
    width: 60,
    height: 60,
    borderRadius: 30,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 16,
  },
  avatarInitials: {
    fontSize: 22,
    fontWeight: Fonts.weight.bold,
    color: Colors.white,
  },
  ownerInfo: {
    flex: 1,
  },
  nameRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
    marginBottom: 4,
  },
  ownerName: {
    fontSize: 20,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
  },
  verifiedBadge: {
    width: 20,
    height: 20,
    borderRadius: 10,
    backgroundColor: '#3B82F6',
    justifyContent: 'center',
    alignItems: 'center',
  },
  responseTime: {
    fontSize: 14,
    color: Colors.text.secondary,
  },
  section: {
    marginBottom: 24,
  },
  sectionTitle: {
    fontSize: 16,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.text.primary,
    marginBottom: 12,
  },
  divider: {
    flexDirection: 'row',
    alignItems: 'center',
    marginVertical: 24,
  },
  dividerLine: {
    flex: 1,
    height: 1,
    backgroundColor: Colors.border,
  },
  dividerText: {
    fontSize: 14,
    color: Colors.text.secondary,
    marginHorizontal: 16,
  },
  form: {
    gap: 16,
  },
  inputContainer: {
    marginBottom: 0,
  },
  input: {
    backgroundColor: Colors.surface,
    borderRadius: 12,
    paddingHorizontal: 16,
    paddingVertical: 12,
    fontSize: 16,
    color: Colors.text.primary,
    height: 48,
    borderWidth: 1,
    borderColor: Colors.border,
  },
  messageInput: {
    height: 100,
    paddingTop: 12,
  },
  errorText: {
    fontSize: 12,
    color: '#EF4444',
    marginTop: 4,
    marginLeft: 4,
  },
  submitButton: {
    backgroundColor: Colors.primary,
    height: 50,
    borderRadius: 12,
    justifyContent: 'center',
    alignItems: 'center',
    marginTop: 8,
  },
  submitButtonDisabled: {
    backgroundColor: Colors.gray[300],
  },
  submitButtonText: {
    fontSize: 16,
    fontWeight: Fonts.weight.bold,
    color: Colors.white,
  },
});


====================================================
FILE: components/EmptyState.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, TouchableOpacity } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface EmptyStateProps {
  icon: keyof typeof Ionicons.glyphMap;
  title: string;
  message: string;
  actionLabel?: string;
  onAction?: () => void;
}

export const EmptyState: React.FC<EmptyStateProps> = ({
  icon,
  title,
  message,
  actionLabel,
  onAction,
}) => {
  return (
    <View style={styles.container}>
      <Ionicons name={icon} size={64} color={Colors.text.disabled} />
      <Text style={styles.title}>{title}</Text>
      <Text style={styles.message}>{message}</Text>
      {actionLabel && onAction && (
        <TouchableOpacity
          style={styles.actionButton}
          onPress={onAction}
          activeOpacity={0.7}
        >
          <Text style={styles.actionLabel}>{actionLabel}</Text>
        </TouchableOpacity>
      )}
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: 60,
    paddingHorizontal: 32,
  },
  title: {
    fontSize: 20,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginTop: 16,
    textAlign: 'center',
  },
  message: {
    fontSize: 14,
    color: Colors.text.secondary,
    marginTop: 8,
    textAlign: 'center',
    lineHeight: 20,
  },
  actionButton: {
    marginTop: 24,
    backgroundColor: Colors.primary,
    paddingHorizontal: 24,
    paddingVertical: 12,
    borderRadius: 8,
  },
  actionLabel: {
    color: Colors.white,
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.semiBold,
  },
});


====================================================
FILE: components/FilterButton.tsx
====================================================

import React from 'react';
import { Text, StyleSheet, TouchableOpacity } from 'react-native';
import { Colors, Fonts } from '../constants';

interface FilterButtonProps {
  label: string;
  isActive: boolean;
  onPress: () => void;
}

export const FilterButton: React.FC<FilterButtonProps> = ({
  label,
  isActive,
  onPress,
}) => {
  return (
    <TouchableOpacity
      style={[styles.button, isActive && styles.activeButton]}
      onPress={onPress}
      activeOpacity={0.7}
    >
      <Text style={[styles.label, isActive && styles.activeLabel]}>
        {label}
      </Text>
    </TouchableOpacity>
  );
};

const styles = StyleSheet.create({
  button: {
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
    backgroundColor: Colors.gray[100],
    marginRight: 8,
  },
  activeButton: {
    backgroundColor: Colors.primary,
  },
  label: {
    fontSize: Fonts.size.sm,
    fontWeight: Fonts.weight.medium,
    color: Colors.text.primary,
  },
  activeLabel: {
    color: Colors.white,
  },
});


====================================================
FILE: components/FilterChip.tsx
====================================================

import React from 'react';
import { TouchableOpacity, Text, StyleSheet, View } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors } from '../constants/colors';

interface FilterChipProps {
  label: string;
  isActive: boolean | null;
  onPress: () => void;
  icon?: keyof typeof Ionicons.glyphMap;
}

export const FilterChip: React.FC<FilterChipProps> = ({
  label,
  isActive,
  onPress,
  icon,
}) => {
  const getChipStyle = () => {
    if (isActive === true) {
      return {
        container: styles.activeContainer,
        text: styles.activeText,
        iconColor: '#10B981',
        statusIcon: 'checkmark-circle' as keyof typeof Ionicons.glyphMap,
      };
    } else if (isActive === false) {
      return {
        container: styles.inactiveContainer,
        text: styles.inactiveText,
        iconColor: '#EF4444',
        statusIcon: 'close-circle' as keyof typeof Ionicons.glyphMap,
      };
    } else {
      return {
        container: styles.neutralContainer,
        text: styles.neutralText,
        iconColor: '#9CA3AF',
        statusIcon: null,
      };
    }
  };

  const chipStyle = getChipStyle();

  return (
    <TouchableOpacity
      style={[styles.container, chipStyle.container]}
      onPress={onPress}
      activeOpacity={0.7}
    >
      <View style={styles.content}>
        {icon && (
          <Ionicons name={icon} size={16} color={chipStyle.iconColor} />
        )}
        <Text style={[styles.label, chipStyle.text]}>{label}</Text>
        {chipStyle.statusIcon && (
          <Ionicons name={chipStyle.statusIcon} size={16} color={chipStyle.iconColor} />
        )}
      </View>
    </TouchableOpacity>
  );
};

const styles = StyleSheet.create({
  container: {
    height: 32,
    paddingHorizontal: 12,
    borderRadius: 16,
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 1,
  },
  content: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
  },
  label: {
    fontSize: 13,
    fontWeight: '500',
  },
  // Neutral state (null)
  neutralContainer: {
    backgroundColor: '#F3F4F6',
    borderColor: '#E5E7EB',
  },
  neutralText: {
    color: '#6B7280',
  },
  // Active state (true - green)
  activeContainer: {
    backgroundColor: '#D1FAE5',
    borderColor: '#10B981',
  },
  activeText: {
    color: '#059669',
  },
  // Inactive state (false - red)
  inactiveContainer: {
    backgroundColor: '#FEE2E2',
    borderColor: '#EF4444',
  },
  inactiveText: {
    color: '#DC2626',
  },
});


====================================================
FILE: components/ImageCarousel.tsx
====================================================

import React, { useState, useRef } from 'react';
import {
  View,
  FlatList,
  Image,
  TouchableOpacity,
  StyleSheet,
  Dimensions,
  ActivityIndicator,
  NativeSyntheticEvent,
  NativeScrollEvent,
} from 'react-native';
import { Text } from 'react-native';
import { Colors } from '../constants';

const { width: SCREEN_WIDTH } = Dimensions.get('window');
const IMAGE_HEIGHT = 350;

interface ImageCarouselProps {
  images: string[];
  onImagePress: (index: number) => void;
  currentIndex?: number;
}

export const ImageCarousel: React.FC<ImageCarouselProps> = ({
  images,
  onImagePress,
  currentIndex = 0,
}) => {
  const [activeIndex, setActiveIndex] = useState(currentIndex);
  const [imageLoading, setImageLoading] = useState<{ [key: number]: boolean }>({});
  const [imageError, setImageError] = useState<{ [key: number]: boolean }>({});
  const flatListRef = useRef<FlatList>(null);

  const handleScroll = (event: NativeSyntheticEvent<NativeScrollEvent>) => {
    const contentOffsetX = event.nativeEvent.contentOffset.x;
    const index = Math.round(contentOffsetX / SCREEN_WIDTH);
    setActiveIndex(index);
  };

  const renderImage = ({ item, index }: { item: string; index: number }) => {
    const isLoading = imageLoading[index];
    const hasError = imageError[index];

    return (
      <TouchableOpacity
        activeOpacity={0.9}
        onPress={() => onImagePress(index)}
        style={styles.imageWrapper}
      >
        {!hasError ? (
          <>
            <Image
              source={{ uri: item }}
              style={styles.image}
              resizeMode="cover"
              onLoadStart={() => {
                setImageLoading(prev => ({ ...prev, [index]: true }));
              }}
              onLoadEnd={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
              }}
              onError={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
                setImageError(prev => ({ ...prev, [index]: true }));
              }}
            />
            {isLoading && (
              <View style={styles.loadingContainer}>
                <ActivityIndicator size="large" color={Colors.primary} />
              </View>
            )}
          </>
        ) : (
          <View style={styles.errorContainer}>
            <Text style={styles.errorText}>Image unavailable</Text>
          </View>
        )}
      </TouchableOpacity>
    );
  };

  return (
    <View style={styles.container}>
      <FlatList
        ref={flatListRef}
        data={images}
        renderItem={renderImage}
        keyExtractor={(item, index) => `image-${index}`}
        horizontal
        pagingEnabled
        showsHorizontalScrollIndicator={false}
        onScroll={handleScroll}
        scrollEventThrottle={16}
        snapToAlignment="center"
        decelerationRate="fast"
      />

      {/* Image Counter */}
      <View style={styles.counterContainer}>
        <Text style={styles.counterText}>
          {activeIndex + 1}/{images.length}
        </Text>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    height: IMAGE_HEIGHT,
    backgroundColor: Colors.surface,
  },
  imageWrapper: {
    width: SCREEN_WIDTH,
    height: IMAGE_HEIGHT,
  },
  image: {
    width: '100%',
    height: '100%',
  },
  loadingContainer: {
    ...StyleSheet.absoluteFillObject,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.surface,
  },
  errorContainer: {
    width: '100%',
    height: '100%',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.gray[100],
  },
  errorText: {
    fontSize: 14,
    color: Colors.text.secondary,
  },
  counterContainer: {
    position: 'absolute',
    bottom: 16,
    right: 16,
    backgroundColor: 'rgba(0, 0, 0, 0.6)',
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 16,
  },
  counterText: {
    color: 'white',
    fontSize: 14,
    fontWeight: '600',
  },
});


====================================================
FILE: components/ImageThumbnailGrid.tsx
====================================================

import React, { useState } from 'react';
import {
  View,
  Image,
  TouchableOpacity,
  StyleSheet,
  ScrollView,
  ActivityIndicator,
} from 'react-native';
import { Colors } from '../constants';

const THUMBNAIL_SIZE = 80;

interface ImageThumbnailGridProps {
  images: string[];
  onThumbnailPress: (index: number) => void;
  selectedIndex?: number;
}

export const ImageThumbnailGrid: React.FC<ImageThumbnailGridProps> = ({
  images,
  onThumbnailPress,
  selectedIndex = 0,
}) => {
  const [imageLoading, setImageLoading] = useState<{ [key: number]: boolean }>({});
  const [imageError, setImageError] = useState<{ [key: number]: boolean }>({});

  const renderThumbnail = (imageUrl: string, index: number) => {
    const isSelected = index === selectedIndex;
    const isLoading = imageLoading[index];
    const hasError = imageError[index];

    return (
      <TouchableOpacity
        key={index}
        style={[
          styles.thumbnailContainer,
          isSelected && styles.thumbnailSelected,
        ]}
        onPress={() => onThumbnailPress(index)}
        activeOpacity={0.7}
      >
        {!hasError ? (
          <>
            <Image
              source={{ uri: imageUrl }}
              style={styles.thumbnail}
              resizeMode="cover"
              onLoadStart={() => {
                setImageLoading(prev => ({ ...prev, [index]: true }));
              }}
              onLoadEnd={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
              }}
              onError={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
                setImageError(prev => ({ ...prev, [index]: true }));
              }}
            />
            {isLoading && (
              <View style={styles.loadingContainer}>
                <ActivityIndicator size="small" color={Colors.primary} />
              </View>
            )}
          </>
        ) : (
          <View style={styles.errorContainer} />
        )}
      </TouchableOpacity>
    );
  };

  return (
    <ScrollView
      horizontal
      showsHorizontalScrollIndicator={false}
      style={styles.container}
      contentContainerStyle={styles.contentContainer}
    >
      {images.map((image, index) => renderThumbnail(image, index))}
    </ScrollView>
  );
};

const styles = StyleSheet.create({
  container: {
    flexGrow: 0,
  },
  contentContainer: {
    paddingHorizontal: 16,
    paddingVertical: 12,
    gap: 8,
  },
  thumbnailContainer: {
    width: THUMBNAIL_SIZE,
    height: THUMBNAIL_SIZE,
    borderRadius: 8,
    overflow: 'hidden',
    borderWidth: 2,
    borderColor: Colors.gray[300],
    marginRight: 8,
  },
  thumbnailSelected: {
    borderColor: Colors.primary,
    borderWidth: 3,
  },
  thumbnail: {
    width: '100%',
    height: '100%',
  },
  loadingContainer: {
    ...StyleSheet.absoluteFillObject,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.surface,
  },
  errorContainer: {
    width: '100%',
    height: '100%',
    backgroundColor: Colors.gray[100],
  },
});


====================================================
FILE: components/ImageViewerModal.tsx
====================================================

import React, { useState, useRef, useEffect } from 'react';
import {
  Modal,
  View,
  Image,
  TouchableOpacity,
  StyleSheet,
  Dimensions,
  FlatList,
  ActivityIndicator,
  StatusBar,
  NativeSyntheticEvent,
  NativeScrollEvent,
} from 'react-native';
import { Text } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';

const { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');

interface ImageViewerModalProps {
  visible: boolean;
  images: string[];
  initialIndex: number;
  onClose: () => void;
}

export const ImageViewerModal: React.FC<ImageViewerModalProps> = ({
  visible,
  images,
  initialIndex,
  onClose,
}) => {
  const [currentIndex, setCurrentIndex] = useState(initialIndex);
  const [imageLoading, setImageLoading] = useState<{ [key: number]: boolean }>({});
  const [imageError, setImageError] = useState<{ [key: number]: boolean }>({});
  const flatListRef = useRef<FlatList>(null);

  useEffect(() => {
    if (visible && flatListRef.current) {
      // Scroll to initial index when modal opens
      setTimeout(() => {
        flatListRef.current?.scrollToIndex({
          index: initialIndex,
          animated: false,
        });
      }, 100);
      setCurrentIndex(initialIndex);
    }
  }, [visible, initialIndex]);

  const handleScroll = (event: NativeSyntheticEvent<NativeScrollEvent>) => {
    const contentOffsetX = event.nativeEvent.contentOffset.x;
    const index = Math.round(contentOffsetX / SCREEN_WIDTH);
    setCurrentIndex(index);
  };

  const handleShare = () => {
    console.log('Share image:', images[currentIndex]);
  };

  const renderImage = ({ item, index }: { item: string; index: number }) => {
    const isLoading = imageLoading[index];
    const hasError = imageError[index];

    return (
      <View style={styles.imageContainer}>
        {!hasError ? (
          <>
            <Image
              source={{ uri: item }}
              style={styles.image}
              resizeMode="contain"
              onLoadStart={() => {
                setImageLoading(prev => ({ ...prev, [index]: true }));
              }}
              onLoadEnd={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
              }}
              onError={() => {
                setImageLoading(prev => ({ ...prev, [index]: false }));
                setImageError(prev => ({ ...prev, [index]: true }));
              }}
            />
            {isLoading && (
              <View style={styles.loadingContainer}>
                <ActivityIndicator size="large" color="white" />
              </View>
            )}
          </>
        ) : (
          <View style={styles.errorContainer}>
            <Ionicons name="image-outline" size={60} color="white" />
            <Text style={styles.errorText}>Image unavailable</Text>
          </View>
        )}
      </View>
    );
  };

  return (
    <Modal
      visible={visible}
      transparent
      animationType="fade"
      onRequestClose={onClose}
      statusBarTranslucent
    >
      <View style={styles.container}>
        <StatusBar hidden />

        {/* Header */}
        <SafeAreaView edges={['top']} style={styles.headerContainer}>
          <View style={styles.header}>
            <Text style={styles.counterText}>
              {currentIndex + 1} of {images.length}
            </Text>
            <View style={styles.headerButtons}>
              <TouchableOpacity
                style={styles.iconButton}
                onPress={handleShare}
                activeOpacity={0.7}
              >
                <Ionicons name="share-social-outline" size={24} color="white" />
              </TouchableOpacity>
              <TouchableOpacity
                style={styles.iconButton}
                onPress={onClose}
                activeOpacity={0.7}
              >
                <Ionicons name="close" size={28} color="white" />
              </TouchableOpacity>
            </View>
          </View>
        </SafeAreaView>

        {/* Image Carousel */}
        <FlatList
          ref={flatListRef}
          data={images}
          renderItem={renderImage}
          keyExtractor={(item, index) => `fullscreen-image-${index}`}
          horizontal
          pagingEnabled
          showsHorizontalScrollIndicator={false}
          onScroll={handleScroll}
          scrollEventThrottle={16}
          snapToAlignment="center"
          decelerationRate="fast"
          onScrollToIndexFailed={(info) => {
            const wait = new Promise(resolve => setTimeout(resolve, 500));
            wait.then(() => {
              flatListRef.current?.scrollToIndex({ index: info.index, animated: false });
            });
          }}
        />
      </View>
    </Modal>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'black',
  },
  headerContainer: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    zIndex: 10,
    backgroundColor: 'rgba(0, 0, 0, 0.3)',
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: 16,
    paddingVertical: 12,
  },
  counterText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
  headerButtons: {
    flexDirection: 'row',
    gap: 16,
  },
  iconButton: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(255, 255, 255, 0.2)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  imageContainer: {
    width: SCREEN_WIDTH,
    height: SCREEN_HEIGHT,
    justifyContent: 'center',
    alignItems: 'center',
  },
  image: {
    width: SCREEN_WIDTH,
    height: SCREEN_HEIGHT,
  },
  loadingContainer: {
    ...StyleSheet.absoluteFillObject,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: 'black',
  },
  errorContainer: {
    justifyContent: 'center',
    alignItems: 'center',
    gap: 12,
  },
  errorText: {
    color: 'white',
    fontSize: 16,
  },
});


====================================================
FILE: components/index.ts
====================================================

export { PropertyCard } from './PropertyCard';
export { SearchBar } from './SearchBar';
export { FilterButton } from './FilterButton';
export { LoadingSpinner } from './LoadingSpinner';
export { EmptyState } from './EmptyState';
export { SortModal } from './SortModal';
export { FilterChip } from './FilterChip';
export { ImageCarousel } from './ImageCarousel';
export { ImageThumbnailGrid } from './ImageThumbnailGrid';
export { ImageViewerModal } from './ImageViewerModal';
export { ContactMethodButton } from './ContactMethodButton';
export { ContactOwnerModal } from './ContactOwnerModal';
export { OwnerCard } from './OwnerCard';
export { MenuButton } from './MenuButton';
export { SettingItem } from './SettingItem';
export { ComparisonButton } from './ComparisonButton';
export { ComparisonRow } from './ComparisonRow';
export { MapPropertyMarker } from './MapPropertyMarker';
export { MapPropertyCard } from './MapPropertyCard';
export { MapControls } from './MapControls';
export { LocationPermissionPrompt } from './LocationPermissionPrompt';


====================================================
FILE: components/LoadingSpinner.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, ActivityIndicator } from 'react-native';
import { Colors, Fonts } from '../constants';

interface LoadingSpinnerProps {
  message?: string;
  fullScreen?: boolean;
}

export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
  message = 'Loading...',
  fullScreen = false,
}) => {
  return (
    <View style={[styles.container, fullScreen && styles.fullScreen]}>
      <ActivityIndicator size="large" color={Colors.primary} />
      <Text style={styles.message}>{message}</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    justifyContent: 'center',
    alignItems: 'center',
    padding: 32,
  },
  fullScreen: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    backgroundColor: Colors.white,
    zIndex: 999,
  },
  message: {
    marginTop: 16,
    fontSize: Fonts.size.md,
    color: Colors.text.secondary,
    fontWeight: Fonts.weight.medium,
  },
});


====================================================
FILE: components/LocationPermissionPrompt.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, TouchableOpacity, Modal } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { COLORS } from '../constants/colors';

interface LocationPermissionPromptProps {
  visible: boolean;
  onRequestPermission: () => void;
  onDismiss: () => void;
}

export const LocationPermissionPrompt: React.FC<LocationPermissionPromptProps> = ({
  visible,
  onRequestPermission,
  onDismiss,
}) => {
  return (
    <Modal
      visible={visible}
      transparent
      animationType="fade"
      onRequestClose={onDismiss}
    >
      <View style={styles.overlay}>
        <View style={styles.container}>
          <View style={styles.iconContainer}>
            <Ionicons name="location" size={48} color={COLORS.primary} />
          </View>

          <Text style={styles.title}>Izinkan Akses Lokasi</Text>

          <Text style={styles.description}>
            Aplikasi membutuhkan akses lokasi untuk menampilkan properti terdekat dan
            menghitung jarak dari posisi Anda.
          </Text>

          <View style={styles.features}>
            <View style={styles.feature}>
              <Ionicons name="checkmark-circle" size={20} color={COLORS.success} />
              <Text style={styles.featureText}>Temukan properti terdekat</Text>
            </View>
            <View style={styles.feature}>
              <Ionicons name="checkmark-circle" size={20} color={COLORS.success} />
              <Text style={styles.featureText}>Lihat jarak ke properti</Text>
            </View>
            <View style={styles.feature}>
              <Ionicons name="checkmark-circle" size={20} color={COLORS.success} />
              <Text style={styles.featureText}>Navigasi di peta</Text>
            </View>
          </View>

          <View style={styles.buttonContainer}>
            <TouchableOpacity
              style={[styles.button, styles.primaryButton]}
              onPress={onRequestPermission}
              activeOpacity={0.8}
            >
              <Text style={styles.primaryButtonText}>Izinkan Akses</Text>
            </TouchableOpacity>

            <TouchableOpacity
              style={[styles.button, styles.secondaryButton]}
              onPress={onDismiss}
              activeOpacity={0.8}
            >
              <Text style={styles.secondaryButtonText}>Nanti Saja</Text>
            </TouchableOpacity>
          </View>

          <Text style={styles.privacyNote}>
            Lokasi Anda tidak akan dibagikan kepada siapa pun
          </Text>
        </View>
      </View>
    </Modal>
  );
};

const styles = StyleSheet.create({
  overlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'center',
    alignItems: 'center',
    padding: 20,
  },
  container: {
    backgroundColor: COLORS.white,
    borderRadius: 20,
    padding: 24,
    width: '100%',
    maxWidth: 400,
    alignItems: 'center',
  },
  iconContainer: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: `${COLORS.primary}15`,
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: 20,
  },
  title: {
    fontSize: 22,
    fontWeight: 'bold',
    color: COLORS.text,
    marginBottom: 12,
    textAlign: 'center',
  },
  description: {
    fontSize: 15,
    color: COLORS.textLight,
    textAlign: 'center',
    lineHeight: 22,
    marginBottom: 24,
  },
  features: {
    width: '100%',
    gap: 12,
    marginBottom: 24,
  },
  feature: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
  },
  featureText: {
    fontSize: 14,
    color: COLORS.text,
    flex: 1,
  },
  buttonContainer: {
    width: '100%',
    gap: 12,
  },
  button: {
    width: '100%',
    paddingVertical: 14,
    borderRadius: 12,
    alignItems: 'center',
    justifyContent: 'center',
  },
  primaryButton: {
    backgroundColor: COLORS.primary,
  },
  primaryButtonText: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.white,
  },
  secondaryButton: {
    backgroundColor: 'transparent',
    borderWidth: 1,
    borderColor: COLORS.border,
  },
  secondaryButtonText: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.textLight,
  },
  privacyNote: {
    fontSize: 12,
    color: COLORS.textLight,
    textAlign: 'center',
    marginTop: 16,
  },
});


====================================================
FILE: components/MapControls.tsx
====================================================

import React from 'react';
import { View, StyleSheet, TouchableOpacity, Platform } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { COLORS } from '../constants/colors';

interface MapControlsProps {
  onZoomIn: () => void;
  onZoomOut: () => void;
  onMyLocation: () => void;
  onListView: () => void;
  hasLocationPermission: boolean;
}

export const MapControls: React.FC<MapControlsProps> = ({
  onZoomIn,
  onZoomOut,
  onMyLocation,
  onListView,
  hasLocationPermission,
}) => {
  return (
    <View style={styles.container}>
      {/* Zoom Controls */}
      <View style={styles.controlGroup}>
        <TouchableOpacity
          style={[styles.button, styles.buttonTop]}
          onPress={onZoomIn}
          activeOpacity={0.7}
        >
          <Ionicons name="add" size={24} color={COLORS.text} />
        </TouchableOpacity>
        <View style={styles.divider} />
        <TouchableOpacity
          style={[styles.button, styles.buttonBottom]}
          onPress={onZoomOut}
          activeOpacity={0.7}
        >
          <Ionicons name="remove" size={24} color={COLORS.text} />
        </TouchableOpacity>
      </View>

      {/* Location Control */}
      {hasLocationPermission && (
        <TouchableOpacity
          style={[styles.button, styles.singleButton, styles.locationButton]}
          onPress={onMyLocation}
          activeOpacity={0.7}
        >
          <Ionicons name="locate" size={24} color={COLORS.primary} />
        </TouchableOpacity>
      )}

      {/* List View Control */}
      <TouchableOpacity
        style={[styles.button, styles.singleButton, styles.listButton]}
        onPress={onListView}
        activeOpacity={0.7}
      >
        <Ionicons name="list" size={24} color={COLORS.text} />
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    position: 'absolute',
    right: 16,
    top: Platform.OS === 'ios' ? 60 : 16,
    alignItems: 'flex-end',
    gap: 12,
  },
  controlGroup: {
    backgroundColor: COLORS.white,
    borderRadius: 8,
    overflow: 'hidden',
    shadowColor: COLORS.text,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.15,
    shadowRadius: 4,
    elevation: 4,
  },
  button: {
    width: 48,
    height: 48,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: COLORS.white,
  },
  buttonTop: {
    borderTopLeftRadius: 8,
    borderTopRightRadius: 8,
  },
  buttonBottom: {
    borderBottomLeftRadius: 8,
    borderBottomRightRadius: 8,
  },
  singleButton: {
    borderRadius: 8,
    shadowColor: COLORS.text,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.15,
    shadowRadius: 4,
    elevation: 4,
  },
  divider: {
    height: 1,
    backgroundColor: COLORS.border,
  },
  locationButton: {
    backgroundColor: COLORS.white,
  },
  listButton: {
    backgroundColor: COLORS.white,
  },
});


====================================================
FILE: components/MapPropertyCard.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  Image,
  StyleSheet,
  TouchableOpacity,
  Dimensions,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Property } from '../types';
import { Colors } from '../constants/colors';
import { useLocation } from '../context/LocationContext';
import { calculateDistance, formatDistance } from '../utils/locationHelpers';

const { width } = Dimensions.get('window');
const CARD_WIDTH = width - 40;

interface MapPropertyCardProps {
  property: Property;
  onPress: () => void;
}

const formatPrice = (price: number): string => {
  return `Rp ${price.toLocaleString('id-ID')}`;
};

export const MapPropertyCard: React.FC<MapPropertyCardProps> = ({
  property,
  onPress,
}) => {
  const { userLocation } = useLocation();

  const distance = userLocation
    ? calculateDistance(
      userLocation.latitude,
      userLocation.longitude,
      property.latitude,
      property.longitude
    )
    : null;

  return (
    <TouchableOpacity
      style={styles.card}
      onPress={onPress}
      activeOpacity={0.9}
    >
      <Image
        source={{ uri: property.imageUrls[0] }}
        style={styles.image}
        resizeMode="cover"
      />

      {/* Badges */}
      <View style={styles.badgeContainer}>
        <View style={[styles.badge, styles.typeBadge]}>
          <Text style={styles.badgeText}>{property.type}</Text>
        </View>
        {property.isAvailable && (
          <View style={[styles.badge, styles.availableBadge]}>
            <Ionicons name="checkmark-circle" size={12} color={Colors.white} />
            <Text style={styles.badgeText}>Tersedia</Text>
          </View>
        )}
        {distance !== null && (
          <View style={[styles.badge, styles.distanceBadge]}>
            <Ionicons name="location" size={12} color={Colors.white} />
            <Text style={styles.badgeText}>{formatDistance(distance)}</Text>
          </View>
        )}
      </View>

      {/* Content */}
      <View style={styles.content}>
        <Text style={styles.title} numberOfLines={1}>
          {property.title}
        </Text>

        <View style={styles.locationRow}>
          <Ionicons name="location-outline" size={14} color={Colors.text.secondary} />
          <Text style={styles.location} numberOfLines={1}>
            {property.location}
          </Text>
        </View>

        <View style={styles.features}>
          <View style={styles.feature}>
            <Ionicons name="bed-outline" size={16} color={Colors.text.secondary} />
            <Text style={styles.featureText}>{property.bedrooms}</Text>
          </View>
          <View style={styles.feature}>
            <Ionicons name="water-outline" size={16} color={Colors.text.secondary} />
            <Text style={styles.featureText}>{property.bathrooms}</Text>
          </View>
          <View style={styles.feature}>
            <Ionicons name="expand-outline" size={16} color={Colors.text.secondary} />
            <Text style={styles.featureText}>{property.area} m</Text>
          </View>
        </View>

        <View style={styles.footer}>
          <View>
            <Text style={styles.price}>{formatPrice(property.price)}</Text>
            <Text style={styles.period}>per bulan</Text>
          </View>

          <TouchableOpacity style={styles.detailButton} onPress={onPress}>
            <Text style={styles.detailButtonText}>Lihat Detail</Text>
            <Ionicons name="chevron-forward" size={16} color={Colors.white} />
          </TouchableOpacity>
        </View>
      </View>
    </TouchableOpacity>
  );
};

const styles = StyleSheet.create({
  card: {
    width: CARD_WIDTH,
    backgroundColor: Colors.white,
    borderRadius: 16,
    overflow: 'hidden',
    shadowColor: Colors.text.primary,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 8,
    elevation: 5,
  },
  image: {
    width: '100%',
    height: 180,
    backgroundColor: Colors.background,
  },
  badgeContainer: {
    position: 'absolute',
    top: 12,
    left: 12,
    right: 12,
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
  },
  badge: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: 10,
    paddingVertical: 4,
    borderRadius: 12,
    gap: 4,
  },
  typeBadge: {
    backgroundColor: Colors.primary,
  },
  availableBadge: {
    backgroundColor: Colors.success,
  },
  distanceBadge: {
    backgroundColor: Colors.info,
  },
  badgeText: {
    fontSize: 11,
    fontWeight: '600',
    color: Colors.white,
  },
  content: {
    padding: 16,
  },
  title: {
    fontSize: 18,
    fontWeight: 'bold',
    color: Colors.text.primary,
    marginBottom: 8,
  },
  locationRow: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 12,
    gap: 4,
  },
  location: {
    fontSize: 14,
    color: Colors.text.secondary,
    flex: 1,
  },
  features: {
    flexDirection: 'row',
    marginBottom: 16,
    gap: 16,
  },
  feature: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
  },
  featureText: {
    fontSize: 14,
    color: Colors.text.secondary,
  },
  footer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  price: {
    fontSize: 20,
    fontWeight: 'bold',
    color: Colors.primary,
  },
  period: {
    fontSize: 12,
    color: Colors.text.secondary,
    marginTop: 2,
  },
  detailButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: Colors.primary,
    paddingHorizontal: 16,
    paddingVertical: 10,
    borderRadius: 8,
    gap: 4,
  },
  detailButtonText: {
    fontSize: 14,
    fontWeight: '600',
    color: Colors.white,
  },
});

====================================================
FILE: components/MapPropertyMarker.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet } from 'react-native';
import { Marker } from 'react-native-maps';
import { Property } from '../types';
import { COLORS } from '../constants/colors';

interface MapPropertyMarkerProps {
  property: Property;
  isSelected?: boolean;
  onPress: () => void;
}

export const MapPropertyMarker: React.FC<MapPropertyMarkerProps> = ({
  property,
  isSelected = false,
  onPress,
}) => {
  const formatPrice = (price: number): string => {
    if (price >= 1000000) {
      return `${(price / 1000000).toFixed(1)}jt`;
    }
    return `${(price / 1000).toFixed(0)}rb`;
  };

  return (
    <Marker
      coordinate={{
        latitude: property.latitude,
        longitude: property.longitude,
      }}
      onPress={onPress}
      tracksViewChanges={false} // Optimize performance
    >
      <View style={[styles.markerContainer, isSelected && styles.markerSelected]}>
        <View style={[styles.markerBubble, isSelected && styles.bubbleSelected]}>
          <Text style={[styles.markerText, isSelected && styles.textSelected]}>
            {formatPrice(property.price)}
          </Text>
        </View>
        <View style={[styles.markerArrow, isSelected && styles.arrowSelected]} />
      </View>
    </Marker>
  );
};

const styles = StyleSheet.create({
  markerContainer: {
    alignItems: 'center',
  },
  markerSelected: {
    zIndex: 1000,
  },
  markerBubble: {
    backgroundColor: COLORS.white,
    borderRadius: 16,
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderWidth: 2,
    borderColor: COLORS.primary,
    shadowColor: COLORS.text,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
  },
  bubbleSelected: {
    backgroundColor: COLORS.primary,
    borderColor: COLORS.primary,
    transform: [{ scale: 1.1 }],
  },
  markerText: {
    fontSize: 12,
    fontWeight: 'bold',
    color: COLORS.primary,
  },
  textSelected: {
    color: COLORS.white,
  },
  markerArrow: {
    width: 0,
    height: 0,
    backgroundColor: 'transparent',
    borderStyle: 'solid',
    borderLeftWidth: 6,
    borderRightWidth: 6,
    borderTopWidth: 8,
    borderLeftColor: 'transparent',
    borderRightColor: 'transparent',
    borderTopColor: COLORS.primary,
    marginTop: -1,
  },
  arrowSelected: {
    borderTopColor: COLORS.primary,
  },
});


====================================================
FILE: components/MenuButton.tsx
====================================================

import React from 'react';
import { TouchableOpacity, View, Text, StyleSheet } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface MenuButtonProps {
  icon: keyof typeof Ionicons.glyphMap;
  label: string;
  onPress: () => void;
  color?: string;
  showChevron?: boolean;
}

export const MenuButton: React.FC<MenuButtonProps> = ({
  icon,
  label,
  onPress,
  color = Colors.text,
  showChevron = true,
}) => {
  return (
    <TouchableOpacity
      style={styles.container}
      onPress={onPress}
      activeOpacity={0.7}
    >
      <View style={styles.leftContent}>
        <Ionicons name={icon} size={24} color={color} style={styles.icon} />
        <Text style={[styles.label, { color }]}>{label}</Text>
      </View>
      {showChevron && (
        <Ionicons
          name="chevron-forward"
          size={20}
          color={Colors.textSecondary}
        />
      )}
    </TouchableOpacity>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    backgroundColor: Colors.card,
    paddingVertical: 16,
    paddingHorizontal: 16,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  leftContent: {
    flexDirection: 'row',
    alignItems: 'center',
    flex: 1,
  },
  icon: {
    marginRight: 16,
  },
  label: {
    fontSize: 16,
    fontFamily: Fonts.medium,
  },
});


====================================================
FILE: components/OwnerCard.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  TouchableOpacity,
  StyleSheet,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Owner } from '../types';
import { Colors, Fonts } from '../constants';

interface OwnerCardProps {
  owner: Owner;
  onContactPress: () => void;
}

export const OwnerCard: React.FC<OwnerCardProps> = ({
  owner,
  onContactPress,
}) => {
  const getInitials = (name: string): string => {
    return name
      .split(' ')
      .map(word => word[0])
      .join('')
      .toUpperCase()
      .slice(0, 2);
  };

  return (
    <View style={styles.container}>
      <View style={styles.ownerInfo}>
        {/* Avatar */}
        <View style={styles.avatarContainer}>
          {owner.avatar ? (
            <Text>Image</Text>
          ) : (
            <Text style={styles.avatarInitials}>
              {getInitials(owner.name)}
            </Text>
          )}
        </View>

        {/* Owner Details */}
        <View style={styles.textContainer}>
          <View style={styles.nameRow}>
            <Text style={styles.ownerName} numberOfLines={1}>
              {owner.name}
            </Text>
            {owner.verified && (
              <View style={styles.verifiedBadge}>
                <Ionicons name="checkmark-circle" size={16} color="white" />
              </View>
            )}
          </View>
          <Text style={styles.responseTime} numberOfLines={1}>
            {owner.responseTime}
          </Text>
        </View>
      </View>

      {/* Contact Button */}
      <TouchableOpacity
        style={styles.contactButton}
        onPress={onContactPress}
        activeOpacity={0.7}
      >
        <Text style={styles.contactButtonText}>Contact</Text>
        <Ionicons name="chatbubble-outline" size={16} color={Colors.white} />
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    backgroundColor: Colors.surface,
    borderRadius: 12,
    padding: 12,
    height: 80,
    borderWidth: 1,
    borderColor: Colors.border,
  },
  ownerInfo: {
    flexDirection: 'row',
    alignItems: 'center',
    flex: 1,
    marginRight: 12,
  },
  avatarContainer: {
    width: 48,
    height: 48,
    borderRadius: 24,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  avatarInitials: {
    fontSize: 18,
    fontWeight: Fonts.weight.bold,
    color: Colors.white,
  },
  textContainer: {
    flex: 1,
  },
  nameRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
    marginBottom: 4,
  },
  ownerName: {
    fontSize: 16,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.text.primary,
    flex: 1,
  },
  verifiedBadge: {
    width: 16,
    height: 16,
    borderRadius: 8,
    backgroundColor: '#3B82F6',
    justifyContent: 'center',
    alignItems: 'center',
  },
  responseTime: {
    fontSize: 13,
    color: Colors.text.secondary,
  },
  contactButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: Colors.primary,
    paddingHorizontal: 16,
    paddingVertical: 10,
    borderRadius: 8,
    gap: 6,
  },
  contactButtonText: {
    fontSize: 14,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.white,
  },
});


====================================================
FILE: components/PropertyCard.tsx
====================================================

import React, { useEffect, useRef, useState } from 'react';
import {
  View,
  Text,
  Image,
  StyleSheet,
  TouchableOpacity,
  Animated,
  ActivityIndicator,
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { Ionicons } from '@expo/vector-icons';
import { Property } from '../types';
import { Colors, Fonts, Animations } from '../constants';
import { useFavorites } from '../context/FavoritesContext';
import { useComparison } from '../context/ComparisonContext';
import { useLocation } from '../context/LocationContext';
import { calculateDistance, formatDistance } from '../utils/locationHelpers';

interface PropertyCardProps {
  property: Property;
  onPress: () => void;
  index?: number;
}

export const PropertyCard: React.FC<PropertyCardProps> = ({
  property,
  onPress,
  index = 0,
}) => {
  const scaleAnim = useRef(new Animated.Value(1)).current;
  const fadeAnim = useRef(new Animated.Value(0)).current;
  const heartScaleAnim = useRef(new Animated.Value(1)).current;
  const [imageLoading, setImageLoading] = useState(true);
  const [imageError, setImageError] = useState(false);
  const { isFavorite, toggleFavorite } = useFavorites();
  const { isInComparison, addToComparison, removeFromComparison, canAddMore } =
    useComparison();
  const { userLocation } = useLocation();

  // Calculate distance from user location
  const distance = userLocation
    ? calculateDistance(
        userLocation.latitude,
        userLocation.longitude,
        property.latitude,
        property.longitude
      )
    : null;

  useEffect(() => {
    // Fade in animation with stagger
    Animated.timing(fadeAnim, {
      toValue: 1,
      duration: Animations.duration.normal,
      delay: index * 50, // Stagger animation
      useNativeDriver: true,
    }).start();
  }, []);

  const handlePressIn = () => {
    Animated.spring(scaleAnim, {
      toValue: Animations.scale.press,
      ...Animations.spring.default,
      useNativeDriver: true,
    }).start();
  };

  const handlePressOut = () => {
    Animated.spring(scaleAnim, {
      toValue: Animations.scale.active,
      ...Animations.spring.default,
      useNativeDriver: true,
    }).start();
  };

  const handleToggleFavorite = (e: any) => {
    e.stopPropagation();
    toggleFavorite(property.id);

    // Animate heart
    Animated.sequence([
      Animated.spring(heartScaleAnim, {
        toValue: 1.3,
        useNativeDriver: true,
      }),
      Animated.spring(heartScaleAnim, {
        toValue: 1,
        useNativeDriver: true,
      }),
    ]).start();
  };

  const handleToggleComparison = (e: any) => {
    e.stopPropagation();
    if (isInComparison(property.id)) {
      removeFromComparison(property.id);
    } else {
      addToComparison(property);
    }
  };

  const formatPrice = (price: number): string => {
    return `Rp ${price.toLocaleString('id-ID')}/mo`;
  };

  const visibleFeatures = property.features?.slice(0, 3) || [];
  const remainingFeaturesCount =
    (property.features?.length || 0) - visibleFeatures.length;
  const favorited = isFavorite(property.id);
  const hasMultipleImages = property.imageUrls && property.imageUrls.length > 1;
  const imageCount = property.imageUrls?.length || 0;

  return (
    <Animated.View
      style={[
        styles.container,
        {
          opacity: fadeAnim,
          transform: [{ scale: scaleAnim }],
        },
      ]}
    >
      <TouchableOpacity
        activeOpacity={0.9}
        onPress={onPress}
        onPressIn={handlePressIn}
        onPressOut={handlePressOut}
      >
        {/* Image Section */}
        <View style={styles.imageContainer}>
          {!imageError ? (
            <>
              <Image
                source={{ uri: property.imageUrls[0] }}
                style={styles.image}
                resizeMode="cover"
                onLoadStart={() => setImageLoading(true)}
                onLoadEnd={() => setImageLoading(false)}
                onError={() => {
                  setImageLoading(false);
                  setImageError(true);
                }}
              />
              {imageLoading && (
                <View style={styles.imageLoadingContainer}>
                  <ActivityIndicator size="small" color={Colors.primary} />
                </View>
              )}
            </>
          ) : (
            <View style={styles.imageErrorContainer}>
              <Ionicons
                name="image-outline"
                size={40}
                color={Colors.text.disabled}
              />
            </View>
          )}

          {/* Gradient Overlay */}
          <LinearGradient
            colors={['transparent', 'rgba(0,0,0,0.6)']}
            style={styles.gradientOverlay}
          />

          {/* Type Badge */}
          <View style={styles.typeBadge}>
            <Text style={styles.typeBadgeText}>
              {property.type.toUpperCase()}
            </Text>
          </View>

          {/* Availability Badge */}
          <View
            style={[
              styles.availabilityBadge,
              property.isAvailable
                ? styles.availableBadge
                : styles.rentedBadge,
            ]}
          >
            <Text style={styles.availabilityText}>
              {property.isAvailable ? 'AVAILABLE' : 'RENTED'}
            </Text>
          </View>

          {/* Distance Badge */}
          {distance !== null && (
            <View style={styles.distanceBadge}>
              <Ionicons name="location" size={12} color="white" />
              <Text style={styles.distanceBadgeText}>
                {formatDistance(distance)}
              </Text>
            </View>
          )}

          {/* Favorite Heart Button */}
          <TouchableOpacity
            style={styles.heartButton}
            onPress={handleToggleFavorite}
            activeOpacity={0.7}
          >
            <Animated.View style={{ transform: [{ scale: heartScaleAnim }] }}>
              <Ionicons
                name={favorited ? 'heart' : 'heart-outline'}
                size={24}
                color={favorited ? '#FF3B30' : 'white'}
              />
            </Animated.View>
          </TouchableOpacity>

          {/* Compare Button */}
          <TouchableOpacity
            style={styles.compareButton}
            onPress={handleToggleComparison}
            activeOpacity={0.7}
            disabled={!isInComparison(property.id) && !canAddMore()}
          >
            <Ionicons
              name={
                isInComparison(property.id)
                  ? 'checkmark-circle'
                  : 'git-compare-outline'
              }
              size={22}
              color={isInComparison(property.id) ? Colors.primary : 'white'}
            />
          </TouchableOpacity>

          {/* Gallery Indicator */}
          {hasMultipleImages && (
            <View style={styles.galleryIndicator}>
              <Ionicons name="images-outline" size={16} color="white" />
              <Text style={styles.galleryIndicatorText}>+{imageCount - 1}</Text>
            </View>
          )}

          {/* Title and Location on Gradient */}
          <View style={styles.imageTextContainer}>
            <Text style={styles.title} numberOfLines={1}>
              {property.title}
            </Text>
            <View style={styles.locationRow}>
              <Ionicons name="location-outline" size={14} color="white" />
              <Text style={styles.location} numberOfLines={1}>
                {property.location}
              </Text>
            </View>
          </View>
        </View>

        {/* Content Section */}
        <View style={styles.contentContainer}>
          {/* Price */}
          <Text style={styles.price}>{formatPrice(property.price)}</Text>

          {/* Details Row */}
          <View style={styles.detailsRow}>
            <View style={styles.detailItem}>
              <Ionicons
                name="bed-outline"
                size={16}
                color={Colors.text.secondary}
              />
              <Text style={styles.detailText}>{property.bedrooms}</Text>
            </View>

            <View style={styles.detailItem}>
              <Ionicons
                name="water-outline"
                size={16}
                color={Colors.text.secondary}
              />
              <Text style={styles.detailText}>{property.bathrooms}</Text>
            </View>

            <View style={styles.detailItem}>
              <Ionicons
                name="resize-outline"
                size={16}
                color={Colors.text.secondary}
              />
              <Text style={styles.detailText}>{property.area} m</Text>
            </View>
          </View>

          {/* Property Feature Badges */}
          <View style={styles.propertyBadgesRow}>
            {property.furnished && (
              <View style={styles.propertyBadge}>
                <Ionicons name="home" size={14} color={Colors.text.secondary} />
              </View>
            )}
            {property.petFriendly && (
              <View style={styles.propertyBadge}>
                <Ionicons name="paw" size={14} color={Colors.text.secondary} />
              </View>
            )}
            {property.hasParking && (
              <View style={styles.propertyBadge}>
                <Ionicons name="car" size={14} color={Colors.text.secondary} />
              </View>
            )}
          </View>

          {/* Features */}
          {visibleFeatures.length > 0 && (
            <View style={styles.featuresContainer}>
              {visibleFeatures.map((feature, index) => (
                <View key={index} style={styles.featureChip}>
                  <Text style={styles.featureText}>{feature}</Text>
                </View>
              ))}
              {remainingFeaturesCount > 0 && (
                <View style={styles.featureChip}>
                  <Text style={styles.featureText}>
                    +{remainingFeaturesCount} more
                  </Text>
                </View>
              )}
            </View>
          )}
        </View>
      </TouchableOpacity>
    </Animated.View>
  );
};

const styles = StyleSheet.create({
  container: {
    backgroundColor: Colors.white,
    borderRadius: 12,
    marginBottom: 16,
    marginHorizontal: 16,
    shadowColor: Colors.black,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 4,
  },
  imageContainer: {
    position: 'relative',
    height: 200,
    backgroundColor: Colors.surface,
  },
  image: {
    width: '100%',
    height: '100%',
    borderTopLeftRadius: 12,
    borderTopRightRadius: 12,
  },
  imageLoadingContainer: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.surface,
    borderTopLeftRadius: 12,
    borderTopRightRadius: 12,
  },
  imageErrorContainer: {
    width: '100%',
    height: '100%',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.gray[100],
    borderTopLeftRadius: 12,
    borderTopRightRadius: 12,
  },
  gradientOverlay: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: 100,
    borderTopLeftRadius: 12,
    borderTopRightRadius: 12,
  },
  typeBadge: {
    position: 'absolute',
    top: 12,
    left: 12,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    paddingHorizontal: 10,
    paddingVertical: 4,
    borderRadius: 12,
  },
  typeBadgeText: {
    color: Colors.white,
    fontSize: 10,
    fontWeight: Fonts.weight.bold,
    letterSpacing: 0.5,
  },
  availabilityBadge: {
    position: 'absolute',
    top: 12,
    right: 12,
    paddingHorizontal: 10,
    paddingVertical: 4,
    borderRadius: 12,
  },
  availableBadge: {
    backgroundColor: Colors.success,
  },
  rentedBadge: {
    backgroundColor: Colors.danger,
  },
  availabilityText: {
    color: Colors.white,
    fontSize: 10,
    fontWeight: Fonts.weight.bold,
    letterSpacing: 0.5,
  },
  distanceBadge: {
    position: 'absolute',
    top: 44,
    right: 12,
    paddingHorizontal: 8,
    paddingVertical: 4,
    borderRadius: 12,
    backgroundColor: 'rgba(0, 122, 255, 0.9)',
    flexDirection: 'row',
    alignItems: 'center',
    gap: 4,
  },
  distanceBadgeText: {
    color: Colors.white,
    fontSize: 10,
    fontWeight: Fonts.weight.bold,
  },
  heartButton: {
    position: 'absolute',
    top: 46,
    right: 12,
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  compareButton: {
    position: 'absolute',
    top: 92,
    right: 12,
    width: 36,
    height: 36,
    borderRadius: 18,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  galleryIndicator: {
    position: 'absolute',
    bottom: 52,
    left: 12,
    flexDirection: 'row',
    alignItems: 'center',
    gap: 4,
    backgroundColor: 'rgba(0, 0, 0, 0.6)',
    paddingHorizontal: 8,
    paddingVertical: 4,
    borderRadius: 12,
  },
  galleryIndicatorText: {
    color: 'white',
    fontSize: 12,
    fontWeight: '600',
  },
  imageTextContainer: {
    position: 'absolute',
    bottom: 12,
    left: 12,
    right: 12,
  },
  title: {
    color: Colors.white,
    fontSize: 18,
    fontWeight: Fonts.weight.bold,
    marginBottom: 4,
  },
  locationRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 4,
  },
  location: {
    color: Colors.white,
    fontSize: 14,
    flex: 1,
  },
  contentContainer: {
    padding: 16,
  },
  price: {
    fontSize: 20,
    fontWeight: Fonts.weight.bold,
    color: Colors.primary,
    marginBottom: 12,
  },
  detailsRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 16,
    marginBottom: 12,
  },
  detailItem: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 4,
  },
  detailText: {
    fontSize: 14,
    color: Colors.text.secondary,
    fontWeight: Fonts.weight.medium,
  },
  propertyBadgesRow: {
    flexDirection: 'row',
    gap: 8,
    marginBottom: 12,
  },
  propertyBadge: {
    width: 28,
    height: 28,
    borderRadius: 14,
    backgroundColor: Colors.gray[100],
    justifyContent: 'center',
    alignItems: 'center',
  },
  featuresContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
  },
  featureChip: {
    backgroundColor: Colors.gray[100],
    paddingHorizontal: 10,
    paddingVertical: 6,
    borderRadius: 12,
  },
  featureText: {
    fontSize: 12,
    color: Colors.text.secondary,
    fontWeight: Fonts.weight.medium,
  },
});


====================================================
FILE: components/SearchBar.tsx
====================================================

import React, { useEffect, useState } from 'react';
import {
  View,
  TextInput,
  StyleSheet,
  TouchableOpacity,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface SearchBarProps {
  value: string;
  onChangeText: (text: string) => void;
  placeholder?: string;
}

export const SearchBar: React.FC<SearchBarProps> = ({
  value,
  onChangeText,
  placeholder = 'Search by location or title...',
}) => {
  const [inputValue, setInputValue] = useState(value);

  useEffect(() => {
    setInputValue(value);
  }, [value]);

  useEffect(() => {
    const timeout = setTimeout(() => {
      onChangeText(inputValue);
    }, 300);

    return () => clearTimeout(timeout);
  }, [inputValue]);

  const handleClear = () => {
    setInputValue('');
    onChangeText('');
  };

  return (
    <View style={styles.container}>
      <Ionicons
        name="search-outline"
        size={20}
        color={Colors.text.secondary}
        style={styles.searchIcon}
      />
      <TextInput
        style={styles.input}
        value={inputValue}
        onChangeText={setInputValue}
        placeholder={placeholder}
        placeholderTextColor={Colors.text.disabled}
      />
      {inputValue.length > 0 && (
        <TouchableOpacity onPress={handleClear} style={styles.clearButton}>
          <Ionicons
            name="close-circle"
            size={20}
            color={Colors.text.secondary}
          />
        </TouchableOpacity>
      )}
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: Colors.surface,
    borderRadius: 12,
    paddingHorizontal: 12,
    height: 48,
  },
  searchIcon: {
    marginRight: 8,
  },
  input: {
    flex: 1,
    fontSize: Fonts.size.md,
    color: Colors.text.primary,
    padding: 0,
  },
  clearButton: {
    padding: 4,
  },
});


====================================================
FILE: components/SettingItem.tsx
====================================================

import React from 'react';
import { TouchableOpacity, View, Text, StyleSheet } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

interface SettingItemProps {
  icon: keyof typeof Ionicons.glyphMap;
  label: string;
  value?: string;
  onPress?: () => void;
  rightComponent?: React.ReactNode;
}

export const SettingItem: React.FC<SettingItemProps> = ({
  icon,
  label,
  value,
  onPress,
  rightComponent,
}) => {
  const isInteractive = onPress !== undefined;

  const content = (
    <>
      <View style={styles.leftContent}>
        <Ionicons name={icon} size={22} color={Colors.primary} style={styles.icon} />
        <Text style={styles.label}>{label}</Text>
      </View>
      <View style={styles.rightContent}>
        {rightComponent || (
          <>
            {value && <Text style={styles.value}>{value}</Text>}
            {isInteractive && (
              <Ionicons
                name="chevron-forward"
                size={20}
                color={Colors.textSecondary}
              />
            )}
          </>
        )}
      </View>
    </>
  );

  if (isInteractive) {
    return (
      <TouchableOpacity
        style={styles.container}
        onPress={onPress}
        activeOpacity={0.7}
      >
        {content}
      </TouchableOpacity>
    );
  }

  return <View style={styles.container}>{content}</View>;
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    backgroundColor: Colors.card,
    paddingVertical: 14,
    paddingHorizontal: 16,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  leftContent: {
    flexDirection: 'row',
    alignItems: 'center',
    flex: 1,
  },
  icon: {
    marginRight: 12,
  },
  label: {
    fontSize: 16,
    fontFamily: Fonts.medium,
    color: Colors.text,
  },
  rightContent: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  value: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginRight: 8,
  },
});


====================================================
FILE: components/SortModal.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  Modal,
  TouchableOpacity,
  StyleSheet,
  Pressable,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { SortOption } from '../types';
import { Colors } from '../constants/colors';

interface SortModalProps {
  visible: boolean;
  currentSort: SortOption;
  onSelectSort: (sort: SortOption) => void;
  onClose: () => void;
}

const SORT_OPTIONS: { value: SortOption; label: string; icon: keyof typeof Ionicons.glyphMap }[] = [
  { value: 'newest', label: 'Terbaru', icon: 'time-outline' },
  { value: 'price-low', label: 'Harga: Terendah', icon: 'arrow-up-outline' },
  { value: 'price-high', label: 'Harga: Tertinggi', icon: 'arrow-down-outline' },
  { value: 'area-small', label: 'Luas: Terkecil', icon: 'resize-outline' },
  { value: 'area-large', label: 'Luas: Terbesar', icon: 'expand-outline' },
  { value: 'distance', label: 'Jarak: Terdekat', icon: 'location-outline' },
];

export const SortModal: React.FC<SortModalProps> = ({
  visible,
  currentSort,
  onSelectSort,
  onClose,
}) => {
  const handleSelectSort = (sort: SortOption) => {
    onSelectSort(sort);
    onClose();
  };

  return (
    <Modal
      visible={visible}
      transparent
      animationType="slide"
      onRequestClose={onClose}
    >
      <Pressable style={styles.backdrop} onPress={onClose}>
        <View style={styles.container}>
          <View style={styles.header}>
            <Text style={styles.title}>Urutkan Berdasarkan</Text>
            <TouchableOpacity onPress={onClose} hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}>
              <Ionicons name="close" size={24} color={Colors.text.primary} />
            </TouchableOpacity>
          </View>

          <View style={styles.optionsContainer}>
            {SORT_OPTIONS.map((option) => {
              const isSelected = currentSort === option.value;
              return (
                <TouchableOpacity
                  key={option.value}
                  style={[styles.option, isSelected && styles.optionSelected]}
                  onPress={() => handleSelectSort(option.value)}
                  activeOpacity={0.7}
                >
                  <View style={styles.optionLeft}>
                    <Ionicons
                      name={option.icon}
                      size={20}
                      color={isSelected ? Colors.primary : Colors.text.secondary}
                    />
                    <Text style={[styles.optionText, isSelected && styles.optionTextSelected]}>
                      {option.label}
                    </Text>
                  </View>
                  {isSelected && (
                    <Ionicons name="checkmark-circle" size={24} color={Colors.primary} />
                  )}
                </TouchableOpacity>
              );
            })}
          </View>

          <TouchableOpacity
            style={styles.applyButton}
            onPress={onClose}
            activeOpacity={0.8}
          >
            <Text style={styles.applyButtonText}>Apply</Text>
          </TouchableOpacity>
        </View>
      </Pressable>
    </Modal>
  );
};

const styles = StyleSheet.create({
  backdrop: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'flex-end',
  },
  container: {
    backgroundColor: 'white',
    borderTopLeftRadius: 24,
    borderTopRightRadius: 24,
    paddingTop: 20,
    paddingBottom: 40,
    paddingHorizontal: 20,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 24,
  },
  title: {
    fontSize: 20,
    fontWeight: '700',
    color: Colors.text.primary,
  },
  optionsContainer: {
    marginBottom: 24,
  },
  option: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingVertical: 16,
    paddingHorizontal: 16,
    borderRadius: 12,
    marginBottom: 8,
    backgroundColor: '#F8F9FA',
  },
  optionSelected: {
    backgroundColor: `${Colors.primary}15`,
    borderWidth: 1,
    borderColor: Colors.primary,
  },
  optionLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
  },
  optionText: {
    fontSize: 16,
    color: Colors.text.primary,
  },
  optionTextSelected: {
    color: Colors.primary,
    fontWeight: '600',
  },
  applyButton: {
    backgroundColor: Colors.primary,
    paddingVertical: 16,
    borderRadius: 12,
    alignItems: 'center',
  },
  applyButtonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
});


====================================================
FILE: constants/animations.ts
====================================================

import { Easing } from 'react-native';

export const Animations = {
  duration: {
    fast: 150,
    normal: 250,
    slow: 350,
  },

  spring: {
    default: {
      damping: 15,
      stiffness: 150,
      mass: 1,
    },
    bounce: {
      damping: 10,
      stiffness: 100,
      mass: 0.8,
    },
    gentle: {
      damping: 20,
      stiffness: 120,
      mass: 1,
    },
  },

  easing: {
    easeInOut: Easing.inOut(Easing.ease),
    easeOut: Easing.out(Easing.ease),
    easeIn: Easing.in(Easing.ease),
    linear: Easing.linear,
  },

  scale: {
    press: 0.97,
    active: 1.0,
  },
};

export type AnimationType = typeof Animations;


====================================================
FILE: constants/colors.ts
====================================================

export const Colors = {
  primary: '#007AFF',
  secondary: '#5856D6',
  success: '#34C759',
  warning: '#FF9500',
  danger: '#FF3B30',
  info: '#5AC8FA',

  background: '#FFFFFF',
  surface: '#F2F2F7',

  text: {
    primary: '#000000',
    secondary: '#3C3C43',
    disabled: '#8E8E93',
    inverse: '#FFFFFF',
  },

  border: '#C6C6C8',
  divider: '#E5E5EA',

  white: '#FFFFFF',
  black: '#000000',

  gray: {
    100: '#F2F2F7',
    200: '#E5E5EA',
    300: '#D1D1D6',
    400: '#C6C6C8',
    500: '#AEAEB2',
    600: '#8E8E93',
    700: '#636366',
    800: '#48484A',
    900: '#3A3A3C',
  },
};

// Export as COLORS for backward compatibility
export const COLORS = Colors;

export type ColorType = typeof Colors;

====================================================
FILE: constants/fonts.ts
====================================================

export const Fonts = {
  family: {
    regular: 'System',
    medium: 'System',
    semiBold: 'System',
    bold: 'System',
  },

  size: {
    xs: 12,
    sm: 14,
    md: 16,
    lg: 18,
    xl: 20,
    xxl: 24,
    xxxl: 32,
  },

  weight: {
    regular: '400' as const,
    medium: '500' as const,
    semiBold: '600' as const,
    bold: '700' as const,
  },

  lineHeight: {
    tight: 1.2,
    normal: 1.5,
    relaxed: 1.75,
  },
};

export type FontType = typeof Fonts;


====================================================
FILE: constants/index.ts
====================================================

export { Colors } from './colors';
export { Fonts } from './fonts';
export { Animations } from './animations';


====================================================
FILE: context/ComparisonContext.tsx
====================================================

import React, { createContext, useContext, useState, ReactNode } from 'react';
import { Alert } from 'react-native';
import { Property } from '../types';
import { MAX_COMPARISON_ITEMS } from '../types/comparison';

interface ComparisonContextType {
  comparisonList: string[];
  addToComparison: (property: Property) => void;
  removeFromComparison: (propertyId: string) => void;
  clearComparison: () => void;
  isInComparison: (propertyId: string) => boolean;
  getComparisonCount: () => number;
  canAddMore: () => boolean;
}

const ComparisonContext = createContext<ComparisonContextType | undefined>(
  undefined
);

interface ComparisonProviderProps {
  children: ReactNode;
}

export const ComparisonProvider: React.FC<ComparisonProviderProps> = ({
  children,
}) => {
  const [comparisonList, setComparisonList] = useState<string[]>([]);

  const addToComparison = (property: Property) => {
    if (comparisonList.length >= MAX_COMPARISON_ITEMS) {
      Alert.alert(
        'Batas Tercapai',
        `Anda hanya dapat membandingkan maksimal ${MAX_COMPARISON_ITEMS} properti.`,
        [{ text: 'OK' }]
      );
      return;
    }

    if (comparisonList.includes(property.id)) {
      console.log('Property already in comparison:', property.id);
      return;
    }

    setComparisonList((prev) => {
      console.log('Added to comparison:', property.title);
      return [...prev, property.id];
    });

    Alert.alert(
      'Ditambahkan',
      `${property.title} ditambahkan ke perbandingan`,
      [{ text: 'OK' }]
    );
  };

  const removeFromComparison = (propertyId: string) => {
    setComparisonList((prev) => {
      console.log('Removed from comparison:', propertyId);
      return prev.filter((id) => id !== propertyId);
    });
  };

  const clearComparison = () => {
    setComparisonList([]);
    console.log('Comparison cleared');
  };

  const isInComparison = (propertyId: string): boolean => {
    return comparisonList.includes(propertyId);
  };

  const getComparisonCount = (): number => {
    return comparisonList.length;
  };

  const canAddMore = (): boolean => {
    return comparisonList.length < MAX_COMPARISON_ITEMS;
  };

  return (
    <ComparisonContext.Provider
      value={{
        comparisonList,
        addToComparison,
        removeFromComparison,
        clearComparison,
        isInComparison,
        getComparisonCount,
        canAddMore,
      }}
    >
      {children}
    </ComparisonContext.Provider>
  );
};

export const useComparison = (): ComparisonContextType => {
  const context = useContext(ComparisonContext);
  if (!context) {
    throw new Error('useComparison must be used within a ComparisonProvider');
  }
  return context;
};


====================================================
FILE: context/FavoritesContext.tsx
====================================================

import React, { createContext, useContext, useState, ReactNode } from 'react';
import { Property } from '../types';
import { mockProperties } from '../data';

interface FavoritesContextType {
  favorites: string[];
  addFavorite: (propertyId: string) => void;
  removeFavorite: (propertyId: string) => void;
  isFavorite: (propertyId: string) => boolean;
  toggleFavorite: (propertyId: string) => void;
  getFavoriteProperties: () => Property[];
}

const FavoritesContext = createContext<FavoritesContextType | undefined>(
  undefined
);

interface FavoritesProviderProps {
  children: ReactNode;
}

export const FavoritesProvider: React.FC<FavoritesProviderProps> = ({
  children,
}) => {
  const [favorites, setFavorites] = useState<string[]>([]);

  const addFavorite = (propertyId: string) => {
    setFavorites((prev) => {
      if (prev.includes(propertyId)) {
        return prev;
      }
      console.log('Added to favorites:', propertyId);
      return [...prev, propertyId];
    });
  };

  const removeFavorite = (propertyId: string) => {
    setFavorites((prev) => {
      console.log('Removed from favorites:', propertyId);
      return prev.filter((id) => id !== propertyId);
    });
  };

  const isFavorite = (propertyId: string): boolean => {
    return favorites.includes(propertyId);
  };

  const toggleFavorite = (propertyId: string) => {
    if (isFavorite(propertyId)) {
      removeFavorite(propertyId);
    } else {
      addFavorite(propertyId);
    }
  };

  const getFavoriteProperties = (): Property[] => {
    return mockProperties.filter((property) =>
      favorites.includes(property.id)
    );
  };

  return (
    <FavoritesContext.Provider
      value={{
        favorites,
        addFavorite,
        removeFavorite,
        isFavorite,
        toggleFavorite,
        getFavoriteProperties,
      }}
    >
      {children}
    </FavoritesContext.Provider>
  );
};

export const useFavorites = (): FavoritesContextType => {
  const context = useContext(FavoritesContext);
  if (!context) {
    throw new Error('useFavorites must be used within a FavoritesProvider');
  }
  return context;
};


====================================================
FILE: context/LocationContext.tsx
====================================================

import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import * as Location from 'expo-location';
import { LocationPermission } from '../types/location';

interface UserLocation {
  latitude: number;
  longitude: number;
}

interface LocationContextType {
  userLocation: UserLocation | null;
  permission: LocationPermission;
  requestPermission: () => Promise<void>;
  isLoading: boolean;
  error: string | null;
}

const LocationContext = createContext<LocationContextType | undefined>(undefined);

interface LocationProviderProps {
  children: ReactNode;
}

export const LocationProvider: React.FC<LocationProviderProps> = ({ children }) => {
  const [userLocation, setUserLocation] = useState<UserLocation | null>(null);
  const [permission, setPermission] = useState<LocationPermission>('undetermined');
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Check permission status on mount
  useEffect(() => {
    checkPermission();
  }, []);

  const checkPermission = async () => {
    try {
      const { status } = await Location.getForegroundPermissionsAsync();

      if (status === 'granted') {
        setPermission('granted');
        getCurrentLocation();
      } else if (status === 'denied') {
        setPermission('denied');
      } else {
        setPermission('undetermined');
      }
    } catch (err) {
      console.error('Error checking location permission:', err);
      setError('Gagal memeriksa izin lokasi');
      setPermission('denied');
    }
  };

  const requestPermission = async () => {
    try {
      setIsLoading(true);
      setError(null);

      const { status } = await Location.requestForegroundPermissionsAsync();

      if (status === 'granted') {
        setPermission('granted');
        await getCurrentLocation();
      } else {
        setPermission('denied');
        setError('Izin lokasi ditolak');
      }
    } catch (err) {
      console.error('Error requesting location permission:', err);
      setError('Gagal meminta izin lokasi');
      setPermission('denied');
    } finally {
      setIsLoading(false);
    }
  };

  const getCurrentLocation = async () => {
    try {
      setIsLoading(true);
      setError(null);

      const location = await Location.getCurrentPositionAsync({
        accuracy: Location.Accuracy.Balanced,
      });

      setUserLocation({
        latitude: location.coords.latitude,
        longitude: location.coords.longitude,
      });
    } catch (err) {
      console.error('Error getting current location:', err);
      setError('Gagal mendapatkan lokasi saat ini');
    } finally {
      setIsLoading(false);
    }
  };

  const value: LocationContextType = {
    userLocation,
    permission,
    requestPermission,
    isLoading,
    error,
  };

  return (
    <LocationContext.Provider value={value}>
      {children}
    </LocationContext.Provider>
  );
};

export const useLocation = (): LocationContextType => {
  const context = useContext(LocationContext);
  if (context === undefined) {
    throw new Error('useLocation must be used within a LocationProvider');
  }
  return context;
};


====================================================
FILE: context/UserContext.tsx
====================================================

import React, { createContext, useContext, useState, ReactNode } from 'react';
import { User, AppSettings } from '../types';

interface UserContextType {
  user: User;
  settings: AppSettings;
  updateUser: (data: Partial<User>) => void;
  updateAvatar: (uri: string) => void;
  updateSettings: (data: Partial<AppSettings>) => void;
  getSavedPropertiesCount: () => number;
}

const UserContext = createContext<UserContextType | undefined>(undefined);

interface UserProviderProps {
  children: ReactNode;
}

// Mock user data - in a real app this would come from authentication/backend
const defaultUser: User = {
  id: '1',
  name: 'Budi Santoso',
  email: 'budi.santoso@email.com',
  phone: '+62 812-3456-7890',
  avatar: undefined, // Will use initials
  joinedDate: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000), // 3 months ago
  savedProperties: 0, // Will be synced with favorites
  viewedProperties: 8,
};

const defaultSettings: AppSettings = {
  notifications: {
    push: true,
    email: false,
  },
  preferences: {
    language: 'en',
    currency: 'IDR',
    distanceUnit: 'km',
  },
  darkMode: false,
};

export const UserProvider: React.FC<UserProviderProps> = ({ children }) => {
  const [user, setUser] = useState<User>(defaultUser);
  const [settings, setSettings] = useState<AppSettings>(defaultSettings);

  const updateUser = (data: Partial<User>) => {
    setUser((prev) => {
      console.log('Updating user:', data);
      return { ...prev, ...data };
    });
  };

  const updateAvatar = (uri: string) => {
    setUser((prev) => ({
      ...prev,
      avatar: uri,
    }));
  };

  const updateSettings = (data: Partial<AppSettings>) => {
    setSettings((prev) => {
      console.log('Updating settings:', data);
      return { ...prev, ...data };
    });
  };

  const getSavedPropertiesCount = (): number => {
    return user.savedProperties;
  };

  return (
    <UserContext.Provider
      value={{
        user,
        settings,
        updateUser,
        updateAvatar,
        updateSettings,
        getSavedPropertiesCount,
      }}
    >
      {children}
    </UserContext.Provider>
  );
};

export const useUser = (): UserContextType => {
  const context = useContext(UserContext);
  if (!context) {
    throw new Error('useUser must be used within a UserProvider');
  }
  return context;
};


====================================================
FILE: data/index.ts
====================================================

export { mockProperties } from './mockProperties';


====================================================
FILE: data/mockProperties.ts
====================================================

import { Property } from '../types';

export const mockProperties: Property[] = [
  {
    id: '1',
    title: 'Modern Apartment in Kemang',
    location: 'Jl. Kemang Raya, South Jakarta',
    price: 8500000,
    bedrooms: 2,
    bathrooms: 2,
    area: 75,
    imageUrls: [
      'https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1534889156217-d643df14f14a?w=800&h=600&fit=crop',
    ],
    description: 'Beautiful modern apartment in the heart of Kemang with easy access to restaurants, cafes, and shopping centers. Features contemporary design and high-quality finishes.',
    type: 'apartment',
    isAvailable: true,
    features: ['Swimming Pool', 'Gym', 'Security 24/7', 'Parking', 'WiFi'],
    furnished: true,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-11-01'),
    owner: {
      id: 'owner-1',
      name: 'Budi Santoso',
      phone: '+62 812-3456-7890',
      email: 'budi.santoso@email.com',
      responseTime: 'Within 1 hour',
      verified: true,
    },
  },
  {
    id: '2',
    title: 'Luxury Villa in Seminyak',
    location: 'Jl. Laksmana, Seminyak, Bali',
    price: 25000000,
    bedrooms: 4,
    bathrooms: 4,
    area: 200,
    imageUrls: [
      'https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1602343168117-bb8ffe3e2e9f?w=800&h=600&fit=crop',
    ],
    description: 'Stunning luxury villa with private pool and tropical garden. Walking distance to the beach and famous restaurants. Perfect for families or groups seeking privacy and comfort.',
    type: 'villa',
    isAvailable: true,
    features: ['Private Pool', 'Garden', 'Beach Access', 'Parking', 'Fully Furnished'],
    furnished: true,
    petFriendly: true,
    hasParking: true,
    createdAt: new Date('2025-10-25'),
    owner: {
      id: 'owner-2',
      name: 'Made Wirawan',
      phone: '+62 821-9876-5432',
      email: 'made.wirawan@email.com',
      responseTime: 'Within 2 hours',
      verified: true,
    },
  },
  {
    id: '3',
    title: 'Cozy Studio in Sudirman',
    location: 'Jl. Jend. Sudirman, Central Jakarta',
    price: 4500000,
    bedrooms: 1,
    bathrooms: 1,
    area: 35,
    imageUrls: [
      'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1536376072261-38c75010e6c9?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=800&h=600&fit=crop',
    ],
    description: 'Compact and efficient studio apartment perfect for young professionals. Located in the business district with excellent public transport connections.',
    type: 'apartment',
    isAvailable: true,
    features: ['Security 24/7', 'Parking', 'WiFi', 'Near MRT'],
    furnished: false,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-11-08'),
    owner: {
      id: 'owner-3',
      name: 'Siti Nurhaliza',
      phone: '+62 813-5555-1234',
      email: 'siti.nurhaliza@email.com',
      responseTime: 'Within 30 minutes',
      verified: true,
    },
  },
  {
    id: '4',
    title: 'Spacious Family House in Surabaya',
    location: 'Jl. Raya Darmo, Surabaya',
    price: 12000000,
    bedrooms: 3,
    bathrooms: 3,
    area: 150,
    imageUrls: [
      'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1572120360610-d971b9d7767c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1556909172-54557c7e4fb7?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop',
    ],
    description: 'Large family home with spacious rooms and a beautiful backyard. Located in a quiet residential area with easy access to schools and shopping centers.',
    type: 'house',
    isAvailable: false,
    features: ['Garden', 'Parking', 'Security', 'Storage Room'],
    furnished: false,
    petFriendly: true,
    hasParking: true,
    createdAt: new Date('2025-09-15'),
    owner: {
      id: 'owner-4',
      name: 'Andi Wijaya',
      phone: '+62 822-7777-8888',
      email: 'andi.wijaya@email.com',
      responseTime: 'Within 24 hours',
      verified: false,
    },
  },
  {
    id: '5',
    title: 'Elegant Apartment in Pondok Indah',
    location: 'Jl. Metro Pondok Indah, South Jakarta',
    price: 15000000,
    bedrooms: 3,
    bathrooms: 2,
    area: 120,
    imageUrls: [
      'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1560185007-c5ca9d2c014d?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1538688423619-a81d3f23454b?w=800&h=600&fit=crop',
    ],
    description: 'Premium apartment in prestigious Pondok Indah area. Features elegant interior design, large windows with city views, and access to world-class facilities.',
    type: 'apartment',
    isAvailable: true,
    features: ['Swimming Pool', 'Gym', 'Tennis Court', 'Parking', 'Security 24/7'],
    furnished: true,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-10-10'),
    owner: {
      id: 'owner-5',
      name: 'Dewi Lestari',
      phone: '+62 815-4321-9876',
      email: 'dewi.lestari@email.com',
      responseTime: 'Within 1 hour',
      verified: true,
    },
  },
  {
    id: '6',
    title: 'Traditional House in Ubud',
    location: 'Jl. Raya Ubud, Gianyar, Bali',
    price: 8000000,
    bedrooms: 2,
    bathrooms: 2,
    area: 90,
    imageUrls: [
      'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop',
    ],
    description: 'Charming traditional Balinese house surrounded by rice fields. Perfect for those seeking tranquility and authentic Balinese living experience.',
    type: 'house',
    isAvailable: true,
    features: ['Garden', 'Rice Field View', 'Traditional Design', 'Parking'],
    furnished: true,
    petFriendly: true,
    hasParking: true,
    createdAt: new Date('2025-09-28'),
    owner: {
      id: 'owner-6',
      name: 'I Ketut Sutama',
      phone: '+62 816-2222-3333',
      email: 'ketut.sutama@email.com',
      responseTime: 'Within 3 hours',
      verified: true,
    },
  },
  {
    id: '7',
    title: 'Minimalist Apartment in BSD City',
    location: 'Jl. BSD Grand Boulevard, Tangerang',
    price: 6000000,
    bedrooms: 2,
    bathrooms: 1,
    area: 60,
    imageUrls: [
      'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1484154218962-a197022b5858?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1524758631624-e2822e304c36?w=800&h=600&fit=crop',
    ],
    description: 'Modern minimalist apartment in the growing BSD area. Close to offices, universities, and shopping malls. Ideal for young couples or small families.',
    type: 'apartment',
    isAvailable: true,
    features: ['Parking', 'Security 24/7', 'WiFi', 'Near Mall'],
    furnished: false,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-10-18'),
    owner: {
      id: 'owner-7',
      name: 'Rudi Hartono',
      phone: '+62 817-6666-7777',
      email: 'rudi.hartono@email.com',
      responseTime: 'Within 2 hours',
      verified: false,
    },
  },
  {
    id: '8',
    title: 'Beachfront Villa in Sanur',
    location: 'Jl. Danau Tamblingan, Sanur, Bali',
    price: 20000000,
    bedrooms: 3,
    bathrooms: 3,
    area: 180,
    imageUrls: [
      'https://images.unsplash.com/photo-1602343168117-bb8ffe3e2e9f?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1591825729269-caeb344f6df2?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1505692433770-36f19f51681d?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=800&h=600&fit=crop',
    ],
    description: 'Exclusive beachfront villa with direct beach access and stunning ocean views. Features modern amenities while maintaining Balinese charm.',
    type: 'villa',
    isAvailable: false,
    features: ['Private Pool', 'Beach Access', 'Garden', 'Fully Furnished', 'Staff Quarter'],
    furnished: true,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-08-20'),
    owner: {
      id: 'owner-8',
      name: 'Nyoman Rai',
      phone: '+62 818-9999-1111',
      email: 'nyoman.rai@email.com',
      responseTime: 'Within 24 hours',
      verified: true,
    },
  },
  {
    id: '9',
    title: 'Compact House in Pakuwon City',
    location: 'Jl. Pakuwon Indah, Surabaya',
    price: 7500000,
    bedrooms: 2,
    bathrooms: 2,
    area: 80,
    imageUrls: [
      'https://images.unsplash.com/photo-1572120360610-d971b9d7767c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1565183997392-2f8c9e5c6b0b?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1598928506311-c55ded91a20c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1588854337221-c0bbf2f776e9?w=800&h=600&fit=crop',
    ],
    description: 'Well-maintained house in a secure gated community. Perfect for small families with children. Close to international schools and hospitals.',
    type: 'house',
    isAvailable: true,
    features: ['Security 24/7', 'Parking', 'Community Pool', 'Playground'],
    furnished: false,
    petFriendly: true,
    hasParking: true,
    createdAt: new Date('2025-10-05'),
    owner: {
      id: 'owner-9',
      name: 'Taufik Rahman',
      phone: '+62 819-4444-5555',
      email: 'taufik.rahman@email.com',
      responseTime: 'Within 1 hour',
      verified: false,
    },
  },
  {
    id: '10',
    title: 'Penthouse in Senopati',
    location: 'Jl. Senopati, South Jakarta',
    price: 18000000,
    bedrooms: 3,
    bathrooms: 3,
    area: 140,
    imageUrls: [
      'https://images.unsplash.com/photo-1567496898669-ee935f5f647a?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1606744824163-985d376605aa?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1574643156929-51fa098b0394?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1611048267451-c6d5a0a29f59?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=800&h=600&fit=crop',
    ],
    description: 'Luxurious penthouse with panoramic city views. Features high ceilings, premium appliances, and access to exclusive rooftop facilities.',
    type: 'apartment',
    isAvailable: true,
    features: ['Rooftop Access', 'Gym', 'Swimming Pool', 'Parking', 'Concierge Service'],
    furnished: true,
    petFriendly: false,
    hasParking: true,
    createdAt: new Date('2025-09-10'),
    owner: {
      id: 'owner-10',
      name: 'Rina Kusuma',
      phone: '+62 811-3333-4444',
      email: 'rina.kusuma@email.com',
      responseTime: 'Within 30 minutes',
      verified: true,
    },
  },
  {
    id: '11',
    title: 'Budget-Friendly Apartment in Depok',
    location: 'Jl. Margonda Raya, Depok',
    price: 3000000,
    bedrooms: 1,
    bathrooms: 1,
    area: 30,
    imageUrls: [
      'https://images.unsplash.com/photo-1536376072261-38c75010e6c9?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1550581190-9c1c48d21d6c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1600121848594-d8644e57abab?w=800&h=600&fit=crop',
    ],
    description: 'Affordable apartment near University of Indonesia. Perfect for students or young professionals starting their career. Basic amenities included.',
    type: 'apartment',
    isAvailable: true,
    features: ['Security 24/7', 'WiFi', 'Near Campus'],
    furnished: false,
    petFriendly: true,
    hasParking: false,
    createdAt: new Date('2025-11-05'),
    owner: {
      id: 'owner-11',
      name: 'Agus Setiawan',
      phone: '+62 823-1111-2222',
      email: 'agus.setiawan@email.com',
      responseTime: 'Within 4 hours',
      verified: false,
    },
  },
  {
    id: '12',
    title: 'Contemporary Villa in Canggu',
    location: 'Jl. Pantai Berawa, Canggu, Bali',
    price: 22000000,
    bedrooms: 4,
    bathrooms: 4,
    area: 190,
    imageUrls: [
      'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1615529328331-f8917597711f?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=600&fit=crop',
      'https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?w=800&h=600&fit=crop',
    ],
    description: 'Modern villa in trendy Canggu area. Features open-plan living, infinity pool, and rooftop terrace. Walking distance to surf spots and beach clubs.',
    type: 'villa',
    isAvailable: true,
    features: ['Private Pool', 'Rooftop Terrace', 'Surfboard Storage', 'Parking', 'Fully Furnished'],
    furnished: true,
    petFriendly: true,
    hasParking: true,
    createdAt: new Date('2025-10-30'),
    owner: {
      id: 'owner-12',
      name: 'Wayan Sujana',
      phone: '+62 814-8888-9999',
      email: 'wayan.sujana@email.com',
      responseTime: 'Within 1 hour',
      verified: true,
    },
  },
];


====================================================
FILE: navigation/index.ts
====================================================

export { RootNavigator } from './RootNavigator';


====================================================
FILE: navigation/RootNavigator.tsx
====================================================

import React from 'react';
import { createStackNavigator } from '@react-navigation/stack';
import { RootStackParamList } from '../types';
import {
  HomeScreen,
  PropertyDetailScreen,
  SearchScreen,
  FavoritesScreen,
  ProfileScreen,
  EditProfileScreen,
  SettingsScreen,
  AboutScreen,
  TermsScreen,
  PrivacyScreen,
  ComparisonScreen,
  MapScreen,
  NearbyPropertiesScreen,
} from '../screens';

const Stack = createStackNavigator<RootStackParamList>();

export const RootNavigator: React.FC = () => {
  return (
    <Stack.Navigator
      initialRouteName="Home"
      screenOptions={{
        headerShown: true,
        headerTitleAlign: 'center',
      }}
    >
      <Stack.Screen
        name="Home"
        component={HomeScreen}
        options={{ title: 'Rent App' }}
      />
      <Stack.Screen
        name="PropertyDetail"
        component={PropertyDetailScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="Search"
        component={SearchScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="Favorites"
        component={FavoritesScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="Profile"
        component={ProfileScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="EditProfile"
        component={EditProfileScreen}
        options={{ title: 'Edit Profile' }}
      />
      <Stack.Screen
        name="Settings"
        component={SettingsScreen}
        options={{ title: 'Settings' }}
      />
      <Stack.Screen
        name="About"
        component={AboutScreen}
        options={{ title: 'About' }}
      />
      <Stack.Screen
        name="Terms"
        component={TermsScreen}
        options={{ title: 'Terms & Conditions' }}
      />
      <Stack.Screen
        name="Privacy"
        component={PrivacyScreen}
        options={{ title: 'Privacy Policy' }}
      />
      <Stack.Screen
        name="Comparison"
        component={ComparisonScreen}
        options={{ title: 'Bandingkan Properti' }}
      />
      <Stack.Screen
        name="Map"
        component={MapScreen}
        options={{ headerShown: false }}
      />
      <Stack.Screen
        name="NearbyProperties"
        component={NearbyPropertiesScreen}
        options={{ headerShown: false }}
      />
    </Stack.Navigator>
  );
};


====================================================
FILE: screens/AboutScreen.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TouchableOpacity,
  Alert,
  Linking,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { Colors, Fonts } from '../constants';

export const AboutScreen: React.FC = () => {
  const handleEmail = () => {
    Linking.openURL('mailto:support@rentapp.com').catch(() => {
      Alert.alert('Error', 'Could not open email client');
    });
  };

  const handleWebsite = () => {
    Alert.alert('Website', 'Opening www.rentapp.com');
  };

  const handleSocial = (platform: string) => {
    Alert.alert(platform, `Opening ${platform} page`);
  };

  const handleRateUs = () => {
    Alert.alert('Rate Us', 'Thank you for rating our app!');
  };

  const handleShareApp = () => {
    Alert.alert('Share App', 'Share functionality will open here');
  };

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={styles.scrollContent}
        showsVerticalScrollIndicator={false}
      >
        {/* App Logo */}
        <View style={styles.logoContainer}>
          <View style={styles.logo}>
            <Ionicons name="home" size={60} color={Colors.primary} />
          </View>
          <Text style={styles.appName}>Rent App</Text>
          <Text style={styles.version}>Version 1.0.0</Text>
        </View>

        {/* Description */}
        <View style={styles.descriptionContainer}>
          <Text style={styles.description}>
            Your trusted companion for finding the perfect rental property in
            Indonesia. Browse thousands of apartments, houses, and villas with
            ease. Our platform connects property seekers with verified owners,
            making your search simple and secure.
          </Text>
        </View>

        {/* Contact Info */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>CONTACT US</Text>
          <View style={styles.contactContainer}>
            <TouchableOpacity
              style={styles.contactItem}
              onPress={handleEmail}
              activeOpacity={0.7}
            >
              <Ionicons name="mail-outline" size={24} color={Colors.primary} />
              <View style={styles.contactText}>
                <Text style={styles.contactLabel}>Email</Text>
                <Text style={styles.contactValue}>support@rentapp.com</Text>
              </View>
              <Ionicons
                name="chevron-forward"
                size={20}
                color={Colors.textSecondary}
              />
            </TouchableOpacity>
            <TouchableOpacity
              style={styles.contactItem}
              onPress={handleWebsite}
              activeOpacity={0.7}
            >
              <Ionicons name="globe-outline" size={24} color={Colors.primary} />
              <View style={styles.contactText}>
                <Text style={styles.contactLabel}>Website</Text>
                <Text style={styles.contactValue}>www.rentapp.com</Text>
              </View>
              <Ionicons
                name="chevron-forward"
                size={20}
                color={Colors.textSecondary}
              />
            </TouchableOpacity>
          </View>
        </View>

        {/* Social Media */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>FOLLOW US</Text>
          <View style={styles.socialContainer}>
            <TouchableOpacity
              style={styles.socialButton}
              onPress={() => handleSocial('Facebook')}
              activeOpacity={0.7}
            >
              <Ionicons name="logo-facebook" size={32} color="#1877F2" />
            </TouchableOpacity>
            <TouchableOpacity
              style={styles.socialButton}
              onPress={() => handleSocial('Twitter')}
              activeOpacity={0.7}
            >
              <Ionicons name="logo-twitter" size={32} color="#1DA1F2" />
            </TouchableOpacity>
            <TouchableOpacity
              style={styles.socialButton}
              onPress={() => handleSocial('Instagram')}
              activeOpacity={0.7}
            >
              <Ionicons name="logo-instagram" size={32} color="#E4405F" />
            </TouchableOpacity>
          </View>
        </View>

        {/* Action Buttons */}
        <View style={styles.actionContainer}>
          <TouchableOpacity
            style={styles.actionButton}
            onPress={handleRateUs}
            activeOpacity={0.8}
          >
            <Ionicons name="star-outline" size={24} color={Colors.primary} />
            <Text style={styles.actionButtonText}>Rate Us</Text>
          </TouchableOpacity>
          <TouchableOpacity
            style={styles.actionButton}
            onPress={handleShareApp}
            activeOpacity={0.8}
          >
            <Ionicons
              name="share-social-outline"
              size={24}
              color={Colors.primary}
            />
            <Text style={styles.actionButtonText}>Share App</Text>
          </TouchableOpacity>
        </View>

        {/* Footer */}
        <View style={styles.footer}>
          <Text style={styles.footerText}>
             2024 Rent App. All rights reserved.
          </Text>
          <Text style={styles.footerSubtext}>
            Made with  in Indonesia
          </Text>
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    paddingBottom: 20,
  },
  logoContainer: {
    alignItems: 'center',
    paddingVertical: 40,
    backgroundColor: Colors.card,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  logo: {
    width: 120,
    height: 120,
    borderRadius: 60,
    backgroundColor: `${Colors.primary}15`,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: 16,
  },
  appName: {
    fontSize: 28,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginBottom: 4,
  },
  version: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
  },
  descriptionContainer: {
    paddingHorizontal: 24,
    paddingVertical: 24,
  },
  description: {
    fontSize: 15,
    fontFamily: Fonts.regular,
    color: Colors.text,
    lineHeight: 24,
    textAlign: 'center',
  },
  section: {
    marginTop: 16,
    paddingHorizontal: 16,
  },
  sectionTitle: {
    fontSize: 12,
    fontFamily: Fonts.semiBold,
    color: Colors.textSecondary,
    letterSpacing: 0.5,
    marginBottom: 12,
    marginLeft: 4,
  },
  contactContainer: {
    backgroundColor: Colors.card,
    borderRadius: 12,
    overflow: 'hidden',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  contactItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 16,
    paddingHorizontal: 16,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  contactText: {
    flex: 1,
    marginLeft: 12,
  },
  contactLabel: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 2,
  },
  contactValue: {
    fontSize: 15,
    fontFamily: Fonts.medium,
    color: Colors.text,
  },
  socialContainer: {
    flexDirection: 'row',
    justifyContent: 'center',
    gap: 24,
    paddingVertical: 20,
    backgroundColor: Colors.card,
    borderRadius: 12,
    borderWidth: 1,
    borderColor: Colors.border,
  },
  socialButton: {
    width: 60,
    height: 60,
    borderRadius: 30,
    backgroundColor: Colors.background,
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  actionContainer: {
    flexDirection: 'row',
    paddingHorizontal: 16,
    marginTop: 24,
    gap: 12,
  },
  actionButton: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: Colors.card,
    borderRadius: 12,
    paddingVertical: 16,
    borderWidth: 1,
    borderColor: Colors.border,
  },
  actionButtonText: {
    fontSize: 15,
    fontFamily: Fonts.semiBold,
    color: Colors.primary,
    marginLeft: 8,
  },
  footer: {
    alignItems: 'center',
    paddingTop: 32,
    paddingBottom: 16,
  },
  footerText: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 4,
  },
  footerSubtext: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
  },
  bottomSpacing: {
    height: 20,
  },
});


====================================================
FILE: screens/ComparisonScreen.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TouchableOpacity,
  Image,
  Alert,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { useNavigation } from '@react-navigation/native';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { useComparison } from '../context/ComparisonContext';
import { ComparisonRow } from '../components/ComparisonRow';
import { mockProperties } from '../data';
import {
  calculatePricePerSqm,
  getBestValueIndex,
  formatPrice,
  formatArea,
  getPropertyTypeLabel,
} from '../utils/comparisonHelpers';
import { MAX_COMPARISON_ITEMS } from '../types/comparison';

export const ComparisonScreen: React.FC = () => {
  const navigation = useNavigation<RootStackNavigationProp<'Comparison'>>();
  const { comparisonList, removeFromComparison, clearComparison } =
    useComparison();

  const comparisonProperties = mockProperties.filter((p) =>
    comparisonList.includes(p.id)
  );

  const handleClearAll = () => {
    Alert.alert(
      'Hapus Semua',
      'Apakah Anda yakin ingin menghapus semua properti dari perbandingan?',
      [
        { text: 'Batal', style: 'cancel' },
        {
          text: 'Hapus',
          style: 'destructive',
          onPress: clearComparison,
        },
      ]
    );
  };

  const handleRemoveProperty = (propertyId: string) => {
    removeFromComparison(propertyId);
  };

  const handleViewDetail = (propertyId: string) => {
    navigation.navigate('PropertyDetail', { propertyId });
  };

  const handleBrowseProperties = () => {
    navigation.navigate('Home');
  };

  // Empty state
  if (comparisonProperties.length === 0) {
    return (
      <SafeAreaView style={styles.container} edges={['top']}>
        <View style={styles.emptyContainer}>
          <Ionicons
            name="git-compare-outline"
            size={80}
            color={Colors.textSecondary}
          />
          <Text style={styles.emptyTitle}>
            Belum Ada Properti untuk Dibandingkan
          </Text>
          <Text style={styles.emptyDescription}>
            Pilih hingga {MAX_COMPARISON_ITEMS} properti untuk dibandingkan
          </Text>
          <TouchableOpacity
            style={styles.emptyButton}
            onPress={handleBrowseProperties}
            activeOpacity={0.8}
          >
            <Text style={styles.emptyButtonText}>Telusuri Properti</Text>
          </TouchableOpacity>
        </View>
      </SafeAreaView>
    );
  }

  // Prepare comparison data
  const prices = comparisonProperties.map((p) => p.price);
  const bedrooms = comparisonProperties.map((p) => p.bedrooms);
  const bathrooms = comparisonProperties.map((p) => p.bathrooms);
  const areas = comparisonProperties.map((p) => p.area);
  const pricesPerSqm = comparisonProperties.map((p) =>
    calculatePricePerSqm(p.price, p.area)
  );

  const bestPriceIndex = getBestValueIndex(prices, true);
  const bestBedroomIndex = getBestValueIndex(bedrooms);
  const bestBathroomIndex = getBestValueIndex(bathrooms);
  const bestAreaIndex = getBestValueIndex(areas);
  const bestPricePerSqmIndex = getBestValueIndex(pricesPerSqm, true);

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        showsVerticalScrollIndicator={false}
      >
        {/* Header */}
        <View style={styles.header}>
          <Text style={styles.headerTitle}>Bandingkan Properti</Text>
          <Text style={styles.headerSubtitle}>
            {comparisonProperties.length} dari {MAX_COMPARISON_ITEMS} properti
            dipilih
          </Text>
          {comparisonProperties.length > 0 && (
            <TouchableOpacity
              style={styles.clearButton}
              onPress={handleClearAll}
              activeOpacity={0.7}
            >
              <Text style={styles.clearButtonText}>Hapus Semua</Text>
            </TouchableOpacity>
          )}
        </View>

        {/* Property Cards */}
        <ScrollView
          horizontal
          showsHorizontalScrollIndicator={false}
          style={styles.cardsScrollView}
          contentContainerStyle={styles.cardsContainer}
        >
          {comparisonProperties.map((property) => (
            <View key={property.id} style={styles.propertyCard}>
              <Image
                source={{ uri: property.imageUrls[0] }}
                style={styles.propertyImage}
              />
              <TouchableOpacity
                style={styles.removeButton}
                onPress={() => handleRemoveProperty(property.id)}
                activeOpacity={0.7}
              >
                <Ionicons name="close-circle" size={28} color="#FF3B30" />
              </TouchableOpacity>
              <View style={styles.propertyInfo}>
                <Text style={styles.propertyTitle} numberOfLines={2}>
                  {property.title}
                </Text>
                <Text style={styles.propertyLocation} numberOfLines={1}>
                  {property.location}
                </Text>
                <Text style={styles.propertyPrice}>
                  {formatPrice(property.price)}/bulan
                </Text>
              </View>
            </View>
          ))}
        </ScrollView>

        {/* Comparison Table */}
        <View style={styles.tableContainer}>
          <Text style={styles.tableTitle}>Detail Perbandingan</Text>

          <ComparisonRow
            label="Tipe Properti"
            values={comparisonProperties.map((p) =>
              getPropertyTypeLabel(p.type)
            )}
            isAlternate={false}
          />
          <ComparisonRow
            label="Kamar Tidur"
            values={bedrooms}
            highlightBest
            highlightIndex={bestBedroomIndex}
            isAlternate
          />
          <ComparisonRow
            label="Kamar Mandi"
            values={bathrooms}
            highlightBest
            highlightIndex={bestBathroomIndex}
            isAlternate={false}
          />
          <ComparisonRow
            label="Luas"
            values={comparisonProperties.map((p) => formatArea(p.area))}
            highlightBest
            highlightIndex={bestAreaIndex}
            isAlternate
          />
          <ComparisonRow
            label="Harga per m"
            values={pricesPerSqm.map((p) => `Rp ${(p / 1000).toFixed(0)}k`)}
            highlightBest
            highlightIndex={bestPricePerSqmIndex}
            isAlternate={false}
          />
          <ComparisonRow
            label="Furnished"
            values={comparisonProperties.map((p) => p.furnished)}
            isAlternate
          />
          <ComparisonRow
            label="Pet Friendly"
            values={comparisonProperties.map((p) => p.petFriendly)}
            isAlternate={false}
          />
          <ComparisonRow
            label="Parkir"
            values={comparisonProperties.map((p) => p.hasParking)}
            isAlternate
          />

          {/* Features Row */}
          <View style={[styles.featuresRow, styles.alternateRow]}>
            <View style={styles.featuresLabel}>
              <Text style={styles.labelText}>Fitur</Text>
            </View>
            {comparisonProperties.map((property, index) => (
              <View key={index} style={styles.featuresColumn}>
                <View style={styles.featuresList}>
                  {property.features && property.features.length > 0 ? (
                    property.features.slice(0, 3).map((feature, fIndex) => (
                      <Text key={fIndex} style={styles.featureItem}>
                         {feature}
                      </Text>
                    ))
                  ) : (
                    <Text style={styles.noFeatures}>-</Text>
                  )}
                </View>
              </View>
            ))}
          </View>
        </View>

        {/* Action Buttons */}
        <View style={styles.actionContainer}>
          {comparisonProperties.map((property, index) => (
            <TouchableOpacity
              key={property.id}
              style={[
                styles.detailButton,
                comparisonProperties.length === 1 && styles.detailButtonFull,
                comparisonProperties.length === 2 && styles.detailButtonHalf,
              ]}
              onPress={() => handleViewDetail(property.id)}
              activeOpacity={0.8}
            >
              <Text style={styles.detailButtonText} numberOfLines={1}>
                Lihat Properti {index + 1}
              </Text>
            </TouchableOpacity>
          ))}
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  emptyContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 40,
    paddingTop: 100,
  },
  emptyTitle: {
    fontSize: 20,
    fontFamily: Fonts.bold,
    color: Colors.text,
    textAlign: 'center',
    marginTop: 24,
    marginBottom: 12,
  },
  emptyDescription: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    textAlign: 'center',
    marginBottom: 32,
  },
  emptyButton: {
    backgroundColor: Colors.card,
    borderWidth: 2,
    borderColor: Colors.primary,
    borderRadius: 12,
    paddingHorizontal: 32,
    paddingVertical: 14,
  },
  emptyButtonText: {
    fontSize: 16,
    fontFamily: Fonts.semiBold,
    color: Colors.primary,
  },
  header: {
    paddingHorizontal: 16,
    paddingTop: 16,
    paddingBottom: 20,
    backgroundColor: Colors.card,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  headerTitle: {
    fontSize: 24,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginBottom: 4,
  },
  headerSubtitle: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
  },
  clearButton: {
    marginTop: 12,
    alignSelf: 'flex-start',
  },
  clearButtonText: {
    fontSize: 14,
    fontFamily: Fonts.semiBold,
    color: Colors.error,
  },
  cardsScrollView: {
    marginVertical: 20,
  },
  cardsContainer: {
    paddingHorizontal: 16,
  },
  propertyCard: {
    width: 250,
    height: 300,
    backgroundColor: Colors.card,
    borderRadius: 16,
    marginRight: 16,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 8,
    elevation: 4,
    overflow: 'hidden',
  },
  propertyImage: {
    width: '100%',
    height: 150,
    backgroundColor: Colors.border,
  },
  removeButton: {
    position: 'absolute',
    top: 8,
    right: 8,
    backgroundColor: Colors.card,
    borderRadius: 14,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.2,
    shadowRadius: 2,
    elevation: 3,
  },
  propertyInfo: {
    padding: 16,
  },
  propertyTitle: {
    fontSize: 16,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
    marginBottom: 6,
    lineHeight: 22,
  },
  propertyLocation: {
    fontSize: 13,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 12,
  },
  propertyPrice: {
    fontSize: 18,
    fontFamily: Fonts.bold,
    color: Colors.primary,
  },
  tableContainer: {
    marginHorizontal: 16,
    backgroundColor: Colors.card,
    borderRadius: 12,
    overflow: 'hidden',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  tableTitle: {
    fontSize: 18,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  featuresRow: {
    flexDirection: 'row',
    minHeight: 80,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
    backgroundColor: Colors.card,
  },
  alternateRow: {
    backgroundColor: '#F5F5F5',
  },
  featuresLabel: {
    width: '40%',
    justifyContent: 'flex-start',
    paddingTop: 12,
    paddingLeft: 16,
    paddingRight: 8,
  },
  labelText: {
    fontSize: 14,
    fontFamily: Fonts.medium,
    color: Colors.text,
  },
  featuresColumn: {
    width: '20%',
    justifyContent: 'flex-start',
    paddingTop: 12,
    paddingHorizontal: 4,
  },
  featuresList: {
    alignItems: 'flex-start',
  },
  featureItem: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.text,
    marginBottom: 4,
    textAlign: 'left',
  },
  noFeatures: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    textAlign: 'center',
  },
  actionContainer: {
    flexDirection: 'row',
    paddingHorizontal: 16,
    marginTop: 24,
    gap: 12,
  },
  detailButton: {
    backgroundColor: Colors.primary,
    borderRadius: 12,
    paddingVertical: 16,
    alignItems: 'center',
  },
  detailButtonFull: {
    flex: 1,
  },
  detailButtonHalf: {
    flex: 1,
  },
  detailButtonText: {
    fontSize: 15,
    fontFamily: Fonts.semiBold,
    color: Colors.card,
  },
  bottomSpacing: {
    height: 32,
  },
});


====================================================
FILE: screens/EditProfileScreen.tsx
====================================================

import React, { useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TextInput,
  TouchableOpacity,
  Alert,
  KeyboardAvoidingView,
  Platform,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { useNavigation } from '@react-navigation/native';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { useUser } from '../context/UserContext';

interface FormData {
  name: string;
  email: string;
  phone: string;
}

export const EditProfileScreen: React.FC = () => {
  const navigation = useNavigation<RootStackNavigationProp<'EditProfile'>>();
  const { user, updateUser } = useUser();

  const [formData, setFormData] = useState<FormData>({
    name: user.name,
    email: user.email,
    phone: user.phone,
  });

  const [errors, setErrors] = useState<Partial<FormData>>({});

  const validateEmail = (email: string): boolean => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  };

  const validatePhone = (phone: string): boolean => {
    const phoneRegex = /^(\+62|62|0)[0-9]{9,12}$/;
    return phoneRegex.test(phone.replace(/[\s-]/g, ''));
  };

  const validateForm = (): boolean => {
    const newErrors: Partial<FormData> = {};

    if (formData.name.trim().length < 3) {
      newErrors.name = 'Name must be at least 3 characters';
    }

    if (!validateEmail(formData.email)) {
      newErrors.email = 'Please enter a valid email address';
    }

    if (!validatePhone(formData.phone)) {
      newErrors.phone = 'Please enter a valid phone number (+62 or 08...)';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSave = () => {
    if (validateForm()) {
      updateUser({
        name: formData.name.trim(),
        email: formData.email.trim(),
        phone: formData.phone.trim(),
      });
      Alert.alert(
        'Success',
        'Profile updated successfully!',
        [
          {
            text: 'OK',
            onPress: () => navigation.goBack(),
          },
        ]
      );
    }
  };

  const handleCancel = () => {
    navigation.goBack();
  };

  const handleAvatarChange = () => {
    Alert.alert(
      'Change Avatar',
      'Avatar picker will be implemented here',
      [{ text: 'OK' }]
    );
  };

  // Get user initials for avatar
  const getInitials = (name: string): string => {
    return name
      .split(' ')
      .map((n) => n[0])
      .join('')
      .toUpperCase()
      .slice(0, 2);
  };

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <KeyboardAvoidingView
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
        style={styles.keyboardView}
      >
        <ScrollView
          style={styles.scrollView}
          contentContainerStyle={styles.scrollContent}
          showsVerticalScrollIndicator={false}
          keyboardShouldPersistTaps="handled"
        >
          {/* Avatar Section */}
          <View style={styles.avatarSection}>
            <View style={styles.avatar}>
              <Text style={styles.avatarText}>{getInitials(formData.name)}</Text>
            </View>
            <TouchableOpacity
              style={styles.changeAvatarButton}
              onPress={handleAvatarChange}
              activeOpacity={0.7}
            >
              <Ionicons name="camera" size={20} color={Colors.primary} />
              <Text style={styles.changeAvatarText}>Change Photo</Text>
            </TouchableOpacity>
          </View>

          {/* Form */}
          <View style={styles.form}>
            {/* Name */}
            <View style={styles.inputGroup}>
              <Text style={styles.label}>Name *</Text>
              <TextInput
                style={[styles.input, errors.name && styles.inputError]}
                value={formData.name}
                onChangeText={(text) =>
                  setFormData({ ...formData, name: text })
                }
                placeholder="Enter your name"
                placeholderTextColor={Colors.textSecondary}
                autoCapitalize="words"
              />
              {errors.name && (
                <Text style={styles.errorText}>{errors.name}</Text>
              )}
            </View>

            {/* Email */}
            <View style={styles.inputGroup}>
              <Text style={styles.label}>Email *</Text>
              <TextInput
                style={[styles.input, errors.email && styles.inputError]}
                value={formData.email}
                onChangeText={(text) =>
                  setFormData({ ...formData, email: text })
                }
                placeholder="Enter your email"
                placeholderTextColor={Colors.textSecondary}
                keyboardType="email-address"
                autoCapitalize="none"
                autoCorrect={false}
              />
              {errors.email && (
                <Text style={styles.errorText}>{errors.email}</Text>
              )}
            </View>

            {/* Phone */}
            <View style={styles.inputGroup}>
              <Text style={styles.label}>Phone *</Text>
              <TextInput
                style={[styles.input, errors.phone && styles.inputError]}
                value={formData.phone}
                onChangeText={(text) =>
                  setFormData({ ...formData, phone: text })
                }
                placeholder="+62 812-3456-7890"
                placeholderTextColor={Colors.textSecondary}
                keyboardType="phone-pad"
              />
              {errors.phone && (
                <Text style={styles.errorText}>{errors.phone}</Text>
              )}
            </View>
          </View>
        </ScrollView>

        {/* Buttons */}
        <View style={styles.buttonContainer}>
          <TouchableOpacity
            style={styles.saveButton}
            onPress={handleSave}
            activeOpacity={0.8}
          >
            <Text style={styles.saveButtonText}>Save Changes</Text>
          </TouchableOpacity>
          <TouchableOpacity
            style={styles.cancelButton}
            onPress={handleCancel}
            activeOpacity={0.8}
          >
            <Text style={styles.cancelButtonText}>Cancel</Text>
          </TouchableOpacity>
        </View>
      </KeyboardAvoidingView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  keyboardView: {
    flex: 1,
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    paddingBottom: 20,
  },
  avatarSection: {
    alignItems: 'center',
    paddingVertical: 32,
    backgroundColor: Colors.card,
    borderBottomWidth: 1,
    borderBottomColor: Colors.border,
  },
  avatar: {
    width: 100,
    height: 100,
    borderRadius: 50,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: 16,
  },
  avatarText: {
    fontSize: 36,
    fontFamily: Fonts.bold,
    color: Colors.card,
  },
  changeAvatarButton: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: 20,
    paddingVertical: 8,
  },
  changeAvatarText: {
    fontSize: 14,
    fontFamily: Fonts.semiBold,
    color: Colors.primary,
    marginLeft: 6,
  },
  form: {
    paddingHorizontal: 16,
    paddingTop: 24,
  },
  inputGroup: {
    marginBottom: 20,
  },
  label: {
    fontSize: 14,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
    marginBottom: 8,
  },
  input: {
    backgroundColor: Colors.card,
    borderWidth: 1,
    borderColor: Colors.border,
    borderRadius: 12,
    paddingHorizontal: 16,
    paddingVertical: 14,
    fontSize: 16,
    fontFamily: Fonts.regular,
    color: Colors.text,
  },
  inputError: {
    borderColor: Colors.error,
  },
  errorText: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.error,
    marginTop: 4,
  },
  buttonContainer: {
    paddingHorizontal: 16,
    paddingVertical: 16,
    paddingBottom: Platform.OS === 'ios' ? 0 : 16,
    backgroundColor: Colors.card,
    borderTopWidth: 1,
    borderTopColor: Colors.border,
  },
  saveButton: {
    backgroundColor: Colors.primary,
    borderRadius: 12,
    paddingVertical: 16,
    alignItems: 'center',
    marginBottom: 12,
  },
  saveButtonText: {
    fontSize: 16,
    fontFamily: Fonts.semiBold,
    color: Colors.card,
  },
  cancelButton: {
    backgroundColor: Colors.background,
    borderRadius: 12,
    paddingVertical: 16,
    alignItems: 'center',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  cancelButtonText: {
    fontSize: 16,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
  },
});


====================================================
FILE: screens/FavoritesScreen.tsx
====================================================

import React, { useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  FlatList,
  RefreshControl,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { PropertyCard, EmptyState } from '../components';
import { useFavorites } from '../context/FavoritesContext';

type FavoritesScreenProps = {
  navigation: RootStackNavigationProp<'Favorites'>;
};

export const FavoritesScreen: React.FC<FavoritesScreenProps> = ({
  navigation,
}) => {
  const [refreshing, setRefreshing] = useState(false);
  const { getFavoriteProperties } = useFavorites();
  const favoriteProperties = getFavoriteProperties();

  const onRefresh = () => {
    setRefreshing(true);
    // Simulate refresh delay
    setTimeout(() => {
      setRefreshing(false);
    }, 1000);
  };

  const handlePropertyPress = (propertyId: string) => {
    navigation.navigate('PropertyDetail', { propertyId });
  };

  const renderHeader = () => (
    <View style={styles.headerContainer}>
      <Text style={styles.title}>My Favorites</Text>
      <Text style={styles.subtitle}>
        {favoriteProperties.length}{' '}
        {favoriteProperties.length === 1 ? 'property' : 'properties'} saved
      </Text>
    </View>
  );

  if (favoriteProperties.length === 0) {
    return (
      <SafeAreaView style={styles.container} edges={['top']}>
        {renderHeader()}
        <EmptyState
          icon="heart-outline"
          title="No Favorites Yet"
          message="Start adding properties you love!"
        />
      </SafeAreaView>
    );
  }

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <FlatList
        data={favoriteProperties}
        keyExtractor={(item) => item.id}
        renderItem={({ item, index }) => (
          <PropertyCard
            property={item}
            onPress={() => handlePropertyPress(item.id)}
            index={index}
          />
        )}
        ListHeaderComponent={renderHeader}
        contentContainerStyle={styles.contentContainer}
        showsVerticalScrollIndicator={false}
        refreshControl={
          <RefreshControl
            refreshing={refreshing}
            onRefresh={onRefresh}
            tintColor={Colors.primary}
            colors={[Colors.primary]}
          />
        }
      />
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  contentContainer: {
    paddingBottom: 20,
  },
  headerContainer: {
    paddingHorizontal: 16,
    paddingTop: 20,
    paddingBottom: 24,
  },
  title: {
    fontSize: 28,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginBottom: 8,
  },
  subtitle: {
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.regular,
    color: Colors.text.secondary,
  },
});


====================================================
FILE: screens/HomeScreen.tsx
====================================================

import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  StyleSheet,
  FlatList,
  RefreshControl,
  TouchableOpacity,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { PropertyCard, LoadingSpinner, EmptyState, ComparisonButton } from '../components';
import { mockProperties } from '../data';
import { useFavorites } from '../context/FavoritesContext';

type HomeScreenProps = {
  navigation: RootStackNavigationProp<'Home'>;
};

const getGreeting = (): string => {
  const hour = new Date().getHours();

  if (hour >= 5 && hour < 12) {
    return 'Good Morning ';
  } else if (hour >= 12 && hour < 18) {
    return 'Good Afternoon ';
  } else if (hour >= 18 && hour < 22) {
    return 'Good Evening ';
  } else {
    return 'Good Night ';
  }
};

export const HomeScreen: React.FC<HomeScreenProps> = ({ navigation }) => {
  const [refreshing, setRefreshing] = useState(false);
  const [loading, setLoading] = useState(true);
  const { favorites } = useFavorites();

  useEffect(() => {
    // Show loading spinner on initial mount
    setTimeout(() => {
      setLoading(false);
    }, 1000);
  }, []);

  const onRefresh = () => {
    setRefreshing(true);
    // Simulate refresh delay
    setTimeout(() => {
      setRefreshing(false);
    }, 1000);
  };

  const handlePropertyPress = (property: typeof mockProperties[0]) => {
    navigation.navigate('PropertyDetail', { property });
  };

  const renderHeader = () => (
    <View style={styles.headerContainer}>
      <View style={styles.headerRow}>
        {/* Profile Button - Left Side */}
        <TouchableOpacity
          style={styles.profileButton}
          onPress={() => navigation.navigate('Profile')}
          activeOpacity={0.7}
        >
          <Ionicons name="person-circle-outline" size={32} color={Colors.primary} />
        </TouchableOpacity>

        {/* Text Content - Center */}
        <View style={styles.headerTextContainer}>
          <Text style={styles.title}>{getGreeting()}</Text>
          <Text style={styles.subtitle}>
            Explore the best properties in Indonesia
          </Text>
        </View>

        {/* Action Buttons - Right Side */}
        <View style={styles.buttonsContainer}>
          <TouchableOpacity
            style={styles.iconButton}
            onPress={() => navigation.navigate('Map')}
            activeOpacity={0.7}
          >
            <Ionicons name="map-outline" size={24} color={Colors.primary} />
          </TouchableOpacity>
          <TouchableOpacity
            style={styles.iconButton}
            onPress={() => navigation.navigate('Favorites')}
            activeOpacity={0.7}
          >
            <Ionicons name="heart-outline" size={24} color={Colors.primary} />
            {favorites.length > 0 && (
              <View style={styles.badge}>
                <Text style={styles.badgeText}>{favorites.length}</Text>
              </View>
            )}
          </TouchableOpacity>
          <TouchableOpacity
            style={styles.iconButton}
            onPress={() => navigation.navigate('Search')}
            activeOpacity={0.7}
          >
            <Ionicons name="search-outline" size={24} color={Colors.primary} />
          </TouchableOpacity>
        </View>
      </View>
    </View>
  );

  if (loading) {
    return (
      <SafeAreaView style={styles.container} edges={['top']}>
        {renderHeader()}
        <LoadingSpinner message="Loading properties..." />
      </SafeAreaView>
    );
  }

  if (mockProperties.length === 0) {
    return (
      <SafeAreaView style={styles.container} edges={['top']}>
        {renderHeader()}
        <EmptyState
          icon="home-outline"
          title="No Properties Available"
          message="Check back later for new property listings"
        />
      </SafeAreaView>
    );
  }

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <FlatList
        data={mockProperties}
        keyExtractor={(item) => item.id}
        renderItem={({ item, index }) => (
          <PropertyCard
            property={item}
            onPress={() => handlePropertyPress(item)}
            index={index}
          />
        )}
        ListHeaderComponent={renderHeader}
        contentContainerStyle={styles.contentContainer}
        showsVerticalScrollIndicator={false}
        refreshControl={
          <RefreshControl
            refreshing={refreshing}
            onRefresh={onRefresh}
            tintColor={Colors.primary}
            colors={[Colors.primary]}
          />
        }
      />
      <ComparisonButton />
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  contentContainer: {
    paddingBottom: 20,
  },
  headerContainer: {
    paddingHorizontal: 16,
    paddingTop: 20,
    paddingBottom: 24,
  },
  headerRow: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    justifyContent: 'space-between',
  },
  profileButton: {
    marginRight: 12,
    marginTop: 4,
  },
  headerTextContainer: {
    flex: 1,
    marginRight: 16,
  },
  title: {
    fontSize: 28,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginBottom: 8,
  },
  subtitle: {
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.regular,
    color: Colors.text.secondary,
  },
  buttonsContainer: {
    flexDirection: 'row',
    gap: 8,
  },
  iconButton: {
    width: 44,
    height: 44,
    borderRadius: 22,
    backgroundColor: Colors.surface,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: Colors.black,
    shadowOffset: {
      width: 0,
      height: 1,
    },
    shadowOpacity: 0.05,
    shadowRadius: 2,
    elevation: 2,
    position: 'relative',
  },
  badge: {
    position: 'absolute',
    top: -4,
    right: -4,
    backgroundColor: '#FF3B30',
    borderRadius: 10,
    minWidth: 20,
    height: 20,
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 4,
  },
  badgeText: {
    color: Colors.white,
    fontSize: 12,
    fontWeight: Fonts.weight.bold,
  },
});


====================================================
FILE: screens/index.ts
====================================================

export { HomeScreen } from './HomeScreen';
export { PropertyDetailScreen } from './PropertyDetailScreen';
export { SearchScreen } from './SearchScreen';
export { FavoritesScreen } from './FavoritesScreen';
export { ProfileScreen } from './ProfileScreen';
export { EditProfileScreen } from './EditProfileScreen';
export { SettingsScreen } from './SettingsScreen';
export { AboutScreen } from './AboutScreen';
export { TermsScreen } from './TermsScreen';
export { PrivacyScreen } from './PrivacyScreen';
export { ComparisonScreen } from './ComparisonScreen';
export { MapScreen } from './MapScreen';
export { NearbyPropertiesScreen } from './NearbyPropertiesScreen';


====================================================
FILE: screens/MapScreen.tsx
====================================================

import React, { useState, useRef, useEffect } from 'react';
import {
  View,
  StyleSheet,
  SafeAreaView,
  Platform,
  ScrollView,
  Dimensions,
  TouchableOpacity,
  Text,
} from 'react-native';
import MapView, { PROVIDER_GOOGLE, Region } from 'react-native-maps';
import { StackScreenProps } from '@react-navigation/stack';
import { Ionicons } from '@expo/vector-icons';
import { RootStackParamList } from '../types/navigation';
import { Property } from '../types';
import { COLORS } from '../constants/colors';
import { mockProperties } from '../data/mockProperties';
import { MapPropertyMarker } from '../components/MapPropertyMarker';
import { MapPropertyCard } from '../components/MapPropertyCard';
import { MapControls } from '../components/MapControls';
import { LocationPermissionPrompt } from '../components/LocationPermissionPrompt';
import { useLocation } from '../context/LocationContext';
import { getRegionForProperties } from '../utils/locationHelpers';

type Props = StackScreenProps<RootStackParamList, 'Map'>;

const { height } = Dimensions.get('window');
const BOTTOM_SHEET_HEIGHT = 300;

export const MapScreen: React.FC<Props> = ({ navigation }) => {
  const mapRef = useRef<MapView>(null);
  const scrollRef = useRef<ScrollView>(null);

  const { userLocation, permission, requestPermission } = useLocation();

  const [selectedProperty, setSelectedProperty] = useState<Property | null>(null);
  const [properties] = useState<Property[]>(mockProperties);
  const [showPermissionPrompt, setShowPermissionPrompt] = useState(false);
  const [mapRegion, setMapRegion] = useState<Region>(
    getRegionForProperties(mockProperties)
  );

  useEffect(() => {
    // Show permission prompt if not granted
    if (permission === 'denied') {
      setShowPermissionPrompt(true);
    }
  }, [permission]);

  const handleMarkerPress = (property: Property) => {
    setSelectedProperty(property);

    // Animate map to selected property
    mapRef.current?.animateToRegion(
      {
        latitude: property.latitude,
        longitude: property.longitude,
        latitudeDelta: 0.02,
        longitudeDelta: 0.02,
      },
      350
    );
  };

  const handlePropertyPress = (property: Property) => {
    navigation.navigate('PropertyDetail', { property });
  };

  const handleZoomIn = () => {
    const newRegion = {
      ...mapRegion,
      latitudeDelta: mapRegion.latitudeDelta / 2,
      longitudeDelta: mapRegion.longitudeDelta / 2,
    };
    mapRef.current?.animateToRegion(newRegion, 300);
    setMapRegion(newRegion);
  };

  const handleZoomOut = () => {
    const newRegion = {
      ...mapRegion,
      latitudeDelta: mapRegion.latitudeDelta * 2,
      longitudeDelta: mapRegion.longitudeDelta * 2,
    };
    mapRef.current?.animateToRegion(newRegion, 300);
    setMapRegion(newRegion);
  };

  const handleMyLocation = () => {
    if (userLocation) {
      mapRef.current?.animateToRegion(
        {
          latitude: userLocation.latitude,
          longitude: userLocation.longitude,
          latitudeDelta: 0.05,
          longitudeDelta: 0.05,
        },
        500
      );
    } else {
      setShowPermissionPrompt(true);
    }
  };

  const handleListView = () => {
    navigation.navigate('NearbyProperties');
  };

  const handleRequestPermission = async () => {
    setShowPermissionPrompt(false);
    await requestPermission();
  };

  return (
    <View style={styles.container}>
      <MapView
        ref={mapRef}
        provider={PROVIDER_GOOGLE}
        style={styles.map}
        initialRegion={mapRegion}
        onRegionChangeComplete={setMapRegion}
        showsUserLocation={permission === 'granted'}
        showsMyLocationButton={false}
        showsCompass={false}
        toolbarEnabled={false}
      >
        {properties.map((property) => (
          <MapPropertyMarker
            key={property.id}
            property={property}
            isSelected={selectedProperty?.id === property.id}
            onPress={() => handleMarkerPress(property)}
          />
        ))}
      </MapView>

      {/* Header */}
      <SafeAreaView style={styles.header}>
        <TouchableOpacity
          style={styles.backButton}
          onPress={() => navigation.goBack()}
        >
          <Ionicons name="arrow-back" size={24} color={COLORS.text} />
        </TouchableOpacity>

        <View style={styles.headerContent}>
          <Text style={styles.headerTitle}>Peta Properti</Text>
          <Text style={styles.headerSubtitle}>
            {properties.length} properti tersedia
          </Text>
        </View>
      </SafeAreaView>

      {/* Map Controls */}
      <MapControls
        onZoomIn={handleZoomIn}
        onZoomOut={handleZoomOut}
        onMyLocation={handleMyLocation}
        onListView={handleListView}
        hasLocationPermission={permission === 'granted'}
      />

      {/* Bottom Sheet with Selected Property */}
      {selectedProperty && (
        <View style={styles.bottomSheet}>
          <View style={styles.sheetHandle} />
          <ScrollView
            ref={scrollRef}
            horizontal
            pagingEnabled
            showsHorizontalScrollIndicator={false}
            contentContainerStyle={styles.sheetContent}
          >
            <MapPropertyCard
              property={selectedProperty}
              onPress={() => handlePropertyPress(selectedProperty)}
            />
          </ScrollView>
        </View>
      )}

      {/* Location Permission Prompt */}
      <LocationPermissionPrompt
        visible={showPermissionPrompt}
        onRequestPermission={handleRequestPermission}
        onDismiss={() => setShowPermissionPrompt(false)}
      />
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  map: {
    width: '100%',
    height: '100%',
  },
  header: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    backgroundColor: COLORS.white,
    paddingHorizontal: 16,
    paddingVertical: 12,
    flexDirection: 'row',
    alignItems: 'center',
    shadowColor: COLORS.text,
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 4,
  },
  backButton: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: COLORS.white,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: 12,
  },
  headerContent: {
    flex: 1,
  },
  headerTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    color: COLORS.text,
  },
  headerSubtitle: {
    fontSize: 12,
    color: COLORS.textLight,
    marginTop: 2,
  },
  bottomSheet: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    backgroundColor: COLORS.white,
    borderTopLeftRadius: 20,
    borderTopRightRadius: 20,
    paddingTop: 12,
    paddingBottom: Platform.OS === 'ios' ? 34 : 20,
    shadowColor: COLORS.text,
    shadowOffset: {
      width: 0,
      height: -2,
    },
    shadowOpacity: 0.15,
    shadowRadius: 8,
    elevation: 8,
  },
  sheetHandle: {
    width: 40,
    height: 4,
    backgroundColor: COLORS.border,
    borderRadius: 2,
    alignSelf: 'center',
    marginBottom: 16,
  },
  sheetContent: {
    paddingHorizontal: 20,
  },
});


====================================================
FILE: screens/NearbyPropertiesScreen.tsx
====================================================

import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  StyleSheet,
  FlatList,
  SafeAreaView,
  TouchableOpacity,
  ActivityIndicator,
} from 'react-native';
import { StackScreenProps } from '@react-navigation/stack';
import { Ionicons } from '@expo/vector-icons';
import { RootStackParamList } from '../types/navigation';
import { Property } from '../types';
import { COLORS } from '../constants/colors';
import { mockProperties } from '../data/mockProperties';
import { PropertyCard } from '../components/PropertyCard';
import { EmptyState } from '../components/EmptyState';
import { LocationPermissionPrompt } from '../components/LocationPermissionPrompt';
import { useLocation } from '../context/LocationContext';
import { sortPropertiesByDistance, calculateDistance } from '../utils/locationHelpers';

type Props = StackScreenProps<RootStackParamList, 'NearbyProperties'>;

export const NearbyPropertiesScreen: React.FC<Props> = ({ navigation }) => {
  const { userLocation, permission, requestPermission } = useLocation();

  const [properties, setProperties] = useState<Property[]>([]);
  const [loading, setLoading] = useState(true);
  const [showPermissionPrompt, setShowPermissionPrompt] = useState(false);
  const [maxDistance, setMaxDistance] = useState<number>(10); // km

  useEffect(() => {
    loadNearbyProperties();
  }, [userLocation, maxDistance]);

  const loadNearbyProperties = () => {
    setLoading(true);

    if (!userLocation) {
      // If no location, show all properties unsorted
      setProperties(mockProperties);
      setLoading(false);
      if (permission === 'denied') {
        setShowPermissionPrompt(true);
      }
      return;
    }

    // Sort properties by distance
    const sorted = sortPropertiesByDistance(
      mockProperties,
      userLocation.latitude,
      userLocation.longitude
    );

    // Filter by max distance if needed
    const filtered = sorted.filter((property) => {
      const distance = calculateDistance(
        userLocation.latitude,
        userLocation.longitude,
        property.latitude,
        property.longitude
      );
      return distance <= maxDistance;
    });

    setProperties(filtered);
    setLoading(false);
  };

  const handlePropertyPress = (property: Property) => {
    navigation.navigate('PropertyDetail', { property });
  };

  const handleRequestPermission = async () => {
    setShowPermissionPrompt(false);
    await requestPermission();
  };

  const handleMapView = () => {
    navigation.navigate('Map');
  };

  const renderDistanceFilter = () => {
    const distances = [5, 10, 20, 50];

    return (
      <View style={styles.filterContainer}>
        <Text style={styles.filterLabel}>Radius:</Text>
        <View style={styles.filterButtons}>
          {distances.map((distance) => (
            <TouchableOpacity
              key={distance}
              style={[
                styles.filterButton,
                maxDistance === distance && styles.filterButtonActive,
              ]}
              onPress={() => setMaxDistance(distance)}
            >
              <Text
                style={[
                  styles.filterButtonText,
                  maxDistance === distance && styles.filterButtonTextActive,
                ]}
              >
                {distance} km
              </Text>
            </TouchableOpacity>
          ))}
        </View>
      </View>
    );
  };

  const renderHeader = () => {
    return (
      <View style={styles.headerContent}>
        {userLocation && renderDistanceFilter()}

        <View style={styles.resultInfo}>
          <Ionicons name="location" size={20} color={COLORS.primary} />
          <Text style={styles.resultText}>
            {properties.length} properti terdekat
            {!userLocation && ' (Izinkan akses lokasi untuk filter jarak)'}
          </Text>
        </View>

        {!userLocation && (
          <TouchableOpacity
            style={styles.enableLocationButton}
            onPress={() => setShowPermissionPrompt(true)}
          >
            <Ionicons name="location-outline" size={20} color={COLORS.white} />
            <Text style={styles.enableLocationText}>Aktifkan Lokasi</Text>
          </TouchableOpacity>
        )}
      </View>
    );
  };

  if (loading) {
    return (
      <SafeAreaView style={styles.container}>
        <View style={styles.header}>
          <TouchableOpacity
            style={styles.backButton}
            onPress={() => navigation.goBack()}
          >
            <Ionicons name="arrow-back" size={24} color={COLORS.text} />
          </TouchableOpacity>
          <Text style={styles.headerTitle}>Properti Terdekat</Text>
        </View>
        <View style={styles.loadingContainer}>
          <ActivityIndicator size="large" color={COLORS.primary} />
          <Text style={styles.loadingText}>Memuat properti...</Text>
        </View>
      </SafeAreaView>
    );
  }

  return (
    <SafeAreaView style={styles.container}>
      <View style={styles.header}>
        <TouchableOpacity
          style={styles.backButton}
          onPress={() => navigation.goBack()}
        >
          <Ionicons name="arrow-back" size={24} color={COLORS.text} />
        </TouchableOpacity>
        <Text style={styles.headerTitle}>Properti Terdekat</Text>
        <TouchableOpacity style={styles.mapButton} onPress={handleMapView}>
          <Ionicons name="map" size={24} color={COLORS.primary} />
        </TouchableOpacity>
      </View>

      <FlatList
        data={properties}
        renderItem={({ item }) => (
          <PropertyCard
            property={item}
            onPress={() => handlePropertyPress(item)}
          />
        )}
        keyExtractor={(item) => item.id}
        contentContainerStyle={styles.listContent}
        ListHeaderComponent={renderHeader}
        ListEmptyComponent={
          <EmptyState
            icon="location-outline"
            title="Tidak ada properti terdekat"
            message={`Tidak ada properti dalam radius ${maxDistance} km dari lokasi Anda.`}
          />
        }
        showsVerticalScrollIndicator={false}
      />

      <LocationPermissionPrompt
        visible={showPermissionPrompt}
        onRequestPermission={handleRequestPermission}
        onDismiss={() => setShowPermissionPrompt(false)}
      />
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.background,
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: 16,
    paddingVertical: 16,
    backgroundColor: COLORS.white,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  backButton: {
    marginRight: 16,
  },
  headerTitle: {
    flex: 1,
    fontSize: 20,
    fontWeight: 'bold',
    color: COLORS.text,
  },
  mapButton: {
    marginLeft: 16,
  },
  loadingContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  loadingText: {
    marginTop: 12,
    fontSize: 16,
    color: COLORS.textLight,
  },
  listContent: {
    padding: 16,
  },
  headerContent: {
    marginBottom: 16,
  },
  filterContainer: {
    marginBottom: 16,
  },
  filterLabel: {
    fontSize: 14,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: 8,
  },
  filterButtons: {
    flexDirection: 'row',
    gap: 8,
  },
  filterButton: {
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
    backgroundColor: COLORS.white,
    borderWidth: 1,
    borderColor: COLORS.border,
  },
  filterButtonActive: {
    backgroundColor: COLORS.primary,
    borderColor: COLORS.primary,
  },
  filterButtonText: {
    fontSize: 14,
    fontWeight: '600',
    color: COLORS.text,
  },
  filterButtonTextActive: {
    color: COLORS.white,
  },
  resultInfo: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 12,
    backgroundColor: `${COLORS.primary}10`,
    borderRadius: 12,
    gap: 8,
    marginBottom: 12,
  },
  resultText: {
    flex: 1,
    fontSize: 14,
    color: COLORS.text,
  },
  enableLocationButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: COLORS.primary,
    paddingVertical: 12,
    paddingHorizontal: 20,
    borderRadius: 12,
    gap: 8,
  },
  enableLocationText: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.white,
  },
});


====================================================
FILE: screens/PrivacyScreen.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, ScrollView } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Colors, Fonts } from '../constants';

export const PrivacyScreen: React.FC = () => {
  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={styles.content}
        showsVerticalScrollIndicator={false}
      >
        <Text style={styles.title}>Privacy Policy</Text>
        <Text style={styles.lastUpdated}>Last updated: November 2024</Text>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>1. Introduction</Text>
          <Text style={styles.paragraph}>
            At Rent App, we take your privacy seriously. This Privacy Policy explains
            how we collect, use, disclose, and safeguard your information when you use
            our mobile application. Please read this privacy policy carefully.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>2. Information We Collect</Text>
          <Text style={styles.paragraph}>
            We collect information that you provide directly to us, including:
          </Text>
          <Text style={styles.bulletPoint}> Name and contact information</Text>
          <Text style={styles.bulletPoint}> Email address and phone number</Text>
          <Text style={styles.bulletPoint}> Profile information and preferences</Text>
          <Text style={styles.bulletPoint}> Search history and saved properties</Text>
          <Text style={styles.bulletPoint}> Communication with property owners</Text>
          <Text style={styles.paragraph}>
            We also automatically collect certain information when you use our app:
          </Text>
          <Text style={styles.bulletPoint}> Device information and identifiers</Text>
          <Text style={styles.bulletPoint}> Usage data and analytics</Text>
          <Text style={styles.bulletPoint}> Location data (with your permission)</Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>3. How We Use Your Information</Text>
          <Text style={styles.paragraph}>
            We use your information to:
          </Text>
          <Text style={styles.bulletPoint}> Provide and improve our services</Text>
          <Text style={styles.bulletPoint}> Connect you with property owners</Text>
          <Text style={styles.bulletPoint}> Send notifications about new listings</Text>
          <Text style={styles.bulletPoint}> Personalize your experience</Text>
          <Text style={styles.bulletPoint}> Analyze usage patterns and trends</Text>
          <Text style={styles.bulletPoint}> Communicate important updates</Text>
          <Text style={styles.bulletPoint}> Prevent fraud and ensure security</Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>4. Information Sharing</Text>
          <Text style={styles.paragraph}>
            We do not sell your personal information. We may share your information
            with:
          </Text>
          <Text style={styles.bulletPoint}> Property owners when you contact them</Text>
          <Text style={styles.bulletPoint}> Service providers who assist our operations</Text>
          <Text style={styles.bulletPoint}> Law enforcement when required by law</Text>
          <Text style={styles.paragraph}>
            All third parties are obligated to protect your information and use it only
            for the purposes we specify.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>5. Data Security</Text>
          <Text style={styles.paragraph}>
            We implement appropriate technical and organizational measures to protect
            your personal information against unauthorized access, alteration,
            disclosure, or destruction. However, no method of transmission over the
            Internet is 100% secure, and we cannot guarantee absolute security.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>6. Your Rights</Text>
          <Text style={styles.paragraph}>
            You have the right to:
          </Text>
          <Text style={styles.bulletPoint}> Access your personal information</Text>
          <Text style={styles.bulletPoint}> Correct inaccurate data</Text>
          <Text style={styles.bulletPoint}> Request deletion of your data</Text>
          <Text style={styles.bulletPoint}> Opt-out of marketing communications</Text>
          <Text style={styles.bulletPoint}> Export your data</Text>
          <Text style={styles.paragraph}>
            To exercise these rights, please contact us at support@rentapp.com.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>7. Cookies and Tracking</Text>
          <Text style={styles.paragraph}>
            We use cookies and similar tracking technologies to collect usage
            information and improve our services. You can control cookies through your
            device settings, but disabling them may limit functionality.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>8. Children's Privacy</Text>
          <Text style={styles.paragraph}>
            Our service is not intended for users under the age of 18. We do not
            knowingly collect personal information from children. If you believe we have
            collected information from a child, please contact us immediately.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>9. Changes to This Policy</Text>
          <Text style={styles.paragraph}>
            We may update this Privacy Policy from time to time. We will notify you of
            any changes by posting the new policy on this page and updating the "Last
            updated" date. Your continued use of the app constitutes acceptance of the
            updated policy.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>10. Contact Us</Text>
          <Text style={styles.paragraph}>
            If you have questions or concerns about this Privacy Policy, please contact
            us:
          </Text>
          <Text style={styles.contactText}>Email: support@rentapp.com</Text>
          <Text style={styles.contactText}>Website: www.rentapp.com</Text>
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  content: {
    paddingHorizontal: 20,
    paddingVertical: 24,
  },
  title: {
    fontSize: 28,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginBottom: 8,
  },
  lastUpdated: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 24,
  },
  section: {
    marginBottom: 24,
  },
  sectionTitle: {
    fontSize: 18,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
    marginBottom: 12,
  },
  paragraph: {
    fontSize: 15,
    fontFamily: Fonts.regular,
    color: Colors.text,
    lineHeight: 24,
    marginBottom: 12,
  },
  bulletPoint: {
    fontSize: 15,
    fontFamily: Fonts.regular,
    color: Colors.text,
    lineHeight: 24,
    marginBottom: 6,
    paddingLeft: 8,
  },
  contactText: {
    fontSize: 15,
    fontFamily: Fonts.medium,
    color: Colors.primary,
    marginTop: 4,
  },
  bottomSpacing: {
    height: 20,
  },
});


====================================================
FILE: screens/ProfileScreen.tsx
====================================================

import React from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TouchableOpacity,
  Alert,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { useNavigation } from '@react-navigation/native';
import { RootStackNavigationProp } from '../types';
import { Colors, Fonts } from '../constants';
import { useUser } from '../context/UserContext';
import { useFavorites } from '../context/FavoritesContext';
import { MenuButton } from '../components/MenuButton';

export const ProfileScreen: React.FC = () => {
  const navigation = useNavigation<RootStackNavigationProp<'Profile'>>();
  const { user } = useUser();
  const { favorites } = useFavorites();

  // Get user initials for avatar
  const getInitials = (name: string): string => {
    return name
      .split(' ')
      .map((n) => n[0])
      .join('')
      .toUpperCase()
      .slice(0, 2);
  };

  // Format joined date
  const formatJoinedDate = (date: Date): string => {
    const now = new Date();
    const diff = now.getTime() - date.getTime();
    const months = Math.floor(diff / (1000 * 60 * 60 * 24 * 30));

    if (months === 0) {
      return 'Joined this month';
    } else if (months === 1) {
      return 'Member since 1 month ago';
    } else {
      return `Member since ${months} months ago`;
    }
  };

  const handleEditProfile = () => {
    navigation.navigate('EditProfile');
  };

  const handleSettings = () => {
    navigation.navigate('Settings');
  };

  const handleAbout = () => {
    navigation.navigate('About');
  };

  const handleTerms = () => {
    navigation.navigate('Terms');
  };

  const handlePrivacy = () => {
    navigation.navigate('Privacy');
  };

  const handleLogout = () => {
    Alert.alert(
      'Logout',
      'Are you sure you want to logout?',
      [
        {
          text: 'Cancel',
          style: 'cancel',
        },
        {
          text: 'Logout',
          style: 'destructive',
          onPress: () => {
            console.log('User logged out');
            Alert.alert('Logged Out', 'You have been logged out successfully');
          },
        },
      ]
    );
  };

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        showsVerticalScrollIndicator={false}
      >
        {/* Header Section */}
        <View style={styles.header}>
          {/* Avatar */}
          <View style={styles.avatarContainer}>
            {user.avatar ? (
              <View style={styles.avatar}>
                {/* In real app, would use <Image source={{ uri: user.avatar }} /> */}
                <Text style={styles.avatarText}>{getInitials(user.name)}</Text>
              </View>
            ) : (
              <View style={styles.avatar}>
                <Text style={styles.avatarText}>{getInitials(user.name)}</Text>
              </View>
            )}
            {/* Edit button overlay */}
            <TouchableOpacity
              style={styles.editAvatarButton}
              onPress={handleEditProfile}
              activeOpacity={0.7}
            >
              <Ionicons name="camera" size={16} color={Colors.card} />
            </TouchableOpacity>
          </View>

          {/* User Info */}
          <Text style={styles.userName}>{user.name}</Text>
          <Text style={styles.userEmail}>{user.email}</Text>
          <Text style={styles.memberSince}>{formatJoinedDate(user.joinedDate)}</Text>
        </View>

        {/* Stats Cards */}
        <View style={styles.statsContainer}>
          <View style={styles.statCard}>
            <Ionicons name="heart" size={32} color={Colors.primary} />
            <Text style={styles.statNumber}>{favorites.length}</Text>
            <Text style={styles.statLabel}>Saved Properties</Text>
          </View>
          <View style={styles.statCard}>
            <Ionicons name="eye" size={32} color={Colors.primary} />
            <Text style={styles.statNumber}>{user.viewedProperties}</Text>
            <Text style={styles.statLabel}>Viewed Properties</Text>
          </View>
        </View>

        {/* Menu Items */}
        <View style={styles.menuContainer}>
          <MenuButton
            icon="person-outline"
            label="Edit Profile"
            onPress={handleEditProfile}
          />
          <MenuButton
            icon="settings-outline"
            label="Settings"
            onPress={handleSettings}
          />
          <MenuButton
            icon="information-circle-outline"
            label="About"
            onPress={handleAbout}
          />
          <MenuButton
            icon="document-text-outline"
            label="Terms & Conditions"
            onPress={handleTerms}
          />
          <MenuButton
            icon="shield-checkmark-outline"
            label="Privacy Policy"
            onPress={handlePrivacy}
          />
          <MenuButton
            icon="log-out-outline"
            label="Logout"
            onPress={handleLogout}
            color={Colors.error}
            showChevron={false}
          />
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  header: {
    alignItems: 'center',
    paddingVertical: 32,
    paddingHorizontal: 20,
    backgroundColor: Colors.card,
  },
  avatarContainer: {
    position: 'relative',
    marginBottom: 16,
  },
  avatar: {
    width: 100,
    height: 100,
    borderRadius: 50,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 3,
    borderColor: Colors.card,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 8,
    elevation: 4,
  },
  avatarText: {
    fontSize: 36,
    fontFamily: Fonts.bold,
    color: Colors.card,
  },
  editAvatarButton: {
    position: 'absolute',
    bottom: 0,
    right: 0,
    width: 32,
    height: 32,
    borderRadius: 16,
    backgroundColor: Colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 2,
    borderColor: Colors.card,
  },
  userName: {
    fontSize: 24,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginBottom: 4,
  },
  userEmail: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 8,
  },
  memberSince: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
  },
  statsContainer: {
    flexDirection: 'row',
    paddingHorizontal: 16,
    paddingVertical: 20,
    gap: 12,
  },
  statCard: {
    flex: 1,
    backgroundColor: Colors.card,
    borderRadius: 12,
    padding: 20,
    alignItems: 'center',
    borderWidth: 1,
    borderColor: Colors.border,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.05,
    shadowRadius: 4,
    elevation: 2,
  },
  statNumber: {
    fontSize: 28,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginTop: 8,
    marginBottom: 4,
  },
  statLabel: {
    fontSize: 12,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    textAlign: 'center',
  },
  menuContainer: {
    marginHorizontal: 16,
    marginTop: 8,
    borderRadius: 12,
    overflow: 'hidden',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  bottomSpacing: {
    height: 32,
  },
});


====================================================
FILE: screens/PropertyDetailScreen.tsx
====================================================

import React, { useRef, useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TouchableOpacity,
  Animated,
  Dimensions,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { LinearGradient } from 'expo-linear-gradient';
import { Ionicons } from '@expo/vector-icons';
import MapView, { Marker, PROVIDER_GOOGLE } from 'react-native-maps';
import { RootStackNavigationProp, RootStackRouteProp } from '../types';
import { Colors, Fonts } from '../constants';
import { mockProperties } from '../data';
import { useFavorites } from '../context/FavoritesContext';
import { useComparison } from '../context/ComparisonContext';
import { useLocation } from '../context/LocationContext';
import { ImageCarousel, ImageThumbnailGrid, ImageViewerModal, OwnerCard, ContactOwnerModal } from '../components';
import { calculateDistance, formatDistance } from '../utils/locationHelpers';

const { width } = Dimensions.get('window');

type PropertyDetailScreenProps = {
  navigation: RootStackNavigationProp<'PropertyDetail'>;
  route: RootStackRouteProp<'PropertyDetail'>;
};

export const PropertyDetailScreen: React.FC<PropertyDetailScreenProps> = ({
  navigation,
  route,
}) => {
  const { property } = route.params;
  const { userLocation } = useLocation();
  const { isFavorite, toggleFavorite } = useFavorites();
  const { isInComparison, addToComparison, removeFromComparison } =
    useComparison();
  const heartScaleAnim = useRef(new Animated.Value(1)).current;
  const [currentImageIndex, setCurrentImageIndex] = useState(0);
  const [fullscreenVisible, setFullscreenVisible] = useState(false);
  const [contactModalVisible, setContactModalVisible] = useState(false);

  if (!property) {
    return (
      <SafeAreaView style={styles.errorContainer}>
        <Text style={styles.errorText}>Property not found</Text>
        <TouchableOpacity
          style={styles.backButton}
          onPress={() => navigation.goBack()}
        >
          <Text style={styles.backButtonText}>Go Back</Text>
        </TouchableOpacity>
      </SafeAreaView>
    );
  }

  const formatPrice = (price: number): string => {
    return `Rp ${price.toLocaleString('id-ID')}`;
  };

  const handleShare = () => {
    console.log('Share property:', property.id);
  };

  const handleContact = () => {
    setContactModalVisible(true);
  };

  const handleToggleFavorite = () => {
    toggleFavorite(property.id);
    const favorited = isFavorite(property.id);
    console.log(favorited ? 'Removed from favorites' : 'Added to favorites');

    // Animate heart
    Animated.sequence([
      Animated.spring(heartScaleAnim, {
        toValue: 1.4,
        useNativeDriver: true,
      }),
      Animated.spring(heartScaleAnim, {
        toValue: 1,
        useNativeDriver: true,
      }),
    ]).start();
  };

  const handleToggleComparison = () => {
    if (!property) return;

    if (isInComparison(property.id)) {
      removeFromComparison(property.id);
    } else {
      addToComparison(property);
    }
  };

  const favorited = isFavorite(property.id);
  const inComparison = property ? isInComparison(property.id) : false;

  // Calculate distance from user location
  const distance = userLocation
    ? calculateDistance(
        userLocation.latitude,
        userLocation.longitude,
        property.latitude,
        property.longitude
      )
    : null;

  const handleImagePress = (index: number) => {
    setCurrentImageIndex(index);
    setFullscreenVisible(true);
  };

  const handleThumbnailPress = (index: number) => {
    setCurrentImageIndex(index);
  };

  return (
    <View style={styles.container}>
      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>
        {/* Image Carousel */}
        <View style={styles.carouselContainer}>
          <ImageCarousel
            images={property.imageUrls}
            onImagePress={handleImagePress}
            currentIndex={currentImageIndex}
          />

          {/* Gradient Overlay for Buttons */}
          <LinearGradient
            colors={['rgba(0,0,0,0.4)', 'transparent']}
            style={styles.buttonGradient}
          />

          {/* Back Button */}
          <TouchableOpacity
            style={styles.backBtn}
            onPress={() => navigation.goBack()}
          >
            <Ionicons name="arrow-back" size={24} color="white" />
          </TouchableOpacity>

          {/* Favorite Button */}
          <TouchableOpacity
            style={styles.favoriteBtn}
            onPress={handleToggleFavorite}
            activeOpacity={0.7}
          >
            <Animated.View style={{ transform: [{ scale: heartScaleAnim }] }}>
              <Ionicons
                name={favorited ? 'heart' : 'heart-outline'}
                size={28}
                color={favorited ? '#FF3B30' : 'white'}
              />
            </Animated.View>
          </TouchableOpacity>

          {/* Compare Button */}
          <TouchableOpacity
            style={styles.compareBtn}
            onPress={handleToggleComparison}
            activeOpacity={0.7}
          >
            <Ionicons
              name={inComparison ? 'checkmark-circle' : 'git-compare-outline'}
              size={24}
              color={inComparison ? Colors.primary : 'white'}
            />
          </TouchableOpacity>

          {/* Share Button */}
          <TouchableOpacity style={styles.shareBtn} onPress={handleShare}>
            <Ionicons name="share-social-outline" size={24} color="white" />
          </TouchableOpacity>
        </View>

        {/* Thumbnail Grid */}
        <ImageThumbnailGrid
          images={property.imageUrls}
          onThumbnailPress={handleThumbnailPress}
          selectedIndex={currentImageIndex}
        />

        {/* Content Section */}
        <View style={styles.contentContainer}>
          {/* Property Type Badge */}
          <View style={styles.typeBadge}>
            <Text style={styles.typeBadgeText}>
              {property.type.toUpperCase()}
            </Text>
          </View>

          {/* Title */}
          <Text style={styles.title}>{property.title}</Text>

          {/* Location */}
          <View style={styles.locationRow}>
            <Ionicons
              name="location-outline"
              size={16}
              color={Colors.text.secondary}
            />
            <Text style={styles.locationText}>{property.location}</Text>
          </View>

          {/* Availability Status */}
          <View
            style={[
              styles.availabilityChip,
              property.isAvailable
                ? styles.availableChip
                : styles.rentedChip,
            ]}
          >
            <Text style={styles.availabilityChipText}>
              {property.isAvailable
                ? 'Available for Rent'
                : 'Currently Rented'}
            </Text>
          </View>

          {/* Price Card */}
          <View style={styles.priceCard}>
            <Text style={styles.priceAmount}>{formatPrice(property.price)}</Text>
            <Text style={styles.priceLabel}>/month</Text>
          </View>

          {/* Details Grid */}
          <View style={styles.detailsGrid}>
            <View style={styles.detailCard}>
              <Ionicons
                name="bed-outline"
                size={28}
                color={Colors.primary}
              />
              <Text style={styles.detailNumber}>{property.bedrooms}</Text>
              <Text style={styles.detailLabel}>Bedrooms</Text>
            </View>

            <View style={styles.detailCard}>
              <Ionicons
                name="water-outline"
                size={28}
                color={Colors.primary}
              />
              <Text style={styles.detailNumber}>{property.bathrooms}</Text>
              <Text style={styles.detailLabel}>Bathrooms</Text>
            </View>

            <View style={styles.detailCard}>
              <Ionicons
                name="resize-outline"
                size={28}
                color={Colors.primary}
              />
              <Text style={styles.detailNumber}>{property.area}</Text>
              <Text style={styles.detailLabel}>m</Text>
            </View>
          </View>

          {/* Property Features Section */}
          <View style={styles.section}>
            <Text style={styles.sectionHeading}>Property Features</Text>
            <View style={styles.propertyFeaturesGrid}>
              <View style={styles.propertyFeatureRow}>
                <Ionicons
                  name={property.furnished ? 'checkmark-circle' : 'close-circle'}
                  size={24}
                  color={property.furnished ? '#10B981' : '#EF4444'}
                />
                <Text style={styles.propertyFeatureLabel}>Furnished</Text>
              </View>
              <View style={styles.propertyFeatureRow}>
                <Ionicons
                  name={property.petFriendly ? 'checkmark-circle' : 'close-circle'}
                  size={24}
                  color={property.petFriendly ? '#10B981' : '#EF4444'}
                />
                <Text style={styles.propertyFeatureLabel}>Pet Friendly</Text>
              </View>
              <View style={styles.propertyFeatureRow}>
                <Ionicons
                  name={property.hasParking ? 'checkmark-circle' : 'close-circle'}
                  size={24}
                  color={property.hasParking ? '#10B981' : '#EF4444'}
                />
                <Text style={styles.propertyFeatureLabel}>Parking Available</Text>
              </View>
            </View>
          </View>

          {/* Description */}
          <View style={styles.section}>
            <Text style={styles.sectionHeading}>About this property</Text>
            <Text style={styles.descriptionText}>{property.description}</Text>
          </View>

          {/* Features */}
          {property.features && property.features.length > 0 && (
            <View style={styles.section}>
              <Text style={styles.sectionHeading}>Features & Amenities</Text>
              <View style={styles.featuresGrid}>
                {property.features.map((feature, index) => (
                  <View key={index} style={styles.featureChip}>
                    <Ionicons
                      name="checkmark-circle"
                      size={18}
                      color={Colors.success}
                    />
                    <Text style={styles.featureText}>{feature}</Text>
                  </View>
                ))}
              </View>
            </View>
          )}

          {/* Location Map */}
          <View style={styles.section}>
            <View style={styles.mapHeader}>
              <Text style={styles.sectionHeading}>Lokasi</Text>
              {distance !== null && (
                <View style={styles.distanceBadge}>
                  <Ionicons name="location" size={16} color={Colors.primary} />
                  <Text style={styles.distanceText}>{formatDistance(distance)}</Text>
                </View>
              )}
            </View>
            <TouchableOpacity
              style={styles.mapContainer}
              onPress={() => navigation.navigate('Map')}
              activeOpacity={0.9}
            >
              <MapView
                provider={PROVIDER_GOOGLE}
                style={styles.map}
                initialRegion={{
                  latitude: property.latitude,
                  longitude: property.longitude,
                  latitudeDelta: 0.01,
                  longitudeDelta: 0.01,
                }}
                scrollEnabled={false}
                zoomEnabled={false}
                rotateEnabled={false}
                pitchEnabled={false}
              >
                <Marker
                  coordinate={{
                    latitude: property.latitude,
                    longitude: property.longitude,
                  }}
                  title={property.title}
                />
              </MapView>
              <View style={styles.mapOverlay}>
                <Ionicons name="expand-outline" size={24} color={Colors.white} />
                <Text style={styles.mapOverlayText}>Lihat di Peta</Text>
              </View>
            </TouchableOpacity>
            <View style={styles.addressContainer}>
              <Ionicons name="location-outline" size={20} color={Colors.text.secondary} />
              <Text style={styles.addressText}>{property.location}</Text>
            </View>
          </View>

          {/* Owner Information */}
          <View style={styles.section}>
            <Text style={styles.sectionHeading}>Property Owner</Text>
            <OwnerCard owner={property.owner} onContactPress={handleContact} />
          </View>

          {/* Bottom Padding */}
          <View style={styles.bottomPadding} />
        </View>
      </ScrollView>

      {/* Contact Button (Sticky) */}
      <SafeAreaView edges={['bottom']} style={styles.contactButtonContainer}>
        <TouchableOpacity
          style={styles.contactButton}
          onPress={handleContact}
          activeOpacity={0.8}
        >
          <Text style={styles.contactButtonText}>Contact Owner</Text>
        </TouchableOpacity>
      </SafeAreaView>

      {/* Fullscreen Image Viewer */}
      <ImageViewerModal
        visible={fullscreenVisible}
        images={property.imageUrls}
        initialIndex={currentImageIndex}
        onClose={() => setFullscreenVisible(false)}
      />

      {/* Contact Owner Modal */}
      <ContactOwnerModal
        visible={contactModalVisible}
        property={property}
        onClose={() => setContactModalVisible(false)}
      />
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.white,
  },
  scrollView: {
    flex: 1,
  },
  errorContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: Colors.background,
  },
  errorText: {
    fontSize: Fonts.size.xl,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.text.primary,
    marginBottom: 16,
  },
  backButton: {
    paddingHorizontal: 24,
    paddingVertical: 12,
    backgroundColor: Colors.primary,
    borderRadius: 8,
  },
  backButtonText: {
    color: Colors.white,
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.semiBold,
  },
  carouselContainer: {
    position: 'relative',
  },
  buttonGradient: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    height: 120,
    pointerEvents: 'none',
  },
  backBtn: {
    position: 'absolute',
    top: 50,
    left: 16,
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  favoriteBtn: {
    position: 'absolute',
    top: 50,
    right: 112,
    width: 44,
    height: 44,
    borderRadius: 22,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  compareBtn: {
    position: 'absolute',
    top: 50,
    right: 64,
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  shareBtn: {
    position: 'absolute',
    top: 50,
    right: 16,
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(0, 0, 0, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  contentContainer: {
    paddingHorizontal: 16,
  },
  typeBadge: {
    alignSelf: 'flex-start',
    backgroundColor: Colors.gray[100],
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 12,
    marginTop: 16,
  },
  typeBadgeText: {
    fontSize: 12,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.secondary,
    letterSpacing: 0.5,
  },
  title: {
    fontSize: 26,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginTop: 12,
  },
  locationRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 4,
    marginTop: 8,
  },
  locationText: {
    fontSize: 16,
    color: Colors.text.secondary,
  },
  availabilityChip: {
    alignSelf: 'flex-start',
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 12,
    marginTop: 12,
  },
  availableChip: {
    backgroundColor: Colors.success,
  },
  rentedChip: {
    backgroundColor: Colors.danger,
  },
  availabilityChipText: {
    fontSize: 14,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.white,
  },
  priceCard: {
    flexDirection: 'row',
    alignItems: 'baseline',
    backgroundColor: Colors.surface,
    padding: 16,
    borderRadius: 12,
    marginTop: 20,
    borderWidth: 1,
    borderColor: Colors.border,
  },
  priceAmount: {
    fontSize: 28,
    fontWeight: Fonts.weight.bold,
    color: Colors.primary,
  },
  priceLabel: {
    fontSize: 16,
    color: Colors.text.secondary,
    marginLeft: 4,
  },
  detailsGrid: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginTop: 24,
    gap: 12,
  },
  detailCard: {
    flex: 1,
    backgroundColor: Colors.surface,
    padding: 16,
    borderRadius: 12,
    alignItems: 'center',
  },
  detailNumber: {
    fontSize: 20,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginTop: 8,
  },
  detailLabel: {
    fontSize: 12,
    color: Colors.text.secondary,
    marginTop: 4,
  },
  section: {
    marginTop: 24,
  },
  sectionHeading: {
    fontSize: 20,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginBottom: 12,
  },
  descriptionText: {
    fontSize: 16,
    lineHeight: 24,
    color: Colors.text.secondary,
  },
  propertyFeaturesGrid: {
    gap: 16,
  },
  propertyFeatureRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
    paddingVertical: 8,
  },
  propertyFeatureLabel: {
    fontSize: 16,
    color: Colors.text.primary,
    fontWeight: Fonts.weight.medium,
  },
  featuresGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 10,
  },
  featureChip: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: Colors.surface,
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderRadius: 12,
    gap: 6,
  },
  featureText: {
    fontSize: 14,
    color: Colors.text.primary,
    fontWeight: Fonts.weight.medium,
  },
  bottomPadding: {
    height: 100,
  },
  contactButtonContainer: {
    backgroundColor: Colors.white,
    paddingHorizontal: 16,
    paddingTop: 12,
    borderTopWidth: 1,
    borderTopColor: Colors.border,
  },
  contactButton: {
    backgroundColor: Colors.primary,
    height: 54,
    borderRadius: 12,
    justifyContent: 'center',
    alignItems: 'center',
  },
  contactButtonText: {
    color: Colors.white,
    fontSize: Fonts.size.lg,
    fontWeight: Fonts.weight.bold,
  },
  mapHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 12,
  },
  distanceBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: `${Colors.primary}15`,
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 12,
    gap: 4,
  },
  distanceText: {
    fontSize: 14,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.primary,
  },
  mapContainer: {
    height: 200,
    borderRadius: 12,
    overflow: 'hidden',
    position: 'relative',
  },
  map: {
    width: '100%',
    height: '100%',
  },
  mapOverlay: {
    position: 'absolute',
    top: 12,
    right: 12,
    backgroundColor: 'rgba(0, 0, 0, 0.6)',
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderRadius: 8,
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
  },
  mapOverlayText: {
    color: Colors.white,
    fontSize: 14,
    fontWeight: Fonts.weight.semiBold,
  },
  addressContainer: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    gap: 8,
    marginTop: 12,
    paddingHorizontal: 12,
    paddingVertical: 10,
    backgroundColor: Colors.surface,
    borderRadius: 12,
  },
  addressText: {
    flex: 1,
    fontSize: 14,
    lineHeight: 20,
    color: Colors.text.secondary,
  },
});


====================================================
FILE: screens/SearchScreen.tsx
====================================================

import React, { useState, useMemo } from 'react';
import {
  View,
  Text,
  StyleSheet,
  TouchableOpacity,
  FlatList,
  ScrollView,
  TextInput,
  Switch,
  Animated,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import {
  RootStackNavigationProp,
  PropertyType,
  Property,
  SortOption,
  SearchFilters,
  FilterPreset,
} from '../types';
import { Colors, Fonts } from '../constants';
import { SearchBar, FilterButton, PropertyCard, EmptyState, SortModal, FilterChip, ComparisonButton } from '../components';
import { mockProperties } from '../data';
import { sortProperties, getSortLabel } from '../utils/sortProperties';
import { useLocation } from '../context/LocationContext';

type SearchScreenProps = {
  navigation: RootStackNavigationProp<'Search'>;
};

const FILTER_PRESETS: FilterPreset[] = [
  {
    id: 'all',
    name: 'All Properties',
    filters: {},
  },
  {
    id: 'budget',
    name: 'Budget Friendly',
    filters: {
      maxPrice: '5000000',
    },
  },
  {
    id: 'family',
    name: 'Family Homes',
    filters: {
      bedrooms: '3',
      hasParking: true,
    },
  },
  {
    id: 'pet',
    name: 'Pet Friendly',
    filters: {
      petFriendly: true,
    },
  },
  {
    id: 'luxury',
    name: 'Luxury',
    filters: {
      minPrice: '15000000',
      furnished: true,
    },
  },
];

export const SearchScreen: React.FC<SearchScreenProps> = ({ navigation }) => {
  const { userLocation } = useLocation();
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedType, setSelectedType] = useState<PropertyType>('all');
  const [minPrice, setMinPrice] = useState('');
  const [maxPrice, setMaxPrice] = useState('');
  const [selectedBedrooms, setSelectedBedrooms] = useState<string>('Any');
  const [availableOnly, setAvailableOnly] = useState(false);
  const [furnished, setFurnished] = useState<boolean | null>(null);
  const [petFriendly, setPetFriendly] = useState<boolean | null>(null);
  const [hasParking, setHasParking] = useState<boolean | null>(null);
  const [sortOption, setSortOption] = useState<SortOption>('newest');
  const [showSortModal, setShowSortModal] = useState(false);
  const [activePreset, setActivePreset] = useState<string>('all');

  const filteredProperties = useMemo(() => {
    let filtered = mockProperties.filter((property) => {
      // Search query filter
      if (searchQuery) {
        const query = searchQuery.toLowerCase();
        const matchesTitle = property.title.toLowerCase().includes(query);
        const matchesLocation = property.location.toLowerCase().includes(query);
        if (!matchesTitle && !matchesLocation) {
          return false;
        }
      }

      // Property type filter
      if (selectedType !== 'all' && property.type !== selectedType) {
        return false;
      }

      // Price range filter
      if (minPrice) {
        const min = parseFloat(minPrice.replace(/\./g, ''));
        if (property.price < min) {
          return false;
        }
      }
      if (maxPrice) {
        const max = parseFloat(maxPrice.replace(/\./g, ''));
        if (property.price > max) {
          return false;
        }
      }

      // Bedrooms filter
      if (selectedBedrooms !== 'Any') {
        if (selectedBedrooms === '4+') {
          if (property.bedrooms < 4) {
            return false;
          }
        } else {
          if (property.bedrooms !== parseInt(selectedBedrooms)) {
            return false;
          }
        }
      }

      // Availability filter
      if (availableOnly && !property.isAvailable) {
        return false;
      }

      // Furnished filter
      if (furnished !== null && property.furnished !== furnished) {
        return false;
      }

      // Pet friendly filter
      if (petFriendly !== null && property.petFriendly !== petFriendly) {
        return false;
      }

      // Parking filter
      if (hasParking !== null && property.hasParking !== hasParking) {
        return false;
      }

      return true;
    });

    // Apply sorting
    return sortProperties(filtered, sortOption, userLocation);
  }, [
    searchQuery,
    selectedType,
    minPrice,
    maxPrice,
    selectedBedrooms,
    availableOnly,
    furnished,
    petFriendly,
    hasParking,
    sortOption,
    userLocation,
  ]);

  const handlePropertyPress = (property: Property) => {
    navigation.navigate('PropertyDetail', { property });
  };

  const handleClearFilters = () => {
    setSearchQuery('');
    setSelectedType('all');
    setMinPrice('');
    setMaxPrice('');
    setSelectedBedrooms('Any');
    setAvailableOnly(false);
    setFurnished(null);
    setPetFriendly(null);
    setHasParking(null);
    setSortOption('newest');
    setActivePreset('all');
  };

  const hasActiveFilters =
    searchQuery ||
    selectedType !== 'all' ||
    minPrice ||
    maxPrice ||
    selectedBedrooms !== 'Any' ||
    availableOnly ||
    furnished !== null ||
    petFriendly !== null ||
    hasParking !== null;

  const formatPriceInput = (value: string) => {
    const numeric = value.replace(/\D/g, '');
    return numeric.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
  };

  const handleMinPriceChange = (value: string) => {
    const formatted = formatPriceInput(value);
    setMinPrice(formatted);
    setActivePreset('');
  };

  const handleMaxPriceChange = (value: string) => {
    const formatted = formatPriceInput(value);
    setMaxPrice(formatted);
    setActivePreset('');
  };

  const handlePresetSelect = (preset: FilterPreset) => {
    setActivePreset(preset.id);

    // Clear all filters first
    setSearchQuery('');
    setSelectedType('all');
    setMinPrice('');
    setMaxPrice('');
    setSelectedBedrooms('Any');
    setAvailableOnly(false);
    setFurnished(null);
    setPetFriendly(null);
    setHasParking(null);

    // Apply preset filters
    if (preset.filters.minPrice) {
      setMinPrice(formatPriceInput(preset.filters.minPrice));
    }
    if (preset.filters.maxPrice) {
      setMaxPrice(formatPriceInput(preset.filters.maxPrice));
    }
    if (preset.filters.bedrooms) {
      setSelectedBedrooms(preset.filters.bedrooms);
    }
    if (preset.filters.furnished !== undefined) {
      setFurnished(preset.filters.furnished);
    }
    if (preset.filters.petFriendly !== undefined) {
      setPetFriendly(preset.filters.petFriendly);
    }
    if (preset.filters.hasParking !== undefined) {
      setHasParking(preset.filters.hasParking);
    }
  };

  const toggleFurnished = () => {
    setFurnished((prev) => (prev === null ? true : prev === true ? false : null));
    setActivePreset('');
  };

  const togglePetFriendly = () => {
    setPetFriendly((prev) => (prev === null ? true : prev === true ? false : null));
    setActivePreset('');
  };

  const toggleHasParking = () => {
    setHasParking((prev) => (prev === null ? true : prev === true ? false : null));
    setActivePreset('');
  };

  const activeFiltersCount = [
    searchQuery,
    selectedType !== 'all',
    minPrice,
    maxPrice,
    selectedBedrooms !== 'Any',
    availableOnly,
    furnished !== null,
    petFriendly !== null,
    hasParking !== null,
  ].filter(Boolean).length;

  const renderHeader = () => (
    <View style={styles.headerContainer}>
      {/* Back Button and Title */}
      <View style={styles.topBar}>
        <TouchableOpacity
          style={styles.backButton}
          onPress={() => navigation.goBack()}
        >
          <Ionicons name="arrow-back" size={24} color={Colors.text.primary} />
        </TouchableOpacity>
        <Text style={styles.title}>Search Properties</Text>
      </View>

      {/* Filter Presets */}
      <View style={styles.presetsSection}>
        <ScrollView
          horizontal
          showsHorizontalScrollIndicator={false}
          contentContainerStyle={styles.presetsScroll}
        >
          {FILTER_PRESETS.map((preset) => (
            <TouchableOpacity
              key={preset.id}
              style={[
                styles.presetChip,
                activePreset === preset.id && styles.presetChipActive,
              ]}
              onPress={() => handlePresetSelect(preset)}
              activeOpacity={0.7}
            >
              <Text
                style={[
                  styles.presetChipText,
                  activePreset === preset.id && styles.presetChipTextActive,
                ]}
              >
                {preset.name}
              </Text>
            </TouchableOpacity>
          ))}
        </ScrollView>
      </View>

      {/* Search Bar */}
      <View style={styles.searchSection}>
        <SearchBar
          value={searchQuery}
          onChangeText={(text) => {
            setSearchQuery(text);
            setActivePreset('');
          }}
          placeholder="Search by location or title..."
        />
      </View>

      {/* Sort Section */}
      <View style={styles.sortSection}>
        <TouchableOpacity
          style={styles.sortButton}
          onPress={() => setShowSortModal(true)}
          activeOpacity={0.7}
        >
          <Ionicons name="swap-vertical" size={20} color={Colors.primary} />
          <Text style={styles.sortButtonText}>{getSortLabel(sortOption)}</Text>
          <Ionicons name="chevron-down" size={20} color={Colors.primary} />
        </TouchableOpacity>
      </View>

      {/* Active Filters Bar */}
      {hasActiveFilters && (
        <View style={styles.activeFiltersSection}>
          <Text style={styles.activeFiltersText}>
            {activeFiltersCount} {activeFiltersCount === 1 ? 'filter' : 'filters'} active
          </Text>
          <TouchableOpacity onPress={handleClearFilters}>
            <Text style={styles.clearAllText}>Clear all</Text>
          </TouchableOpacity>
        </View>
      )}

      {/* Property Type Filter */}
      <View style={styles.filterSection}>
        <Text style={styles.filterLabel}>Property Type</Text>
        <ScrollView
          horizontal
          showsHorizontalScrollIndicator={false}
          style={styles.filterScrollView}
        >
          <FilterButton
            label="All"
            isActive={selectedType === 'all'}
            onPress={() => {
              setSelectedType('all');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="Apartment"
            isActive={selectedType === 'apartment'}
            onPress={() => {
              setSelectedType('apartment');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="House"
            isActive={selectedType === 'house'}
            onPress={() => {
              setSelectedType('house');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="Villa"
            isActive={selectedType === 'villa'}
            onPress={() => {
              setSelectedType('villa');
              setActivePreset('');
            }}
          />
        </ScrollView>
      </View>

      {/* Price Range */}
      <View style={styles.filterSection}>
        <Text style={styles.filterLabel}>Price Range</Text>
        <View style={styles.priceInputRow}>
          <View style={styles.priceInputContainer}>
            <Text style={styles.pricePrefix}>Rp</Text>
            <TextInput
              style={styles.priceInput}
              value={minPrice}
              onChangeText={handleMinPriceChange}
              placeholder="Min"
              placeholderTextColor={Colors.text.disabled}
              keyboardType="numeric"
            />
          </View>
          <Text style={styles.priceSeparator}>-</Text>
          <View style={styles.priceInputContainer}>
            <Text style={styles.pricePrefix}>Rp</Text>
            <TextInput
              style={styles.priceInput}
              value={maxPrice}
              onChangeText={handleMaxPriceChange}
              placeholder="Max"
              placeholderTextColor={Colors.text.disabled}
              keyboardType="numeric"
            />
          </View>
        </View>
      </View>

      {/* Bedrooms Filter */}
      <View style={styles.filterSection}>
        <Text style={styles.filterLabel}>Bedrooms</Text>
        <ScrollView
          horizontal
          showsHorizontalScrollIndicator={false}
          style={styles.filterScrollView}
        >
          <FilterButton
            label="Any"
            isActive={selectedBedrooms === 'Any'}
            onPress={() => {
              setSelectedBedrooms('Any');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="1"
            isActive={selectedBedrooms === '1'}
            onPress={() => {
              setSelectedBedrooms('1');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="2"
            isActive={selectedBedrooms === '2'}
            onPress={() => {
              setSelectedBedrooms('2');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="3"
            isActive={selectedBedrooms === '3'}
            onPress={() => {
              setSelectedBedrooms('3');
              setActivePreset('');
            }}
          />
          <FilterButton
            label="4+"
            isActive={selectedBedrooms === '4+'}
            onPress={() => {
              setSelectedBedrooms('4+');
              setActivePreset('');
            }}
          />
        </ScrollView>
      </View>

      {/* Availability Toggle */}
      <View style={styles.filterSection}>
        <View style={styles.availabilityRow}>
          <Text style={styles.filterLabel}>Available Only</Text>
          <Switch
            value={availableOnly}
            onValueChange={(value) => {
              setAvailableOnly(value);
              setActivePreset('');
            }}
            trackColor={{ false: Colors.gray[300], true: Colors.primary }}
            thumbColor={Colors.white}
          />
        </View>
      </View>

      {/* Additional Filters */}
      <View style={styles.filterSection}>
        <Text style={styles.filterLabel}>Additional Filters</Text>
        <View style={styles.filterChipsRow}>
          <FilterChip
            label="Furnished"
            isActive={furnished}
            onPress={toggleFurnished}
            icon="home"
          />
          <FilterChip
            label="Pet Friendly"
            isActive={petFriendly}
            onPress={togglePetFriendly}
            icon="paw"
          />
          <FilterChip
            label="Parking"
            isActive={hasParking}
            onPress={toggleHasParking}
            icon="car"
          />
        </View>
      </View>

      {/* Results Count */}
      <View style={styles.resultsHeader}>
        <Text style={styles.resultsCount}>
          {filteredProperties.length}{' '}
          {filteredProperties.length === 1 ? 'property' : 'properties'} found
        </Text>
      </View>
    </View>
  );

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <FlatList
        data={filteredProperties}
        keyExtractor={(item) => item.id}
        renderItem={({ item, index }) => (
          <PropertyCard
            property={item}
            onPress={() => handlePropertyPress(item)}
            index={index}
          />
        )}
        ListHeaderComponent={renderHeader}
        ListEmptyComponent={
          <EmptyState
            icon="search-outline"
            title="No Properties Found"
            message="Try adjusting your search filters"
            actionLabel={hasActiveFilters ? 'Clear Filters' : undefined}
            onAction={hasActiveFilters ? handleClearFilters : undefined}
          />
        }
        contentContainerStyle={styles.contentContainer}
        showsVerticalScrollIndicator={false}
      />

      <SortModal
        visible={showSortModal}
        currentSort={sortOption}
        onSelectSort={setSortOption}
        onClose={() => setShowSortModal(false)}
      />
      <ComparisonButton />
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  contentContainer: {
    paddingBottom: 20,
  },
  headerContainer: {
    paddingHorizontal: 16,
    paddingTop: 16,
  },
  topBar: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 16,
  },
  backButton: {
    width: 40,
    height: 40,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 8,
  },
  title: {
    fontSize: 24,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
  },
  presetsSection: {
    marginTop: 8,
    marginBottom: 16,
  },
  presetsScroll: {
    gap: 8,
  },
  presetChip: {
    height: 40,
    paddingHorizontal: 16,
    borderRadius: 20,
    backgroundColor: '#F3F4F6',
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  presetChipActive: {
    backgroundColor: Colors.primary,
    borderColor: Colors.primary,
  },
  presetChipText: {
    fontSize: 14,
    fontWeight: '600',
    color: '#6B7280',
  },
  presetChipTextActive: {
    color: 'white',
  },
  searchSection: {
    marginTop: 0,
  },
  sortSection: {
    marginTop: 16,
  },
  sortButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: 12,
    paddingHorizontal: 16,
    borderRadius: 12,
    borderWidth: 1.5,
    borderColor: Colors.primary,
    backgroundColor: 'white',
    gap: 8,
  },
  sortButtonText: {
    fontSize: 15,
    fontWeight: '600',
    color: Colors.primary,
    flex: 1,
  },
  activeFiltersSection: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginTop: 16,
    paddingVertical: 8,
    paddingHorizontal: 12,
    backgroundColor: `${Colors.primary}10`,
    borderRadius: 8,
  },
  activeFiltersText: {
    fontSize: 14,
    fontWeight: '600',
    color: Colors.text.primary,
  },
  clearAllText: {
    fontSize: 14,
    fontWeight: '600',
    color: Colors.primary,
  },
  filterSection: {
    marginTop: 24,
  },
  filterLabel: {
    fontSize: 16,
    fontWeight: Fonts.weight.bold,
    color: Colors.text.primary,
    marginBottom: 12,
  },
  filterScrollView: {
    flexGrow: 0,
  },
  filterChipsRow: {
    flexDirection: 'row',
    gap: 8,
    flexWrap: 'wrap',
  },
  priceInputRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
  },
  priceInputContainer: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: Colors.surface,
    borderRadius: 12,
    paddingHorizontal: 12,
    height: 48,
  },
  pricePrefix: {
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.medium,
    color: Colors.text.secondary,
    marginRight: 4,
  },
  priceInput: {
    flex: 1,
    fontSize: Fonts.size.md,
    color: Colors.text.primary,
    padding: 0,
  },
  priceSeparator: {
    fontSize: Fonts.size.md,
    color: Colors.text.secondary,
  },
  availabilityRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  resultsHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginTop: 24,
    marginBottom: 16,
  },
  resultsCount: {
    fontSize: Fonts.size.md,
    fontWeight: Fonts.weight.semiBold,
    color: Colors.text.primary,
  },
});


====================================================
FILE: screens/SettingsScreen.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, ScrollView, Switch, Alert } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Colors, Fonts } from '../constants';
import { useUser } from '../context/UserContext';
import { SettingItem } from '../components/SettingItem';

export const SettingsScreen: React.FC = () => {
  const { settings, updateSettings } = useUser();

  const handlePushNotifications = () => {
    updateSettings({
      ...settings,
      notifications: {
        ...settings.notifications,
        push: !settings.notifications.push,
      },
    });
  };

  const handleEmailNotifications = () => {
    updateSettings({
      ...settings,
      notifications: {
        ...settings.notifications,
        email: !settings.notifications.email,
      },
    });
  };

  const handleLanguage = () => {
    Alert.alert(
      'Language',
      'Choose your preferred language',
      [
        {
          text: 'English',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, language: 'en' },
            }),
        },
        {
          text: 'Bahasa Indonesia',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, language: 'id' },
            }),
        },
        { text: 'Cancel', style: 'cancel' },
      ]
    );
  };

  const handleCurrency = () => {
    Alert.alert(
      'Currency',
      'Choose your preferred currency',
      [
        {
          text: 'IDR (Indonesian Rupiah)',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, currency: 'IDR' },
            }),
        },
        {
          text: 'USD (US Dollar)',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, currency: 'USD' },
            }),
        },
        { text: 'Cancel', style: 'cancel' },
      ]
    );
  };

  const handleDistanceUnit = () => {
    Alert.alert(
      'Distance Unit',
      'Choose your preferred distance unit',
      [
        {
          text: 'Kilometers',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, distanceUnit: 'km' },
            }),
        },
        {
          text: 'Miles',
          onPress: () =>
            updateSettings({
              ...settings,
              preferences: { ...settings.preferences, distanceUnit: 'mi' },
            }),
        },
        { text: 'Cancel', style: 'cancel' },
      ]
    );
  };

  const handleDarkMode = () => {
    updateSettings({
      ...settings,
      darkMode: !settings.darkMode,
    });
    if (!settings.darkMode) {
      Alert.alert('Coming Soon', 'Dark mode will be available in the next update!');
    }
  };

  const handleClearCache = () => {
    Alert.alert(
      'Clear Cache',
      'Are you sure you want to clear the app cache?',
      [
        {
          text: 'Cancel',
          style: 'cancel',
        },
        {
          text: 'Clear',
          style: 'destructive',
          onPress: () => {
            Alert.alert('Success', 'Cache cleared successfully');
          },
        },
      ]
    );
  };

  const getLanguageLabel = (): string => {
    return settings.preferences.language === 'en' ? 'English' : 'Bahasa Indonesia';
  };

  const getDistanceLabel = (): string => {
    return settings.preferences.distanceUnit === 'km' ? 'Kilometers' : 'Miles';
  };

  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        showsVerticalScrollIndicator={false}
      >
        {/* Notifications Section */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>NOTIFICATIONS</Text>
          <View style={styles.sectionContent}>
            <SettingItem
              icon="notifications-outline"
              label="Push Notifications"
              rightComponent={
                <Switch
                  value={settings.notifications.push}
                  onValueChange={handlePushNotifications}
                  trackColor={{ false: Colors.border, true: Colors.primary }}
                  thumbColor={Colors.card}
                />
              }
            />
            <SettingItem
              icon="mail-outline"
              label="Email Notifications"
              rightComponent={
                <Switch
                  value={settings.notifications.email}
                  onValueChange={handleEmailNotifications}
                  trackColor={{ false: Colors.border, true: Colors.primary }}
                  thumbColor={Colors.card}
                />
              }
            />
          </View>
        </View>

        {/* Preferences Section */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>PREFERENCES</Text>
          <View style={styles.sectionContent}>
            <SettingItem
              icon="language-outline"
              label="Language"
              value={getLanguageLabel()}
              onPress={handleLanguage}
            />
            <SettingItem
              icon="cash-outline"
              label="Currency"
              value={settings.preferences.currency}
              onPress={handleCurrency}
            />
            <SettingItem
              icon="speedometer-outline"
              label="Distance Unit"
              value={getDistanceLabel()}
              onPress={handleDistanceUnit}
            />
          </View>
        </View>

        {/* App Section */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>APP</Text>
          <View style={styles.sectionContent}>
            <SettingItem
              icon="moon-outline"
              label="Dark Mode"
              rightComponent={
                <Switch
                  value={settings.darkMode}
                  onValueChange={handleDarkMode}
                  trackColor={{ false: Colors.border, true: Colors.primary }}
                  thumbColor={Colors.card}
                />
              }
            />
            <SettingItem
              icon="trash-outline"
              label="Cache Size"
              value="2.4 MB"
              onPress={handleClearCache}
            />
            <SettingItem
              icon="information-circle-outline"
              label="App Version"
              value="1.0.0"
            />
          </View>
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  section: {
    marginTop: 24,
    paddingHorizontal: 16,
  },
  sectionTitle: {
    fontSize: 12,
    fontFamily: Fonts.semiBold,
    color: Colors.textSecondary,
    letterSpacing: 0.5,
    marginBottom: 8,
    marginLeft: 4,
  },
  sectionContent: {
    backgroundColor: Colors.card,
    borderRadius: 12,
    overflow: 'hidden',
    borderWidth: 1,
    borderColor: Colors.border,
  },
  bottomSpacing: {
    height: 32,
  },
});


====================================================
FILE: screens/TermsScreen.tsx
====================================================

import React from 'react';
import { View, Text, StyleSheet, ScrollView } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Colors, Fonts } from '../constants';

export const TermsScreen: React.FC = () => {
  return (
    <SafeAreaView style={styles.container} edges={['top']}>
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={styles.content}
        showsVerticalScrollIndicator={false}
      >
        <Text style={styles.title}>Terms & Conditions</Text>
        <Text style={styles.lastUpdated}>Last updated: November 2024</Text>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>1. Introduction</Text>
          <Text style={styles.paragraph}>
            Welcome to Rent App. These Terms and Conditions govern your use of our
            mobile application and services. By accessing or using Rent App, you
            agree to be bound by these Terms. If you disagree with any part of these
            terms, you may not access the service.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>2. Use of Service</Text>
          <Text style={styles.paragraph}>
            Rent App provides a platform for users to search, view, and connect with
            property owners for rental properties in Indonesia. You agree to use our
            service only for lawful purposes and in accordance with these Terms.
          </Text>
          <Text style={styles.paragraph}>
            You are responsible for:
          </Text>
          <Text style={styles.bulletPoint}> Maintaining the confidentiality of your account</Text>
          <Text style={styles.bulletPoint}> All activities that occur under your account</Text>
          <Text style={styles.bulletPoint}> Notifying us immediately of any unauthorized access</Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>3. Property Listings</Text>
          <Text style={styles.paragraph}>
            All property listings on Rent App are provided by third-party property
            owners. We do not guarantee the accuracy, completeness, or reliability of
            any listings. Users should conduct their own due diligence before entering
            into any rental agreements.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>4. User Content</Text>
          <Text style={styles.paragraph}>
            You retain ownership of any content you submit to Rent App. However, by
            submitting content, you grant us a worldwide, non-exclusive, royalty-free
            license to use, reproduce, and distribute your content in connection with
            the service.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>5. Prohibited Activities</Text>
          <Text style={styles.paragraph}>You may not:</Text>
          <Text style={styles.bulletPoint}> Use the service for any illegal purpose</Text>
          <Text style={styles.bulletPoint}> Attempt to gain unauthorized access to our systems</Text>
          <Text style={styles.bulletPoint}> Transmit viruses or malicious code</Text>
          <Text style={styles.bulletPoint}> Harass, abuse, or harm other users</Text>
          <Text style={styles.bulletPoint}> Submit false or misleading information</Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>6. Limitation of Liability</Text>
          <Text style={styles.paragraph}>
            Rent App shall not be liable for any indirect, incidental, special,
            consequential, or punitive damages resulting from your use of or inability
            to use the service. We do not guarantee that the service will be
            uninterrupted, secure, or error-free.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>7. Changes to Terms</Text>
          <Text style={styles.paragraph}>
            We reserve the right to modify these Terms at any time. We will notify
            users of any material changes via the app or email. Your continued use of
            the service after such modifications constitutes your acceptance of the
            updated Terms.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>8. Governing Law</Text>
          <Text style={styles.paragraph}>
            These Terms shall be governed by and construed in accordance with the laws
            of Indonesia, without regard to its conflict of law provisions.
          </Text>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>9. Contact Us</Text>
          <Text style={styles.paragraph}>
            If you have any questions about these Terms, please contact us at:
          </Text>
          <Text style={styles.contactText}>support@rentapp.com</Text>
        </View>

        <View style={styles.bottomSpacing} />
      </ScrollView>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: Colors.background,
  },
  scrollView: {
    flex: 1,
  },
  content: {
    paddingHorizontal: 20,
    paddingVertical: 24,
  },
  title: {
    fontSize: 28,
    fontFamily: Fonts.bold,
    color: Colors.text,
    marginBottom: 8,
  },
  lastUpdated: {
    fontSize: 14,
    fontFamily: Fonts.regular,
    color: Colors.textSecondary,
    marginBottom: 24,
  },
  section: {
    marginBottom: 24,
  },
  sectionTitle: {
    fontSize: 18,
    fontFamily: Fonts.semiBold,
    color: Colors.text,
    marginBottom: 12,
  },
  paragraph: {
    fontSize: 15,
    fontFamily: Fonts.regular,
    color: Colors.text,
    lineHeight: 24,
    marginBottom: 12,
  },
  bulletPoint: {
    fontSize: 15,
    fontFamily: Fonts.regular,
    color: Colors.text,
    lineHeight: 24,
    marginBottom: 6,
    paddingLeft: 8,
  },
  contactText: {
    fontSize: 15,
    fontFamily: Fonts.medium,
    color: Colors.primary,
    marginTop: 8,
  },
  bottomSpacing: {
    height: 20,
  },
});


====================================================
FILE: types/comparison.ts
====================================================

import { Property } from './index';

export interface ComparisonProperty {
  id: string;
  title: string;
  location: string;
  price: number;
  imageUrl: string;
  bedrooms: number;
  bathrooms: number;
  area: number;
  type: 'apartment' | 'house' | 'villa';
  furnished: boolean;
  petFriendly: boolean;
  hasParking: boolean;
  features?: string[];
}

export const MAX_COMPARISON_ITEMS = 3;


====================================================
FILE: types/index.ts
====================================================

export * from './navigation';

export interface Owner {
  id: string;
  name: string;
  phone: string;
  email: string;
  avatar?: string;
  responseTime: string;
  verified: boolean;
}

export interface ContactFormData {
  name: string;
  email: string;
  phone: string;
  message: string;
}

export interface Property {
  id: string;
  title: string;
  location: string;
  price: number;
  bedrooms: number;
  bathrooms: number;
  area: number;
  imageUrls: string[];
  description: string;
  type: 'apartment' | 'house' | 'villa';
  isAvailable: boolean;
  features?: string[];
  furnished: boolean;
  petFriendly: boolean;
  hasParking: boolean;
  createdAt: Date;
  owner: Owner;
  latitude: number;
  longitude: number;
}

export type PropertyType = 'apartment' | 'house' | 'villa' | 'all';

export type SortOption = 'newest' | 'price-low' | 'price-high' | 'area-small' | 'area-large' | 'distance';

export interface SearchFilters {
  searchQuery: string;
  propertyType: PropertyType;
  minPrice: string;
  maxPrice: string;
  bedrooms: string;
  availableOnly: boolean;
  furnished: boolean | null;
  petFriendly: boolean | null;
  hasParking: boolean | null;
}

export interface FilterPreset {
  id: string;
  name: string;
  filters: Partial<SearchFilters>;
}

export interface FavoriteProperty {
  propertyId: string;
  addedAt: Date;
}

export interface User {
  id: string;
  name: string;
  email: string;
  phone: string;
  avatar?: string;
  joinedDate: Date;
  savedProperties: number;
  viewedProperties: number;
}

export interface AppSettings {
  notifications: {
    push: boolean;
    email: boolean;
  };
  preferences: {
    language: 'en' | 'id';
    currency: 'IDR' | 'USD';
    distanceUnit: 'km' | 'mi';
  };
  darkMode: boolean;
}


====================================================
FILE: types/location.ts
====================================================

/**
 * Location Types for Map and Location Features
 */

// Map region for displaying on maps
export interface MapRegion {
  latitude: number;
  longitude: number;
  latitudeDelta: number;
  longitudeDelta: number;
}

// Property marker for map display
export interface PropertyMarker {
  id: string;
  latitude: number;
  longitude: number;
  title: string;
  price: number;
  type: 'apartment' | 'house' | 'villa';
  isAvailable: boolean;
}

// Location permission status
export type LocationPermission = 'granted' | 'denied' | 'undetermined';

// User location coordinates
export interface Coordinates {
  latitude: number;
  longitude: number;
}

// Distance filter options
export interface DistanceFilter {
  maxDistance: number; // in kilometers
  label: string;
}

// Location-based search parameters
export interface LocationSearchParams {
  centerLat: number;
  centerLon: number;
  radiusKm: number;
}


====================================================
FILE: types/navigation.ts
====================================================

import { StackNavigationProp } from '@react-navigation/stack';
import { RouteProp } from '@react-navigation/native';
import { Property } from './index';

export type RootStackParamList = {
  Home: undefined;
  PropertyDetail: { property: Property };
  Search: undefined;
  Favorites: undefined;
  Profile: undefined;
  EditProfile: undefined;
  Settings: undefined;
  About: undefined;
  Terms: undefined;
  Privacy: undefined;
  Comparison: undefined;
  Map: undefined;
  NearbyProperties: undefined;
};

export type RootStackNavigationProp<T extends keyof RootStackParamList> =
  StackNavigationProp<RootStackParamList, T>;

export type RootStackRouteProp<T extends keyof RootStackParamList> = RouteProp<
  RootStackParamList,
  T
>;

declare global {
  namespace ReactNavigation {
    interface RootParamList extends RootStackParamList {}
  }
}


====================================================
FILE: utils/comparisonHelpers.ts
====================================================

import { Property } from '../types';
import { ComparisonProperty } from '../types/comparison';

export const calculatePricePerSqm = (price: number, area: number): number => {
  if (area === 0) return 0;
  return Math.round(price / area);
};

export const getBestValueIndex = (
  values: number[],
  lowest: boolean = false
): number => {
  if (values.length === 0) return -1;

  if (lowest) {
    const minValue = Math.min(...values);
    return values.indexOf(minValue);
  } else {
    const maxValue = Math.max(...values);
    return values.indexOf(maxValue);
  }
};

export const formatComparisonValue = (value: any): string => {
  if (typeof value === 'boolean') {
    return value ? '' : '';
  }

  if (typeof value === 'number') {
    return value.toLocaleString('id-ID');
  }

  return String(value);
};

export const getPropertyForComparison = (
  property: Property
): ComparisonProperty => {
  return {
    id: property.id,
    title: property.title,
    location: property.location,
    price: property.price,
    imageUrl: property.imageUrls[0] || '',
    bedrooms: property.bedrooms,
    bathrooms: property.bathrooms,
    area: property.area,
    type: property.type,
    furnished: property.furnished,
    petFriendly: property.petFriendly,
    hasParking: property.hasParking,
    features: property.features,
  };
};

export const formatPrice = (price: number): string => {
  return `Rp ${(price / 1000000).toFixed(1)} jt`;
};

export const formatArea = (area: number): string => {
  return `${area} m`;
};

export const getPropertyTypeLabel = (type: string): string => {
  const labels: { [key: string]: string } = {
    apartment: 'Apartemen',
    house: 'Rumah',
    villa: 'Villa',
  };
  return labels[type] || type;
};


====================================================
FILE: utils/imageHelpers.ts
====================================================

import { Image } from 'react-native';

/**
 * Append width and height parameters to Unsplash URLs for optimized image loading
 */
export const getImageUrl = (
  url: string,
  width?: number,
  height?: number
): string => {
  if (!url) return '';

  // Check if URL already has query parameters
  const hasParams = url.includes('?');
  const separator = hasParams ? '&' : '?';

  let optimizedUrl = url;

  if (width) {
    optimizedUrl += `${separator}w=${width}`;
  }

  if (height) {
    optimizedUrl += `${optimizedUrl.includes('?') ? '&' : '?'}h=${height}`;
  }

  // Add fit parameter for Unsplash
  if (url.includes('unsplash.com')) {
    optimizedUrl += `${optimizedUrl.includes('?') ? '&' : '?'}fit=crop`;
  }

  return optimizedUrl;
};

/**
 * Preload images for better UX
 */
export const preloadImages = async (urls: string[]): Promise<void> => {
  try {
    const promises = urls.map((url) => {
      return new Promise<void>((resolve, reject) => {
        Image.prefetch(url)
          .then(() => resolve())
          .catch(() => resolve()); // Resolve even on error to not block other images
      });
    });

    await Promise.all(promises);
  } catch (error) {
    console.warn('Error preloading images:', error);
  }
};

/**
 * Get thumbnail URL with smaller dimensions
 */
export const getThumbnailUrl = (url: string): string => {
  return getImageUrl(url, 200, 200);
};

/**
 * Get carousel image URL with optimized dimensions
 */
export const getCarouselImageUrl = (url: string): string => {
  return getImageUrl(url, 800, 600);
};

/**
 * Get fullscreen image URL with higher quality
 */
export const getFullscreenImageUrl = (url: string): string => {
  return getImageUrl(url, 1200, 1200);
};


====================================================
FILE: utils/locationHelpers.ts
====================================================

import { Property } from '../types';
import { MapRegion } from '../types/location';

/**
 * Calculate distance between two coordinates using Haversine formula
 * @param lat1 Latitude of first point
 * @param lon1 Longitude of first point
 * @param lat2 Latitude of second point
 * @param lon2 Longitude of second point
 * @returns Distance in kilometers
 */
export const calculateDistance = (
  lat1: number,
  lon1: number,
  lat2: number,
  lon2: number
): number => {
  const R = 6371; // Radius of Earth in kilometers
  const dLat = toRadians(lat2 - lat1);
  const dLon = toRadians(lon2 - lon1);

  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(toRadians(lat1)) *
      Math.cos(toRadians(lat2)) *
      Math.sin(dLon / 2) *
      Math.sin(dLon / 2);

  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  const distance = R * c;

  return distance;
};

/**
 * Convert degrees to radians
 */
const toRadians = (degrees: number): number => {
  return degrees * (Math.PI / 180);
};

/**
 * Format distance for display
 * @param distance Distance in kilometers
 * @returns Formatted string (e.g., "2.5 km" or "500 m")
 */
export const formatDistance = (distance: number): string => {
  if (distance < 1) {
    return `${Math.round(distance * 1000)} m`;
  }
  return `${distance.toFixed(1)} km`;
};

/**
 * Calculate map region to fit all properties
 * @param properties Array of properties to fit
 * @param padding Padding factor (0.1 = 10% padding)
 * @returns MapRegion to display all properties
 */
export const getRegionForProperties = (
  properties: Property[],
  padding: number = 0.1
): MapRegion => {
  if (properties.length === 0) {
    // Default to Jakarta if no properties
    return {
      latitude: -6.2088,
      longitude: 106.8456,
      latitudeDelta: 0.0922,
      longitudeDelta: 0.0421,
    };
  }

  // Find min and max coordinates
  let minLat = properties[0].latitude;
  let maxLat = properties[0].latitude;
  let minLon = properties[0].longitude;
  let maxLon = properties[0].longitude;

  properties.forEach((property) => {
    minLat = Math.min(minLat, property.latitude);
    maxLat = Math.max(maxLat, property.latitude);
    minLon = Math.min(minLon, property.longitude);
    maxLon = Math.max(maxLon, property.longitude);
  });

  // Calculate center and deltas
  const centerLat = (minLat + maxLat) / 2;
  const centerLon = (minLon + maxLon) / 2;
  const latDelta = (maxLat - minLat) * (1 + padding);
  const lonDelta = (maxLon - minLon) * (1 + padding);

  return {
    latitude: centerLat,
    longitude: centerLon,
    latitudeDelta: Math.max(latDelta, 0.01), // Minimum delta
    longitudeDelta: Math.max(lonDelta, 0.01),
  };
};

/**
 * Sort properties by distance from a location
 * @param properties Array of properties
 * @param userLat User's latitude
 * @param userLon User's longitude
 * @returns Sorted array of properties
 */
export const sortPropertiesByDistance = (
  properties: Property[],
  userLat: number,
  userLon: number
): Property[] => {
  return [...properties].sort((a, b) => {
    const distanceA = calculateDistance(userLat, userLon, a.latitude, a.longitude);
    const distanceB = calculateDistance(userLat, userLon, b.latitude, b.longitude);
    return distanceA - distanceB;
  });
};

/**
 * Filter properties within a certain radius
 * @param properties Array of properties
 * @param centerLat Center latitude
 * @param centerLon Center longitude
 * @param radiusKm Radius in kilometers
 * @returns Filtered properties within radius
 */
export const filterPropertiesByRadius = (
  properties: Property[],
  centerLat: number,
  centerLon: number,
  radiusKm: number
): Property[] => {
  return properties.filter((property) => {
    const distance = calculateDistance(
      centerLat,
      centerLon,
      property.latitude,
      property.longitude
    );
    return distance <= radiusKm;
  });
};

/**
 * Get nearby properties sorted by distance
 * @param properties Array of properties
 * @param userLat User's latitude
 * @param userLon User's longitude
 * @param maxDistance Maximum distance in km
 * @returns Nearby properties sorted by distance
 */
export const getNearbyProperties = (
  properties: Property[],
  userLat: number,
  userLon: number,
  maxDistance: number = 10
): Property[] => {
  const nearby = filterPropertiesByRadius(properties, userLat, userLon, maxDistance);
  return sortPropertiesByDistance(nearby, userLat, userLon);
};

/**
 * Check if coordinates are valid
 */
export const isValidCoordinates = (lat: number, lon: number): boolean => {
  return (
    typeof lat === 'number' &&
    typeof lon === 'number' &&
    lat >= -90 &&
    lat <= 90 &&
    lon >= -180 &&
    lon <= 180 &&
    !isNaN(lat) &&
    !isNaN(lon)
  );
};

/**
 * Get distance category for display
 */
export const getDistanceCategory = (distance: number): string => {
  if (distance < 1) return 'Sangat Dekat';
  if (distance < 3) return 'Dekat';
  if (distance < 5) return 'Cukup Dekat';
  if (distance < 10) return 'Sedang';
  return 'Jauh';
};


====================================================
FILE: utils/sortProperties.ts
====================================================

import { Property, SortOption } from '../types';
import { calculateDistance } from './locationHelpers';

export const sortProperties = (
  properties: Property[],
  sortOption: SortOption,
  userLocation?: { latitude: number; longitude: number } | null
): Property[] => {
  const sorted = [...properties];

  switch (sortOption) {
    case 'newest':
      return sorted.sort((a, b) => {
        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();
      });

    case 'price-low':
      return sorted.sort((a, b) => a.price - b.price);

    case 'price-high':
      return sorted.sort((a, b) => b.price - a.price);

    case 'area-small':
      return sorted.sort((a, b) => a.area - b.area);

    case 'area-large':
      return sorted.sort((a, b) => b.area - a.area);

    case 'distance':
      if (!userLocation) return sorted;
      return sorted.sort((a, b) => {
        const distanceA = calculateDistance(
          userLocation.latitude,
          userLocation.longitude,
          a.latitude,
          a.longitude
        );
        const distanceB = calculateDistance(
          userLocation.latitude,
          userLocation.longitude,
          b.latitude,
          b.longitude
        );
        return distanceA - distanceB;
      });

    default:
      return sorted;
  }
};

export const getSortLabel = (sortOption: SortOption): string => {
  switch (sortOption) {
    case 'newest':
      return 'Terbaru';
    case 'price-low':
      return 'Harga: Terendah';
    case 'price-high':
      return 'Harga: Tertinggi';
    case 'area-small':
      return 'Luas: Terkecil';
    case 'area-large':
      return 'Luas: Terbesar';
    case 'distance':
      return 'Jarak: Terdekat';
    default:
      return 'Urutkan';
  }
};


====================================================
COLLECTION SUMMARY
====================================================
Total files: 56
Collected: 56 
Missing: 0 

====================================================
OUTPUT: collected_files.txt
====================================================
